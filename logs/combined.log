{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759551870999}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434/ - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:24:30.991Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:24:30.997Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:24:30.995Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":10,"maxLeverage":5,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":2,"stopLossPercentage":3,"symbol":"BTCUSDT","takeProfitPercentage":6,"timestamp":"2025-10-04T04:24:30.996Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:24:30.996Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434/ - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:24:30.998Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":10,"maxLeverage":5,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":2,"stopLossPercentage":3,"symbol":"BTCUSDT","takeProfitPercentage":6,"timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:24:30.998Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Trading automático deshabilitado","module":"TradingSystem","timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:24:31.000Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:24:30.999Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:30:51.099Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759552251101}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:30:51.102Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759552260374}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:31:00.371Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:31:00.367Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:31:00.370Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:31:00.370Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:31:00.371Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552260374}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:31:00.373Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:31:00.373Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:31:00.374Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:31:00.374Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:31:00.374Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:31:00.371Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:31:00.371Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:31:00.372Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:31:00.372Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:31:00.372Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:31:00.372Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:31:00.392Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:31:00.373Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:31:00.374Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:31:00.417Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:31:01.442Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:31:01.443Z"}
{"error":"Error: Se necesitan al menos 50 velas para análisis técnico\n    at TechnicalAnalysis.analyze (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/technical-analysis.ts:21:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:100:44)\n    at TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Error en análisis técnico:","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:31:01.810Z"}
{"error":"Error: Se necesitan al menos 10 velas para predicción\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:35:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en predicción Kalman:","module":"KalmanFilter","timestamp":"2025-10-04T04:31:01.811Z"}
{"error":"TypeError: Cannot read properties of undefined (reading 'close')\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:74:51)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:31:01.811Z"}
{"error":"Error: Se necesitan al menos 50 velas para análisis técnico\n    at TechnicalAnalysis.analyze (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/technical-analysis.ts:21:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:100:44)\n    at TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Error en análisis técnico:","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:31:32.920Z"}
{"error":"Error: Se necesitan al menos 10 velas para predicción\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:35:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en predicción Kalman:","module":"KalmanFilter","timestamp":"2025-10-04T04:31:32.921Z"}
{"error":"TypeError: Cannot read properties of undefined (reading 'close')\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:74:51)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:31:32.921Z"}
{"error":"Error: Se necesitan al menos 50 velas para análisis técnico\n    at TechnicalAnalysis.analyze (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/technical-analysis.ts:21:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:100:44)\n    at TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Error en análisis técnico:","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:32:04.050Z"}
{"error":"Error: Se necesitan al menos 10 velas para predicción\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:35:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en predicción Kalman:","module":"KalmanFilter","timestamp":"2025-10-04T04:32:04.056Z"}
{"error":"TypeError: Cannot read properties of undefined (reading 'close')\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:74:51)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:32:04.058Z"}
{"error":"Error: Se necesitan al menos 50 velas para análisis técnico\n    at TechnicalAnalysis.analyze (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/technical-analysis.ts:21:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:100:44)\n    at TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Error en análisis técnico:","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:32:35.682Z"}
{"error":"Error: Se necesitan al menos 10 velas para predicción\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:35:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en predicción Kalman:","module":"KalmanFilter","timestamp":"2025-10-04T04:32:35.685Z"}
{"error":"TypeError: Cannot read properties of undefined (reading 'close')\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:74:51)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:32:35.687Z"}
{"error":"Error: Se necesitan al menos 50 velas para análisis técnico\n    at TechnicalAnalysis.analyze (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/technical-analysis.ts:21:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:100:44)\n    at TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","level":"error","message":"Error en análisis técnico:","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:33:06.104Z"}
{"error":"Error: Se necesitan al menos 10 velas para predicción\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:35:15)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en predicción Kalman:","module":"KalmanFilter","timestamp":"2025-10-04T04:33:06.105Z"}
{"error":"TypeError: Cannot read properties of undefined (reading 'close')\n    at KalmanFilter.predict (/Users/tgomez/Documents/kalmann/ai-trading-system/src/analysis/kalman-filter.ts:74:51)\n    at TradingStrategy.performCompleteAnalysis (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:103:38)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:70:26)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:33:06.106Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:33:30.274Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759552410274}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:33:30.275Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759552413229}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:33:33.226Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:33:33.221Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:33:33.225Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:33:33.226Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:33:33.226Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552413230}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:33:33.228Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:33:33.228Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:33:33.228Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:33:33.228Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:33:33.229Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:33:33.229Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:33:33.230Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:33:33.226Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:33:33.226Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:33:33.226Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:33:33.227Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:33:33.227Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:33:33.227Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:33:33.248Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:33:33.229Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:33:33.262Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:33:34.421Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:33:34.421Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:33:34.421Z"}
{"level":"info","message":"Datos históricos recopilados: 0 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:33:34.789Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:34.790Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:33:34.790Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:36.791Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:38.792Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:40.793Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:42.795Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:44.796Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:46.812Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552428289}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:33:48.285Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":10,"maxLeverage":5,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":2,"stopLossPercentage":3,"symbol":"BTCUSDT","takeProfitPercentage":6,"timestamp":"2025-10-04T04:33:48.288Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:33:48.288Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:33:48.289Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:33:48.289Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:33:48.316Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:48.813Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:33:49.072Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:33:49.072Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:33:49.072Z"}
{"level":"info","message":"Datos históricos recopilados: 0 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:33:49.440Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:49.440Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:33:49.440Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:50.815Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:51.442Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:52.816Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:53.442Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:54.817Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:55.444Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:56.819Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:57.445Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:58.820Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:33:59.448Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:00.821Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:01.448Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:02.823Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:03.450Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:04.824Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:05.451Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:06.826Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:07.452Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:08.827Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:09.453Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:10.829Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:11.455Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:12.830Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:13.456Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:14.832Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:15.458Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:16.833Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:17.459Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:18.834Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:19.463Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:20.837Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:21.463Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:22.838Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:23.464Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:24.840Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:25.466Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:26.844Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:27.466Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:28.847Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:29.468Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:30.850Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:31.469Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:32.851Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:33.470Z"}
{"error":"Error: Timeout esperando datos para BTCUSDT\n    at TradingStrategy.waitForData (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:454:15)\n    at async TradingStrategy.start (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:50:7)\n    at async TradingSystem.start (/Users/tgomez/Documents/kalmann/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando estrategia:","module":"TradingStrategy","timestamp":"2025-10-04T04:34:34.858Z"}
{"error":"Error: Timeout esperando datos para BTCUSDT\n    at TradingStrategy.waitForData (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:454:15)\n    at async TradingStrategy.start (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:50:7)\n    at async TradingSystem.start (/Users/tgomez/Documents/kalmann/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando sistema:","module":"TradingSystem","timestamp":"2025-10-04T04:34:34.859Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:34:35.472Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759552519114}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:35:19.107Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:35:19.110Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:35:19.111Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:35:19.111Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552519115}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:35:19.113Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:35:19.112Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:35:19.127Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:35:19.114Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:35:19.149Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:35:20.148Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:35:20.148Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:35:20.148Z"}
{"level":"info","message":"Datos históricos recopilados: 0 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:35:20.515Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:20.515Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:35:20.515Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:22.516Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:24.517Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:26.518Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:28.520Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:30.521Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:32.522Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:34.522Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:36.523Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:38.525Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:40.526Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:42.527Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552552116}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:35:52.112Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":10,"maxLeverage":5,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":2,"stopLossPercentage":3,"symbol":"BTCUSDT","takeProfitPercentage":6,"timestamp":"2025-10-04T04:35:52.115Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:35:52.115Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:35:52.115Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:35:52.115Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:35:52.143Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:35:52.945Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:35:52.946Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:35:52.946Z"}
{"level":"info","message":"Datos históricos recopilados: 0 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:35:53.308Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:53.309Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:35:53.309Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:55.310Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:57.311Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:35:59.314Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:01.315Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:03.316Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:05.317Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:07.318Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:09.320Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:11.322Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:36:13.047Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:13.322Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:15.324Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:17.326Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:19.327Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:21.328Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:23.330Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:25.332Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:27.338Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:29.337Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:31.338Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:33.339Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:35.345Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:37.346Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:39.349Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:41.351Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:43.357Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:45.360Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:47.365Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:49.365Z"}
{"level":"info","message":"Recopilando datos para BTCUSDT: 0/50 velas","module":"TradingStrategy","timestamp":"2025-10-04T04:36:51.367Z"}
{"error":"Error: Timeout esperando datos para BTCUSDT\n    at TradingStrategy.waitForData (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/strategy/trading-strategy.js:403:23)\n    at async TradingStrategy.start (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/strategy/trading-strategy.js:46:13)\n    at async testTradingSystem (/Users/tgomez/Documents/kalmann/ai-trading-system/test-trading.js:20:5)","level":"error","message":"Error iniciando estrategia:","module":"TradingStrategy","timestamp":"2025-10-04T04:36:53.367Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:37:13.493Z"}
{"level":"info","message":"Velas obtenidas: 0 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:37:14.670Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:38:43.723Z"}
{"level":"info","message":"Velas obtenidas: 10 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:38:44.925Z"}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:2097:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:3305:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:4483:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/exchange/bybit-client.js:233:26)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/exchange/bybit-client.js:183:30)\n    at async testBybitConnection (/Users/tgomez/Documents/kalmann/ai-trading-system/test-bybit.js:31:21)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:38:45.292Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759552751668}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:39:11.664Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:39:11.660Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:39:11.664Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:39:11.663Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:39:11.666Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:39:11.663Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759552751668}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:39:11.667Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:39:11.667Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:39:11.668Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:39:11.668Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:39:11.668Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:39:11.664Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:39:11.664Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:39:11.665Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:39:11.665Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:39:11.665Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:39:11.665Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:39:11.682Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:39:11.667Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:39:11.668Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:39:11.708Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:39:13.200Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:39:13.201Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:39:13.201Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:39:13.201Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:39:14.649Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:39:14.649Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:39:14.650Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:39:14.650Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:39:14.651Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:39:14.651Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:39:14.649Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:39:14.650Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:39:14.651Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:39:15.720Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:39:26.556Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction for a price increase with high confidence suggests that this could be a good entry point.","symbol":"BTCUSDT","timestamp":1759552766557}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:39:27.009Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:39:27.010Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:39:57.014Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:39:57.016Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:39:57.016Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:39:58.115Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:40:05.865Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango inferior (10-70), indicando un posible bottom en el mercado. Además, el cambio reciente ha sido negativo y el volumen 24h es alto, lo que sugiere una mayor actividad en el mercado. El MACD también está en un signal bullish, confirmando la tendencia actual. La predicción de Kalman también indica una subida en los próximos días con alta confianza","symbol":"BTCUSDT","timestamp":1759552805865}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:40:06.269Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:40:06.269Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:40:36.273Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:40:36.277Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:40:36.277Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:40:37.980Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:40:47.893Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango más bajo (10-70) y el MACD está en una posición baja (-799.8374), lo que indica un posible cambio de tendencia hacia arriba. Además, el Kalman predice un aumento en el precio con una confianza del 90.8%. Considerando el leverage alto (10-50x) y la volatilidad alta del mercado, es apropiado tomar una posición de compra con una confianza del 80%","symbol":"BTCUSDT","timestamp":1759552847894}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:40:48.292Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:40:48.292Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: false","module":"BybitClient","timestamp":"2025-10-04T04:41:10.443Z"}
{"level":"info","message":"Velas obtenidas: 10 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:41:11.741Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:2097:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:3305:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/dist/node/axios.cjs:4483:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/exchange/bybit-client.js:242:24)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/dist/exchange/bybit-client.js:183:30)\n    at async testBybitConnection (/Users/tgomez/Documents/kalmann/ai-trading-system/test-bybit.js:31:21)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:41:12.110Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:41:18.294Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:41:18.295Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:41:18.295Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:41:18.699Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:41:27.956Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango más bajo (10-70) y el MACD está en una posición baja (-799.8374), lo que sugiere una posible oportunidad de compra. Además, el Kalman predice un aumento en el precio con una confianza del 90.8%. Considerando el alto volumen y la leverage disponible (10-50x), es recomendable tomar una posición de compra con una confianza moderada.","symbol":"BTCUSDT","timestamp":1759552887957}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:41:28.341Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:41:28.341Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:41:58.347Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:41:58.351Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:41:58.351Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:41:59.125Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:42:04.577Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango más bajo (10.46) y el MACD está en una posición bearish, lo que sugiere una oportunidad de compra. Además, el Kalman predice un aumento en el precio con una confianza del 90.8%. Considerando el leverage alto (10-50x) y la alta volatilidad y volumen, es recomendable tomar una posición de compra con una confianza moderada.","symbol":"BTCUSDT","timestamp":1759552924577}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:42:04.978Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:42:04.981Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:42:34.987Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:42:34.990Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:42:34.991Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:42:36.111Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:42:42.057Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango más bajo (10.46) y el MACD está en una posición bearish. Además, el Bollinger Band Superior y Medio están en niveles altos, lo que indica una gran actividad en el mercado. La predicción de Kalman también indica una tendencia bajista con alta confianza. Basándome en estas señales claras, decido comprar con un leverage alto (10-50x) y una confianza del 80%","symbol":"BTCUSDT","timestamp":1759552962057}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:42:42.449Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:42:42.450Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:43:12.455Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:43:12.457Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:43:12.457Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:43:12.873Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:43:18.535Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction for a price increase with high confidence suggests that this may be a good time to buy.","symbol":"BTCUSDT","timestamp":1759552998535}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:43:19.695Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:43:19.696Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:43:49.703Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:43:49.705Z"}
{"level":"debug","message":"Predicción Kalman: 131672.32001245813 (Confianza: 0.908)","module":"KalmanFilter","timestamp":"2025-10-04T04:43:49.705Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:43:50.811Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:43:59.337Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":132068.89164036638,"middle":141860.70500000002,"upper":151652.51835963366},"ema":{"ema21":140093.5635509675,"ema50":141363.59852389307,"ema9":138430.7728987927},"macd":{"histogram":-79.98373639348722,"macd":-799.837363934872,"signal":-719.8536275413848},"rsi":10.458377982065315,"volume":{"avg":53114.663669999965,"current":1.255,"ratio":0.000023628126646857496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en un nivel muy bajo (10.46) indicando una oportunidad de compra. Además, el cambio reciente ha sido negativo del 14.62%, lo que sugiere una posible tendencia bearish. Sin embargo, el MACD y el Bollinger Band indican una posibilidad de un giro en la tendencia. La Kalman Prediction también predice una subida con alta confianza. Considerando todos estos factores, es probable que el precio siga subiendo.","symbol":"BTCUSDT","timestamp":1759553039338}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:44:00.434Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:44:00.434Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T04:44:14.654Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:44:15.769Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T04:44:15.770Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:44:15.769Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:44:30.455Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0038, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:44:30.455Z"}
{"level":"debug","message":"Predicción Kalman: 122105.80554855386 (Confianza: 0.912)","module":"KalmanFilter","timestamp":"2025-10-04T04:44:30.456Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:44:31.567Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:44:40.203Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":123768.59888829745,"middle":139622.66000000003,"upper":155476.72111170262},"ema":{"ema21":137138.8478206696,"ema50":139883.7456375376,"ema9":133145.09758375923},"macd":{"histogram":-292.17373204977184,"macd":-2921.7373204977193,"signal":-2629.5635884479475},"rsi":35.52637523552876,"volume":{"avg":53114.67766999996,"current":0.077,"ratio":0.000001449693444030648}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bearish y un Bollinger Superior, indica una posible oportunidad de compra. Además, la predicción Kalman sugiere que el precio podría subir en los próximos días. Considerando el leverage alto (10-50x) y la alta volatilidad del mercado, es recomendable tomar una posición de compra con confianza.","symbol":"BTCUSDT","timestamp":1759553080204}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:44:40.675Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:44:40.676Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:45:10.683Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0038, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:45:10.685Z"}
{"level":"debug","message":"Predicción Kalman: 122105.80554855386 (Confianza: 0.912)","module":"KalmanFilter","timestamp":"2025-10-04T04:45:10.685Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:45:11.075Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:45:19.007Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":123768.59888829745,"middle":139622.66000000003,"upper":155476.72111170262},"ema":{"ema21":137138.8478206696,"ema50":139883.7456375376,"ema9":133145.09758375923},"macd":{"histogram":-292.17373204977184,"macd":-2921.7373204977193,"signal":-2629.5635884479475},"rsi":35.52637523552876,"volume":{"avg":53114.67766999996,"current":0.077,"ratio":0.000001449693444030648}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y los indicadores técnicos en declive sugiere una posible oportunidad de compra. La RSI está por debajo del 30, el MACD está en una posición bearish y el Bollinger Band está en el lado inferior, lo que indica una mayor volatilidad. Además, la predicción de Kalman sugiere un aumento en los precios futuros con una alta confianza.","symbol":"BTCUSDT","timestamp":1759553119008}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:264:22)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:45:19.407Z"}
{"error":"Error: Error obteniendo posiciones\n    at BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:174:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error en loop de trading:","module":"TradingStrategy","timestamp":"2025-10-04T04:45:19.408Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:45:45.720Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553145725}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:45:45.725Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:45:45.726Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759553183561}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:46:23.552Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:46:23.556Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:46:23.557Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:46:23.556Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759553183562}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:46:23.560Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:46:23.561Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:46:23.561Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:46:23.562Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:46:23.562Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:46:23.562Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:46:23.558Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:46:23.584Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:46:23.561Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:46:23.561Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:46:23.612Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:46:24.847Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:46:24.848Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:46:24.848Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:46:24.848Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:46:26.255Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:46:26.255Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:46:26.256Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:46:26.256Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:46:26.256Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:46:26.257Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:46:26.255Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:46:26.255Z"}
{"level":"debug","message":"Predicción Kalman: 114663.50442271336 (Confianza: 0.907)","module":"KalmanFilter","timestamp":"2025-10-04T04:46:26.257Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:46:27.318Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:46:38.813Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":123311.8698325666,"middle":139704.87500000006,"upper":156097.88016743353},"ema":{"ema21":136599.92882470996,"ema50":139743.55193258065,"ema9":131771.47065540485},"macd":{"histogram":-343.3183552775704,"macd":-3433.1835527757066,"signal":-3089.8651974981362},"rsi":10.325782438165362,"volume":{"avg":53114.66486999996,"current":0.04,"ratio":7.530876848776403e-7}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está en un nivel muy bajo (10.33) indicando una oportunidad de compra. Además, el cambio reciente ha sido negativo (-16.02%) lo que s","symbol":"BTCUSDT","timestamp":1759553198819}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T04:46:38.818Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T04:46:38.819Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:46:40.059Z"}
{"level":"info","message":"Asumiendo que no hay posiciones activas para demo trading","module":"BybitClient","timestamp":"2025-10-04T04:46:40.059Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:213:24)\n    at async TradingStrategy.calculatePositionSize (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:313:23)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:159:22)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:46:41.146Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:46:41.147Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T04:46:41.516Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:213:24)\n    at async RiskManager.validateTrade (/Users/tgomez/Documents/kalmann/ai-trading-system/src/risk/risk-manager.ts:63:23)\n    at async TradingStrategy.executeTradingAction (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:231:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:94:11)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:46:41.916Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:46:41.917Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $100.00","module":"TradingStrategy","timestamp":"2025-10-04T04:46:43.393Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:48:58.604Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553338608}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:48:58.608Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:48:58.610Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759553355742}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:49:15.733Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:49:15.737Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:49:15.738Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:49:15.738Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759553355742}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:49:15.741Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:49:15.741Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:49:15.741Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:49:15.741Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:49:15.742Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:49:15.742Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:49:15.742Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:49:15.739Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:49:15.758Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:49:15.742Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:49:15.781Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:49:16.242Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:49:16.242Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:49:16.242Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:49:16.242Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:49:17.653Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:49:17.654Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:49:17.654Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:49:17.655Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:49:17.656Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:49:17.656Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:49:17.654Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:49:17.654Z"}
{"level":"debug","message":"Predicción Kalman: 113934.03349621897 (Confianza: 0.909)","module":"KalmanFilter","timestamp":"2025-10-04T04:49:17.656Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:49:18.728Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:49:24.620Z"}
{"confidence":0.9,"decision":"BUY","indicators":{"bollinger":{"lower":122813.39694096701,"middle":139622.55000000005,"upper":156431.70305903308},"ema":{"ema21":136450.24700652814,"ema50":139678.98330512966,"ema9":131442.17065540483},"macd":{"histogram":-356.45282821204455,"macd":-3564.5282821204455,"signal":-3208.075453908401},"rsi":9.766165027451905,"volume":{"avg":53114.66575999996,"current":0.129,"ratio":0.000002428707743034475}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction for a price increase with high confidence suggests that now is a good time to buy.","symbol":"BTCUSDT","timestamp":1759553364621}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:159:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:49:25.733Z"}
{"level":"info","message":"Asumiendo que no hay posiciones activas para demo trading","module":"BybitClient","timestamp":"2025-10-04T04:49:25.733Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:213:24)\n    at async TradingStrategy.calculatePositionSize (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:313:23)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:159:22)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:49:27.083Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:49:27.084Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T04:49:27.457Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:295:18)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:213:24)\n    at async RiskManager.validateTrade (/Users/tgomez/Documents/kalmann/ai-trading-system/src/risk/risk-manager.ts:63:23)\n    at async TradingStrategy.executeTradingAction (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:231:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:94:11)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:49:27.847Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:49:27.848Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $100.00","module":"TradingStrategy","timestamp":"2025-10-04T04:49:29.291Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:51:19.396Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553479403}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:51:19.404Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:51:19.406Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759553538900}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:52:18.890Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:52:18.894Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:52:18.895Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:52:18.895Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759553538900}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:52:18.898Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:52:18.899Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:52:18.899Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:52:18.900Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:52:18.900Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:52:18.900Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:52:18.900Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:52:18.896Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:52:18.897Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:52:18.918Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:52:18.900Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:52:18.937Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:52:19.860Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:52:19.860Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:52:19.860Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:52:19.860Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:52:20.579Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:52:20.581Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:52:20.581Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:52:20.582Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:52:20.582Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:52:20.582Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:52:20.580Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:52:20.581Z"}
{"level":"debug","message":"Predicción Kalman: 108608.98944129006 (Confianza: 0.910)","module":"KalmanFilter","timestamp":"2025-10-04T04:52:20.582Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:52:21.639Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:52:30.288Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":118577.80335299119,"middle":138304.53500000003,"upper":158031.26664700886},"ema":{"ema21":134561.49676707995,"ema50":138662.73816623428,"ema9":128293.94852349423},"macd":{"histogram":-472.51655609091813,"macd":-4725.165560909183,"signal":-4252.649004818265},"rsi":9.167083773612887,"volume":{"avg":53114.66771999997,"current":0.17,"ratio":0.0000032006224889925775}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango más bajo (9.17) y el MACD está en un signal bearish (-4725.1656). Además, el Bollinger Band Superior es mayor que el precio actual ($115875.7), lo que sugiere una oportunidad de compra. La predicción Kalman también indica una posibilidad del 91.0% de un aumento en el precio.","symbol":"BTCUSDT","timestamp":1759553550289}
{"level":"debug","message":"Autenticación: timestamp=1759553550289, query=category=linear&symbol=BTCUSDT, signature=7b3dfd280d430c8a7b0bb50ad7ac686098e02186a7c62bbb98d17de6423a3173","module":"BybitClient","timestamp":"2025-10-04T04:52:30.290Z"}
{"error":{"endpoint":"/v5/position/list","error":"Request failed with status code 401","method":"GET","params":{"category":"linear","symbol":"BTCUSDT"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:52:30.711Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:160:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:52:30.712Z"}
{"level":"info","message":"Asumiendo que no hay posiciones activas para demo trading","module":"BybitClient","timestamp":"2025-10-04T04:52:30.712Z"}
{"level":"debug","message":"Autenticación: timestamp=1759553550712, query=accountType=UNIFIED, signature=680ec30c73be8789ab28143cade3d98dedf2de16e46b71b48a7ec5da431464ec","module":"BybitClient","timestamp":"2025-10-04T04:52:30.712Z"}
{"error":{"endpoint":"/v5/account/wallet-balance","error":"Request failed with status code 401","method":"GET","params":{"accountType":"UNIFIED"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:52:31.773Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:214:24)\n    at async TradingStrategy.calculatePositionSize (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:313:23)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:159:22)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:52:31.773Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:52:31.773Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T04:52:32.857Z"}
{"level":"debug","message":"Autenticación: timestamp=1759553552857, query=accountType=UNIFIED, signature=978bfd7713a360288e48a6822464889ffb7783f4cd031cef275b6c47a4909649","module":"BybitClient","timestamp":"2025-10-04T04:52:32.857Z"}
{"error":{"endpoint":"/v5/account/wallet-balance","error":"Request failed with status code 401","method":"GET","params":{"accountType":"UNIFIED"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:52:33.269Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:214:24)\n    at async RiskManager.validateTrade (/Users/tgomez/Documents/kalmann/ai-trading-system/src/risk/risk-manager.ts:63:23)\n    at async TradingStrategy.executeTradingAction (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:231:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:94:11)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:52:33.269Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:52:33.270Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $100.00","module":"TradingStrategy","timestamp":"2025-10-04T04:52:34.002Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:53:18.968Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553598971}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:53:18.971Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:53:18.973Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759553622759}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:53:42.756Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:53:42.752Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:53:42.755Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:53:42.756Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:53:42.756Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759553622759}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:53:42.758Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:53:42.756Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:53:42.756Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:53:42.757Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:53:42.757Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:53:42.757Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:53:42.757Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:53:42.775Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:53:42.759Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:53:42.758Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:53:42.807Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:53:43.637Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:53:43.637Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:53:43.637Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:53:43.637Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:53:44.357Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:53:44.358Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:53:44.358Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:53:44.358Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0030, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T04:53:44.359Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:53:44.359Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:53:44.358Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:53:44.358Z"}
{"level":"debug","message":"Predicción Kalman: 108198.66202988774 (Confianza: 0.911)","module":"KalmanFilter","timestamp":"2025-10-04T04:53:44.359Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:53:45.412Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:53:51.890Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":118320.77074584366,"middle":138258.73000000004,"upper":158196.68925415643},"ema":{"ema21":134478.21494889815,"ema50":138626.81267603821,"ema9":128110.72852349422},"macd":{"histogram":-479.8244763188395,"macd":-4798.244763188399,"signal":-4318.420286869559},"rsi":8.914755467686646,"volume":{"avg":53114.66847999997,"current":0.246,"ratio":0.000004631488947212951}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction is for an increase in price with hig","symbol":"BTCUSDT","timestamp":1759553631891}
{"level":"debug","message":"Autenticación: timestamp=1759553631892, query=category=linear&symbol=BTCUSDT, signature=cff77ae8fabae02383ee1d2eac59e054ced37c7b400407e61f935286bfc60f8b","module":"BybitClient","timestamp":"2025-10-04T04:53:51.893Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T04:53:51.891Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T04:53:51.891Z"}
{"error":{"endpoint":"/v5/position/list","error":"Request failed with status code 401","method":"GET","params":{"category":"linear","symbol":"BTCUSDT"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:53:52.313Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getPositions (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:160:24)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:147:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo posiciones:","module":"BybitClient","timestamp":"2025-10-04T04:53:52.313Z"}
{"level":"info","message":"Asumiendo que no hay posiciones activas para demo trading","module":"BybitClient","timestamp":"2025-10-04T04:53:52.313Z"}
{"level":"debug","message":"Autenticación: timestamp=1759553632313, query=accountType=UNIFIED, signature=9255463acbcb88c94763e6e3201ae5814af3d16e0d0e751a2b48d41af800580a","module":"BybitClient","timestamp":"2025-10-04T04:53:52.313Z"}
{"error":{"endpoint":"/v5/account/wallet-balance","error":"Request failed with status code 401","method":"GET","params":{"accountType":"UNIFIED"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:53:52.695Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:214:24)\n    at async TradingStrategy.calculatePositionSize (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:313:23)\n    at async TradingStrategy.generateTradingSignal (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:159:22)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:90:24)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:53:52.695Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:53:52.696Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T04:53:53.114Z"}
{"level":"debug","message":"Autenticación: timestamp=1759553633114, query=accountType=UNIFIED, signature=3ba8c4cdc1c9ead7e903b0c7998c3f75c8d76a6cc785c4a1b9721f03c9af4ebc","module":"BybitClient","timestamp":"2025-10-04T04:53:53.114Z"}
{"error":{"endpoint":"/v5/account/wallet-balance","error":"Request failed with status code 401","method":"GET","params":{"accountType":"UNIFIED"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T04:53:53.493Z"}
{"error":"AxiosError: Request failed with status code 401\n    at settle (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1701:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/tgomez/Documents/kalmann/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:300:20)\n    at async BybitClient.getBalance (/Users/tgomez/Documents/kalmann/ai-trading-system/src/exchange/bybit-client.ts:214:24)\n    at async RiskManager.validateTrade (/Users/tgomez/Documents/kalmann/ai-trading-system/src/risk/risk-manager.ts:63:23)\n    at async TradingStrategy.executeTradingAction (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:231:30)\n    at async TradingStrategy.tradingLoop (/Users/tgomez/Documents/kalmann/ai-trading-system/src/strategy/trading-strategy.ts:94:11)","level":"error","message":"Error obteniendo balance:","module":"BybitClient","timestamp":"2025-10-04T04:53:53.493Z"}
{"level":"info","message":"Usando balance demo para trading","module":"BybitClient","timestamp":"2025-10-04T04:53:53.493Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $5000.00","module":"TradingStrategy","timestamp":"2025-10-04T04:53:54.246Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:56:03.131Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553763135}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:56:03.136Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:56:03.138Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759553765692}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:56:05.684Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:56:05.687Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:56:05.688Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759553765692}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:56:05.688Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T04:56:05.690Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T04:56:05.691Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:56:05.691Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:56:05.691Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T04:56:05.692Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T04:56:05.692Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T04:56:05.692Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T04:56:05.689Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T04:56:05.713Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T04:56:05.692Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T04:56:05.739Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T04:56:06.737Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T04:56:06.738Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T04:56:06.738Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T04:56:06.738Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T04:56:07.452Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:56:07.453Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T04:56:07.454Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T04:56:07.454Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0994","module":"KalmanFilter","timestamp":"2025-10-04T04:56:07.455Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T04:56:07.455Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T04:56:07.453Z"}
{"level":"debug","message":"Predicción Kalman: 122361.64942701158 (Confianza: 0.848)","module":"KalmanFilter","timestamp":"2025-10-04T04:56:07.455Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T04:56:07.453Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T04:56:07.825Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T04:56:16.127Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":121892.95348031101,"middle":122216.93500000003,"upper":122540.91651968904},"ema":{"ema21":122228.84419161665,"ema50":122120.58153590292,"ema9":122364.29199025454},"macd":{"histogram":13.477921088150467,"macd":134.7792108815047,"signal":121.30128979335423},"rsi":87.67225325884189,"volume":{"avg":113.09119000000001,"current":3.671,"ratio":0.0324605303030236}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está en un nivel extremo de overbought (87.67), indicando una posible tendencia a bajar. Además, el MACD está en un nivel bullish y e","symbol":"BTCUSDT","timestamp":1759553776128}
{"level":"debug","message":"Autenticación: timestamp=1759553776128, query=category=linear&symbol=BTCUSDT, signature=687015b95565d235aacbf590a2b3960bda92d8f1906736746a06bf7785126ea1","module":"BybitClient","timestamp":"2025-10-04T04:56:16.128Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T04:56:16.128Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T04:56:16.128Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1754196323203%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122452.02\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-9409.10616415\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697097140965,\"updatedTime\":\"1754196323203\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759553777140}","module":"BybitClient","timestamp":"2025-10-04T04:56:17.263Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T04:58:05.029Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759553885032}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T04:58:05.032Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T04:58:05.033Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759554495749}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:08:15.735Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:08:15.727Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:08:15.734Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:08:15.735Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:08:15.735Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759554495751}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:08:15.745Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:08:15.747Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:08:15.747Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:08:15.748Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:08:15.749Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:08:15.750Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:08:15.751Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:08:15.751Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:08:15.735Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:08:15.735Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:08:15.736Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:08:15.736Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:08:15.742Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:08:15.743Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:08:15.763Z"}
{"level":"warn","message":"Modelo llama2:7b-chat no encontrado en Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:08:15.819Z"}
{"error":"Error: Ollama no está disponible\n    at TradingStrategy.healthCheck (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:423:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.start (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:44:7)\n    at async TradingSystem.start (/Users/x3at/Documents/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando estrategia:","module":"TradingStrategy","timestamp":"2025-10-04T05:08:17.467Z"}
{"error":"Error: Ollama no está disponible\n    at TradingStrategy.healthCheck (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:423:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.start (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:44:7)\n    at async TradingSystem.start (/Users/x3at/Documents/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando sistema:","module":"TradingSystem","timestamp":"2025-10-04T05:08:17.469Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759554606193}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:10:06.190Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:10:06.188Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:10:06.185Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:10:06.189Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:10:06.189Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759554606193}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:10:06.192Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:10:06.193Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:10:06.190Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:10:06.190Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:10:06.190Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:10:06.191Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:10:06.191Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:10:06.191Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:10:06.204Z"}
{"level":"warn","message":"Modelo llama2:7b-chat no encontrado en Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:10:06.213Z"}
{"error":"Error: Ollama no está disponible\n    at TradingStrategy.healthCheck (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:423:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.start (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:44:7)\n    at async TradingSystem.start (/Users/x3at/Documents/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando estrategia:","module":"TradingStrategy","timestamp":"2025-10-04T05:10:07.786Z"}
{"error":"Error: Ollama no está disponible\n    at TradingStrategy.healthCheck (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:423:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.start (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:44:7)\n    at async TradingSystem.start (/Users/x3at/Documents/ai-trading-system/src/index.ts:44:9)","level":"error","message":"Error iniciando sistema:","module":"TradingSystem","timestamp":"2025-10-04T05:10:07.787Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555116935}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:18:36.921Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:18:36.913Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:18:36.919Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:18:36.920Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:18:36.920Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555116935}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:18:36.932Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:18:36.933Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:18:36.933Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:18:36.934Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:18:36.935Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:18:36.921Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:18:36.921Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:18:36.930Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:18:36.930Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:18:36.931Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:18:36.931Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:18:36.953Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:18:36.935Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:18:36.935Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:18:36.935Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:18:37.022Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:18:39.251Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:18:39.251Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:18:39.252Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:18:39.251Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:18:40.170Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:18:40.170Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:18:40.171Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:18:40.172Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1518","module":"KalmanFilter","timestamp":"2025-10-04T05:18:40.173Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:18:40.174Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:18:40.170Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:18:40.171Z"}
{"level":"debug","message":"Predicción Kalman: 122401.60554502679 (Confianza: 0.826)","module":"KalmanFilter","timestamp":"2025-10-04T05:18:40.173Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:18:40.911Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:19:06.647Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122016.22980895793,"middle":122321.66,"upper":122627.09019104208},"ema":{"ema21":122320.84061471644,"ema50":122174.70593466568,"ema9":122462.08087917315},"macd":{"histogram":14.560585489257932,"macd":145.60585489257937,"signal":131.04526940332144},"rsi":78.95333765391905,"volume":{"avg":113.53336999999999,"current":118.461,"ratio":1.0434024815787641}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI es un 78.95, lo que indica un estado OVERBOUGHT y se recomienda vender. Sin embargo, la señal de MACD es bullish con un valor de 145.6059, lo que sugiere una tendencia bullish. Además, el indicador Bollinger está en el rango superior, lo que indica una mayor volatilidad y oportunidad de ganancia. Considerando todos estos factores, es recomendable realizar una compra con un leverage alto (10-50x) para aprovechar la señal.","symbol":"BTCUSDT","timestamp":1759555146654}
{"level":"debug","message":"Autenticación: timestamp=1759555146655, query=category=linear&symbol=BTCUSDT, signature=eaeb16267685f19a7860e22910442bd8c21c9b50732921977096872507f9ba67","module":"BybitClient","timestamp":"2025-10-04T05:19:06.662Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122591\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555148102}","module":"BybitClient","timestamp":"2025-10-04T05:19:07.937Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:21:19.153Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555279172}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:21:19.173Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:21:19.175Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555300017}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:21:40.008Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:21:39.998Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:21:39.986Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:21:40.004Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:21:40.004Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555300019}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat","module":"OllamaClient","timestamp":"2025-10-04T05:21:40.012Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:21:40.014Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:21:40.015Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:21:40.017Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:21:40.013Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:21:40.017Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:21:40.017Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:21:40.018Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:21:40.008Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:21:40.008Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:21:40.009Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:21:40.009Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:21:40.010Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:21:40.010Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:21:40.040Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:21:41.931Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:21:43.825Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:21:43.839Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:21:43.840Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:21:43.839Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:21:44.438Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:21:44.440Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:21:44.445Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:21:44.447Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1537","module":"KalmanFilter","timestamp":"2025-10-04T05:21:44.448Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:21:44.483Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:21:44.440Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:21:44.445Z"}
{"level":"debug","message":"Predicción Kalman: 122452.7616338913 (Confianza: 0.834)","module":"KalmanFilter","timestamp":"2025-10-04T05:21:44.482Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:21:44.879Z"}
{"error":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:507:28)\n    at RedirectableRequest.emit (node:domain:489:12)\n    at Timeout.<anonymous> (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/follow-redirects@1.15.11/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:611:17)\n    at processTimers (node:internal/timers:546:7)\n    at Axios.request (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:572:9)\n    at processTimers (node:internal/timers:546:7)\n    at async OllamaClient.analyze (/Users/x3at/Documents/ai-trading-system/src/ai/ollama-client.ts:39:24)\n    at async TradingStrategy.performCompleteAnalysis (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:130:16)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:87:26)","level":"error","message":"Error en análisis de Ollama:","module":"OllamaClient","timestamp":"2025-10-04T05:22:15.003Z"}
{"confidence":0.1,"decision":"HOLD","indicators":{"bollinger":{"lower":122041.71210749875,"middle":122355.525,"upper":122669.33789250124},"ema":{"ema21":122355.04504584591,"ema50":122194.41210540402,"ema9":122508.13670332884},"macd":{"histogram":15.622944951086538,"macd":156.22944951086538,"signal":140.60650455977884},"rsi":81.78090216754323,"volume":{"avg":113.11158000000002,"current":60.451,"ratio":0.5344368808215745}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"Error en análisis de IA: timeout of 30000ms exceeded","symbol":"BTCUSDT","timestamp":1759555335005}
{"level":"debug","message":"Autenticación: timestamp=1759555335007, query=category=linear&symbol=BTCUSDT, signature=2b9117a70262100844be395b000bd5b0b8aa35f2bcdb77e8b803ec4697ba6f2e","module":"BybitClient","timestamp":"2025-10-04T05:22:15.012Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122667.8\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555336080}","module":"BybitClient","timestamp":"2025-10-04T05:22:15.906Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:22:15.918Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:22:15.908Z"}
{"level":"info","message":"AI sugiere HOLD, no se ejecutará trade","module":"TradingStrategy","timestamp":"2025-10-04T05:22:15.918Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T05:22:15.918Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:23:30.852Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555410866}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:23:30.867Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:23:30.870Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555413954}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:23:33.941Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 30000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:23:33.932Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:23:33.939Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:23:33.940Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:23:33.940Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555413956}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 30000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:23:33.947Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:23:33.952Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:23:33.952Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:23:33.953Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:23:33.954Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:23:33.955Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:23:33.955Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:23:33.955Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:23:33.941Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:23:33.941Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:23:33.941Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:23:33.941Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:23:33.944Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:23:33.944Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:23:33.977Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:23:34.029Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:23:35.454Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:23:35.457Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:23:35.457Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:23:35.457Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:23:36.376Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:23:36.376Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:23:36.377Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:23:36.377Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1746","module":"KalmanFilter","timestamp":"2025-10-04T05:23:36.377Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:23:36.378Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:23:36.376Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:23:36.377Z"}
{"level":"debug","message":"Predicción Kalman: 122434.27031709395 (Confianza: 0.828)","module":"KalmanFilter","timestamp":"2025-10-04T05:23:36.378Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:23:37.120Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:24:06.329Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122042.71074761658,"middle":122355.17,"upper":122667.62925238341},"ema":{"ema21":122354.39959130045,"ema50":122194.13367403147,"ema9":122506.71670332884},"macd":{"histogram":15.566306774449174,"macd":155.66306774449185,"signal":140.09676097004268},"rsi":81.589462779338,"volume":{"avg":114.41098000000002,"current":190.391,"ratio":1.6640972745797646}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en un nivel muy alto (81.59) indicando una posición überbought. Además, el MACD está en un nivel bullish y el volumen es alto. La predicción de Kalman también indica una tendencia bullish con alta confianza. Basándome en estas señales claras, decido comprar con unlevel de confianza del 80%","symbol":"BTCUSDT","timestamp":1759555446337}
{"level":"debug","message":"Autenticación: timestamp=1759555446342, query=category=linear&symbol=BTCUSDT, signature=e1b3e806af1cba425284c4b074f01d7735e9aa069652617e1ecf5751116f330b","module":"BybitClient","timestamp":"2025-10-04T05:24:06.349Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122671.62\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555447433}","module":"BybitClient","timestamp":"2025-10-04T05:24:07.258Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:24:07.259Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:24:07.258Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555447259, query=accountType=UNIFIED, signature=ea82e3151ec7aab90f281a82701a6a4216b8af5e62312d8970f8b89f421c1b55","module":"BybitClient","timestamp":"2025-10-04T05:24:07.260Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:24:07.259Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555447845}","module":"BybitClient","timestamp":"2025-10-04T05:24:07.689Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 40x, Quantity: NaN","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.109Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:24:08.111Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555448111, query=accountType=UNIFIED, signature=92d0a96155563d555e548ce8d6931a03ec34a558b63d33785cad6e83cf33f8d2","module":"BybitClient","timestamp":"2025-10-04T05:24:08.111Z"}
{"level":"info","message":"Generando señal de trading: BUY NaN BTCUSDT @ 122650.4 (SL: 120197.39199999999, TP: 131481.2288)","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.110Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY NaN BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.110Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.110Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":40,\"quantity\":null,\"stopLoss\":120197.39199999999,\"takeProfit\":131481.2288,\"timestamp\":1759555448110,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está en un nivel muy alto (81.59) indicando una posición überbought. Además, el MACD está en un nivel bullish y el volumen es alto. La predicción de Kalman también indica una tendencia bullish con alta confianza. Basándome en estas señales claras, decido comprar con unlevel de confianza del 80%\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.110Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:24:08.110Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555449028}","module":"BybitClient","timestamp":"2025-10-04T05:24:08.853Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555449591, query=category=linear&symbol=BTCUSDT, signature=5277fe182a034bf08acbe16c2d452ea1bdea476d928103667e02070adab7a3e0","module":"BybitClient","timestamp":"2025-10-04T05:24:09.591Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122671.38\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555450176}","module":"BybitClient","timestamp":"2025-10-04T05:24:10.001Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:24:10.001Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-04T05:24:10.735Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:24:11.143Z"}
{"level":"info","message":"Velas obtenidas: 20 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:24:11.144Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Stop loss demasiado lejos: 2.02% (máx: 2%)\",\"riskScore\":0.6}","module":"TradingStrategy","timestamp":"2025-10-04T05:24:11.549Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Stop loss demasiado lejos: 2.02% (máx: 2%)","module":"TradingStrategy","timestamp":"2025-10-04T05:24:11.552Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:25:30.981Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555530996}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:25:30.997Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:25:30.999Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555534490}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:25:34.485Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 30000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:25:34.476Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:25:34.482Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:25:34.484Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:25:34.484Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555534491}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 30000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:25:34.489Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:25:34.490Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:25:34.489Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:25:34.490Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:25:34.490Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:25:34.491Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:25:34.491Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:25:34.491Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:25:34.485Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:25:34.485Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:25:34.486Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:25:34.486Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:25:34.487Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:25:34.487Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:25:34.509Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:25:34.609Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:25:36.006Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:25:36.007Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:25:36.008Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:25:36.007Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:25:36.939Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:25:36.940Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:25:36.941Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:25:36.943Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1652","module":"KalmanFilter","timestamp":"2025-10-04T05:25:36.944Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:25:36.944Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:25:36.940Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:25:36.941Z"}
{"level":"debug","message":"Predicción Kalman: 122484.37763501765 (Confianza: 0.836)","module":"KalmanFilter","timestamp":"2025-10-04T05:25:36.944Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:25:37.351Z"}
{"error":"AxiosError: timeout of 30000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:507:28)\n    at RedirectableRequest.emit (node:domain:489:12)\n    at Timeout.<anonymous> (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/follow-redirects@1.15.11/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:611:17)\n    at processTimers (node:internal/timers:546:7)\n    at Axios.request (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:572:9)\n    at processTimers (node:internal/timers:546:7)\n    at async OllamaClient.analyze (/Users/x3at/Documents/ai-trading-system/src/ai/ollama-client.ts:39:24)\n    at async TradingStrategy.performCompleteAnalysis (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:130:16)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:87:26)","level":"error","message":"Error en análisis de Ollama:","module":"OllamaClient","timestamp":"2025-10-04T05:26:07.437Z"}
{"confidence":0.1,"decision":"HOLD","indicators":{"bollinger":{"lower":122070.3076517587,"middle":122389.585,"upper":122708.86234824131},"ema":{"ema21":122388.7375852949,"ema50":122216.72301502326,"ema9":122551.24536267917},"macd":{"histogram":16.523512006297807,"macd":165.23512006297824,"signal":148.71160805668043},"rsi":82.77008310249124,"volume":{"avg":114.35171,"current":17.116,"ratio":0.14967856624094208}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"Error en análisis de IA: timeout of 30000ms exceeded","symbol":"BTCUSDT","timestamp":1759555567438}
{"level":"debug","message":"Autenticación: timestamp=1759555567440, query=category=linear&symbol=BTCUSDT, signature=626e50f780fef42dc4a7937d3f5ae8d50473457c4b38e8144906856d3563263f","module":"BybitClient","timestamp":"2025-10-04T05:26:07.441Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122744.31\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555568506}","module":"BybitClient","timestamp":"2025-10-04T05:26:08.336Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:26:08.337Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:26:08.337Z"}
{"level":"info","message":"AI sugiere HOLD, no se ejecutará trade","module":"TradingStrategy","timestamp":"2025-10-04T05:26:08.337Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T05:26:08.337Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:27:10.990Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555631009}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:27:11.009Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:27:11.016Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555636199}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:27:16.192Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:27:16.184Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:27:16.190Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:27:16.192Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:27:16.192Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555636199}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:27:16.195Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:27:16.197Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:27:16.197Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:27:16.198Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:27:16.199Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:27:16.199Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:27:16.199Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:27:16.199Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:27:16.193Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:27:16.193Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:27:16.193Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:27:16.193Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:27:16.193Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:27:16.194Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:27:16.219Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:27:16.813Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:27:18.199Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:27:18.200Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:27:18.201Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:27:18.200Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:27:18.859Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:27:18.870Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:27:18.871Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:27:18.873Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1754","module":"KalmanFilter","timestamp":"2025-10-04T05:27:18.874Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:27:18.875Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:27:18.870Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:27:18.870Z"}
{"level":"debug","message":"Predicción Kalman: 122472.92618001532 (Confianza: 0.831)","module":"KalmanFilter","timestamp":"2025-10-04T05:27:18.874Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:27:19.292Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:27:40.905Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122073.05243687468,"middle":122388.64499999999,"upper":122704.2375631253},"ema":{"ema21":122387.02849438581,"ema50":122215.9857601213,"ema9":122547.48536267917},"macd":{"histogram":16.373540496325575,"macd":163.73540496325586,"signal":147.36186446693029},"rsi":82.30944254834847,"volume":{"avg":114.98823,"current":80.768,"ratio":0.7024023241335222}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en un nivel muy alto (82.31) indicando una posibilidad alta de continuar la tendencia bullish. Además, el MACD está en un nivel bullish y el Bollinger Band está en el lado superior, lo que sugiere una mayor actividad en el mercado. La predicción de Kalman también indica una posibilidad alta de subida","symbol":"BTCUSDT","timestamp":1759555660908}
{"level":"debug","message":"Autenticación: timestamp=1759555660918, query=category=linear&symbol=BTCUSDT, signature=6df0c9e6c3450b8f8a238828a52df3d8c48a9a1dec9413c02d0921f69446e234","module":"BybitClient","timestamp":"2025-10-04T05:27:40.923Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122694.57\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555662392}","module":"BybitClient","timestamp":"2025-10-04T05:27:42.222Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:27:42.222Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:27:42.222Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555662223, query=accountType=UNIFIED, signature=aef1b773caf3bc131841cfb351b5a793bc6269e3e83303e843e9b70c778a7a70","module":"BybitClient","timestamp":"2025-10-04T05:27:42.223Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:27:42.222Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555663147}","module":"BybitClient","timestamp":"2025-10-04T05:27:42.981Z"}
{"level":"info","message":"Balance disponible: $40081.39","module":"TradingStrategy","timestamp":"2025-10-04T05:27:42.984Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:27:42.982Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.721Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:27:43.724Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555663724, query=accountType=UNIFIED, signature=2e2586befc7c3e863225fbc446eedf6cc0076121c676c253b559608df57213f3","module":"BybitClient","timestamp":"2025-10-04T05:27:43.724Z"}
{"level":"info","message":"Riesgo: 20%, Max position value: $8016.28","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.722Z"}
{"level":"debug","message":"Position value: $320651.11, Quantity raw: 2.6135640054466927","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.722Z"}
{"level":"info","message":"Cantidad final calculada: 2.613 BTC","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.722Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 40x, Quantity: 2.613","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.722Z"}
{"level":"info","message":"Generando señal de trading: BUY 2.613 BTCUSDT @ 122687.3 (SL: 120356.2413, TP: 131079.11132000003)","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.722Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 2.613 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.723Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.723Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":40,\"quantity\":2.613,\"stopLoss\":120356.2413,\"takeProfit\":131079.11132000003,\"timestamp\":1759555663723,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está en un nivel muy alto (82.31) indicando una posibilidad alta de continuar la tendencia bullish. Además, el MACD está en un nivel bullish y el Bollinger Band está en el lado superior, lo que sugiere una mayor actividad en el mercado. La predicción de Kalman también indica una posibilidad alta de subida\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.723Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:27:43.723Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555664308}","module":"BybitClient","timestamp":"2025-10-04T05:27:44.138Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:27:44.138Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0,\"leverage\":40,\"stopLoss\":120356.2413,\"takeProfit\":131079.11132000003},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:27:45.303Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $108006.86","module":"TradingStrategy","timestamp":"2025-10-04T05:27:45.305Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:29:04.126Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555744137}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:29:04.137Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:29:04.149Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555748497}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:29:08.490Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:29:08.479Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:29:08.487Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:29:08.489Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:29:08.488Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555748498}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:29:08.495Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:29:08.496Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:29:08.496Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:29:08.497Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:29:08.497Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:29:08.498Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:29:08.498Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:29:08.498Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:29:08.490Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:29:08.490Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:29:08.490Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:29:08.490Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:29:08.493Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:29:08.494Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:29:08.519Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:29:09.973Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:29:11.371Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:29:11.374Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:29:11.375Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:29:11.374Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:29:11.789Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:29:11.790Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:29:11.790Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:29:11.791Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1892","module":"KalmanFilter","timestamp":"2025-10-04T05:29:11.792Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:29:11.793Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:29:11.789Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:29:11.790Z"}
{"level":"debug","message":"Predicción Kalman: 122451.43534680047 (Confianza: 0.827)","module":"KalmanFilter","timestamp":"2025-10-04T05:29:11.793Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:29:12.187Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:30:00.646Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122082.23551163063,"middle":122384.89499999999,"upper":122687.55448836935},"ema":{"ema21":122380.21031256764,"ema50":122213.04458365071,"ema9":122532.48536267917},"macd":{"histogram":15.775249898034957,"macd":157.75249898034963,"signal":141.97724908231467},"rsi":75.40851861773262,"volume":{"avg":115.86619,"current":168.564,"ratio":1.4548161115852691}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en un estado overbought y el MACD está mostrando una señal bullish, lo que sugiere que el precio puede seguir subiendo. Además, el Bollinger Band Superior y Medio están en niveles altos, lo que indica una alta volatilidad. Considerando la predicción de Kalman y el leverage alto disponible, es probable que el precio continúe subiendo. Confío en un alza de $122451.44 con una confianza del 82.7%","symbol":"BTCUSDT","timestamp":1759555800672}
{"level":"debug","message":"Autenticación: timestamp=1759555800777, query=category=linear&symbol=BTCUSDT, signature=e3b0e2cdf99b98624aa71a09532bab1879d36f7041ff8149329e574b79e8aaa6","module":"BybitClient","timestamp":"2025-10-04T05:30:00.803Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122626.99\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555801901}","module":"BybitClient","timestamp":"2025-10-04T05:30:01.732Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:30:01.735Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:30:01.734Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555801737, query=accountType=UNIFIED, signature=cabf5259302349bb842ec3bc9fa7dd319ee56fae8a98b617fc96b11929a57176","module":"BybitClient","timestamp":"2025-10-04T05:30:01.737Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:30:01.735Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555802314}","module":"BybitClient","timestamp":"2025-10-04T05:30:02.138Z"}
{"level":"info","message":"Balance disponible: $40081.39","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.139Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:30:02.139Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.530Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:30:02.532Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555802532, query=accountType=UNIFIED, signature=6ff28c559ecd036191f3a8117d531f3e7bcc04ebbc65b130ec46c037b4ac5188","module":"BybitClient","timestamp":"2025-10-04T05:30:02.532Z"}
{"level":"info","message":"Riesgo: 20%, Max position value: $8016.28","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.530Z"}
{"level":"debug","message":"Position value: $320651.11, Quantity raw: 2.615088032744883","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.530Z"}
{"level":"info","message":"Cantidad final calculada: 2.615 BTC","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.530Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 40x, Quantity: 2.615","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.530Z"}
{"level":"info","message":"Generando señal de trading: BUY 2.615 BTCUSDT @ 122615.8 (SL: 120286.0998, TP: 131002.72072000003)","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.531Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 2.615 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.531Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.531Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":40,\"quantity\":2.615,\"stopLoss\":120286.0998,\"takeProfit\":131002.72072000003,\"timestamp\":1759555802531,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está en un estado overbought y el MACD está mostrando una señal bullish, lo que sugiere que el precio puede seguir subiendo. Además, el Bollinger Band Superior y Medio están en niveles altos, lo que indica una alta volatilidad. Considerando la predicción de Kalman y el leverage alto disponible, es probable que el precio continúe subiendo. Confío en un alza de $122451.44 con una confianza del 82.7%\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"high\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.531Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:30:02.531Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:30:02.557Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555802558}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:30:02.558Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:30:02.559Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555810128}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:30:09.888Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:30:09.867Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:30:09.879Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:30:09.882Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:30:10.080Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:30:10.081Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:30:09.881Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:30:10.081Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:30:10.082Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555810129}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:30:10.128Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:30:09.896Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:30:09.897Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:30:10.076Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:30:10.076Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:30:10.077Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:30:10.077Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:30:10.154Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:30:10.128Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:30:10.128Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:30:10.129Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:30:10.484Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:30:11.443Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:30:11.443Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:30:11.446Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:30:11.443Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:30:11.871Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:30:11.872Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:30:11.872Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:30:11.873Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1657","module":"KalmanFilter","timestamp":"2025-10-04T05:30:11.873Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:30:11.872Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:30:11.874Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:30:11.872Z"}
{"level":"debug","message":"Predicción Kalman: 122481.08501768758 (Confianza: 0.830)","module":"KalmanFilter","timestamp":"2025-10-04T05:30:11.873Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:30:12.268Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:30:59.142Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122102.6706209588,"middle":122405.75,"upper":122708.8293790412},"ema":{"ema21":122400.60804312512,"ema50":122225.16044667512,"ema9":122546.8202901071},"macd":{"histogram":15.52190647338574,"macd":155.21906473385752,"signal":139.69715826047178},"rsi":70.31412833109853,"volume":{"avg":115.39195000000001,"current":5.674,"ratio":0.04917154099571071}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por encima del 70, indicando un estado overbought. Además, el MACD está en una posición bullish y el Bollinger Band está superando la línea superior, lo que sugiere una posible tendencia ascendente. La Kalman Prediction también predice una subida con alta confianza.","symbol":"BTCUSDT","timestamp":1759555859149}
{"level":"debug","message":"Autenticación: timestamp=1759555859155, query=category=linear&symbol=BTCUSDT, signature=e7a048d1077cffc38d2a853009deae99f2d58d61daef8b0f9f696c0d5c0a0440","module":"BybitClient","timestamp":"2025-10-04T05:30:59.156Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122619\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555860717}","module":"BybitClient","timestamp":"2025-10-04T05:31:00.548Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:31:00.549Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:31:00.549Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555860549, query=accountType=UNIFIED, signature=256f3a7abe79f8e3e5f929c81a0798fce17c41a11f622a812d8d76e50865894c","module":"BybitClient","timestamp":"2025-10-04T05:31:00.550Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:31:00.549Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555861129}","module":"BybitClient","timestamp":"2025-10-04T05:31:00.952Z"}
{"level":"info","message":"Balance disponible: $40081.39","module":"TradingStrategy","timestamp":"2025-10-04T05:31:00.955Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:31:00.954Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.377Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:31:01.385Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555861386, query=accountType=UNIFIED, signature=d3ba0e4e6c7d82da7128f2ce61bcd996161ce42ff4e09841b5569d1a764dc499","module":"BybitClient","timestamp":"2025-10-04T05:31:01.387Z"}
{"level":"info","message":"Riesgo: 17.5%, Max position value: $7014.24","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.380Z"}
{"level":"debug","message":"Position value: $245498.51, Quantity raw: 2.0024348043773657","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.382Z"}
{"level":"info","message":"Cantidad final calculada: 2.0020000000000002 BTC","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.382Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 35x, Quantity: 2.0020000000000002","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.382Z"}
{"level":"info","message":"Generando señal de trading: BUY 2.0020000000000002 BTCUSDT @ 122600 (SL: 120270.59999999999, TP: 130985.84000000003)","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.382Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 2.0020000000000002 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.383Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.383Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":35,\"quantity\":2.0020000000000002,\"stopLoss\":120270.59999999999,\"takeProfit\":130985.84000000003,\"timestamp\":1759555861383,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por encima del 70, indicando un estado overbought. Además, el MACD está en una posición bullish y el Bollinger Band está superando la línea superior, lo que sugiere una posible tendencia ascendente. La Kalman Prediction también predice una subida con alta confianza.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.384Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:31:01.384Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555861981}","module":"BybitClient","timestamp":"2025-10-04T05:31:01.803Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:31:01.809Z"}
{"level":"info","message":"Validando posición: Cantidad=2.0020000000000002, Precio=122618.9, Valor=245483.04","module":"RiskManager","timestamp":"2025-10-04T05:31:02.204Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.88,\"leverage\":35,\"stopLoss\":120270.59999999999,\"takeProfit\":130985.84000000003},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:31:02.204Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $245483.04, Máximo: $108006.86","module":"RiskManager","timestamp":"2025-10-04T05:31:02.204Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Posición excede límite de riesgo. Máximo: $108006.86","module":"TradingStrategy","timestamp":"2025-10-04T05:31:02.204Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:31:58.852Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759555918863}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:31:58.863Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:31:58.866Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759555923120}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:32:03.109Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:32:03.100Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:32:03.107Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:32:03.108Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759555923121}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:32:03.115Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:32:03.108Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:32:03.117Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:32:03.117Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:32:03.119Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:32:03.119Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:32:03.120Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:32:03.121Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:32:03.121Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:32:03.109Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:32:03.109Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:32:03.109Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:32:03.109Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:32:03.111Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:32:03.112Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:32:03.153Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:32:03.625Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:32:04.768Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:32:04.768Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:32:04.769Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:32:04.768Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:32:05.670Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:32:05.672Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:32:05.673Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:32:05.674Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1720","module":"KalmanFilter","timestamp":"2025-10-04T05:32:05.675Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:32:05.676Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:32:05.672Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:32:05.673Z"}
{"level":"debug","message":"Predicción Kalman: 122474.72312654041 (Confianza: 0.829)","module":"KalmanFilter","timestamp":"2025-10-04T05:32:05.676Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:32:06.072Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:32:39.728Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122103.38742572772,"middle":122405.275,"upper":122707.16257427227},"ema":{"ema21":122399.74440676149,"ema50":122224.78789765551,"ema9":122544.92029010711},"macd":{"histogram":15.446122997603368,"macd":154.4612299760338,"signal":139.01510697843042},"rsi":69.3335290663519,"volume":{"avg":115.78540000000001,"current":45.019,"ratio":0.388814133733614}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por encima del cambio reciente y el aumento en el RSI y el MACD sugiere una tendencia bullish. Además, la predicción de Kalman es positiva con alta confianza, lo que respalda la decisión de compra. Recomiendo un leveraje alto (10-50x) para maximizar los beneficios.","symbol":"BTCUSDT","timestamp":1759555959730}
{"level":"debug","message":"Autenticación: timestamp=1759555959732, query=category=linear&symbol=BTCUSDT, signature=098b88ead465218366e7474e83f429886b7609cd1f1b037ac5097dbccbd302f1","module":"BybitClient","timestamp":"2025-10-04T05:32:39.743Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122605.2\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759555961278}","module":"BybitClient","timestamp":"2025-10-04T05:32:41.099Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.099Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:32:41.099Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555961100, query=accountType=UNIFIED, signature=b3a7c14c24e199a751da17b627c10418090afb18353bc5daa10449a83266819d","module":"BybitClient","timestamp":"2025-10-04T05:32:41.100Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.099Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555961679}","module":"BybitClient","timestamp":"2025-10-04T05:32:41.504Z"}
{"level":"info","message":"Balance disponible: $40081.39, Precio: $122590.5","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.505Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:32:41.505Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.899Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:32:41.901Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555961901, query=accountType=UNIFIED, signature=2ee3bb8642fb080b613e27a918628e7c1d1ae8a0fffe8bfb15976097d7c84bea","module":"BybitClient","timestamp":"2025-10-04T05:32:41.902Z"}
{"level":"info","message":"Riesgo: 15%, Capital a arriesgar: $6012.21","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.899Z"}
{"level":"info","message":"Position value: $180366.25, Quantity raw: 1.471291","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"Cantidad final calculada: 1.471 BTC (valor: $180330.63)","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 30x, Quantity: 1.471","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"Generando señal de trading: BUY 1.471 BTCUSDT @ 122590.5 (SL: 120261.2805, TP: 130975.69020000003)","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 1.471 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":30,\"quantity\":1.471,\"stopLoss\":120261.2805,\"takeProfit\":130975.69020000003,\"timestamp\":1759555961900,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por encima del cambio reciente y el aumento en el RSI y el MACD sugiere una tendencia bullish. Además, la predicción de Kalman es positiva con alta confianza, lo que respalda la decisión de compra. Recomiendo un leveraje alto (10-50x) para maximizar los beneficios.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.900Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:32:41.901Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759555962482}","module":"BybitClient","timestamp":"2025-10-04T05:32:42.306Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:32:42.306Z"}
{"level":"info","message":"Validando posición: Cantidad=1.471, Precio=122605.2, Valor=180352.25","module":"RiskManager","timestamp":"2025-10-04T05:32:42.701Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.88,\"leverage\":30,\"stopLoss\":120261.2805,\"takeProfit\":130975.69020000003},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:32:42.702Z"}
{"level":"debug","message":"Autenticación: timestamp=1759555962703, query=category=linear&symbol=BTCUSDT&buyLeverage=30&sellLeverage=30, signature=453fcfcb4a57224fab362f3083cfea5be1d83d60ae324278f1717b4b4d950ae4","module":"BybitClient","timestamp":"2025-10-04T05:32:42.703Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $180352.25, Máximo: $108006.86","module":"RiskManager","timestamp":"2025-10-04T05:32:42.702Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.88","module":"TradingStrategy","timestamp":"2025-10-04T05:32:42.702Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.88 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:32:42.702Z"}
{"error":{"endpoint":"/v5/position/set-leverage","error":"Request failed with status code 404","method":"GET","params":{"buyLeverage":"30","category":"linear","sellLeverage":"30","symbol":"BTCUSDT"},"response":""},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T05:32:43.138Z"}
{"error":"Error: Error ejecutando trade: Error estableciendo leverage para BTCUSDT\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:147:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-04T05:32:43.140Z"}
{"error":"AxiosError: Request failed with status code 404\n    at settle (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:617:11)\n    at IncomingMessage.emit (node:events:519:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1696:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:330:20)\n    at async BybitClient.setLeverage (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:197:7)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:121:9)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error estableciendo leverage:","module":"BybitClient","timestamp":"2025-10-04T05:32:43.138Z"}
{"error":"Error: Error estableciendo leverage para BTCUSDT\n    at BybitClient.setLeverage (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:207:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:121:9)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-04T05:32:43.139Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:34:10.421Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759556050437}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:34:10.476Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:34:10.479Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759556055945}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:34:15.941Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:34:15.932Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:15.938Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:34:15.940Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:15.939Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759556055945}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:34:15.943Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:34:15.944Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:15.944Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:15.944Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:15.945Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:34:15.945Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:34:15.945Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:34:15.945Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:34:15.941Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:34:15.941Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:34:15.941Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:34:15.941Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:34:15.942Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:34:15.942Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:34:15.963Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:34:16.329Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:34:17.729Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:34:17.729Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:34:17.730Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:34:17.730Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:34:18.144Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:34:18.145Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:34:18.145Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:34:18.146Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1815","module":"KalmanFilter","timestamp":"2025-10-04T05:34:18.146Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:34:18.146Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:34:18.145Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:34:18.145Z"}
{"level":"debug","message":"Predicción Kalman: 122475.25541662557 (Confianza: 0.826)","module":"KalmanFilter","timestamp":"2025-10-04T05:34:18.146Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:34:18.544Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:34:22.845Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759556062861}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:34:22.863Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:34:22.867Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759556069505}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:34:29.497Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:34:29.489Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:29.494Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:34:29.496Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:29.496Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759556069506}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:34:29.501Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:34:29.504Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:29.503Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:29.504Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:34:29.505Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:34:29.506Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:34:29.506Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:34:29.506Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:34:29.497Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:34:29.497Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:34:29.497Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:34:29.498Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:34:29.499Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:34:29.499Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:34:29.526Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:34:29.740Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:34:30.614Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:34:30.614Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:34:30.614Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:34:30.614Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:34:31.021Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:34:31.022Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:34:31.022Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:34:31.023Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1820","module":"KalmanFilter","timestamp":"2025-10-04T05:34:31.024Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:34:31.024Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:34:31.021Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:34:31.022Z"}
{"level":"debug","message":"Predicción Kalman: 122474.90911855476 (Confianza: 0.826)","module":"KalmanFilter","timestamp":"2025-10-04T05:34:31.024Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:34:31.421Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:35:08.036Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122098.57351824678,"middle":122408.005,"upper":122717.43648175323},"ema":{"ema21":122404.70804312512,"ema50":122226.9290741261,"ema9":122555.84029010711},"macd":{"histogram":15.881678553158423,"macd":158.81678553158417,"signal":142.93510697842575},"rsi":73.5625370480126,"volume":{"avg":116.42442000000001,"current":108.921,"ratio":0.935551149836091}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está en el rango superior (73.56) y el MACD está en un signal bullish con un valor de $142.9351, lo que indica una posible tendencia ascendente. Además, el Bollinger Band Superior se encuentra por encima del precio actual, lo que sugiere una mayor volatilidad y un mayor margen de maniobra para realizar una inversión. La predicción de Kalman también indica una posible subida con alta confianza.","symbol":"BTCUSDT","timestamp":1759556108040}
{"level":"debug","message":"Autenticación: timestamp=1759556108042, query=category=linear&symbol=BTCUSDT, signature=355d26ee7d2fc8e58d94cb97d3001e9437f047012ba04792c1a3ca905720f03c","module":"BybitClient","timestamp":"2025-10-04T05:35:08.043Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122629.63\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759556109079}","module":"BybitClient","timestamp":"2025-10-04T05:35:08.899Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:35:08.899Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:35:08.899Z"}
{"level":"debug","message":"Autenticación: timestamp=1759556108900, query=accountType=UNIFIED, signature=fe4eb03144e7d77e6da76fa7d40deb8cc545174cf5c369aa440c1411437844cd","module":"BybitClient","timestamp":"2025-10-04T05:35:08.900Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:35:08.900Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556109476}","module":"BybitClient","timestamp":"2025-10-04T05:35:09.298Z"}
{"level":"info","message":"Balance disponible: $40081.39, Precio: $122645.1","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.298Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:35:09.298Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.692Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:35:09.699Z"}
{"level":"debug","message":"Autenticación: timestamp=1759556109700, query=accountType=UNIFIED, signature=bdf66a7c732ef20f4bcd4b4a40a0e4a1810899daeed8dfb131eb07e20f6063e7","module":"BybitClient","timestamp":"2025-10-04T05:35:09.700Z"}
{"level":"info","message":"Riesgo: 17.5%, Capital a arriesgar: $7014.24","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.692Z"}
{"level":"info","message":"Position value: $245498.51, Quantity raw: 2.001698","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.693Z"}
{"level":"info","message":"Cantidad final calculada: 2.001 BTC (valor: $245412.85)","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.693Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 35x, Quantity: 2.001","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.693Z"}
{"level":"info","message":"Generando señal de trading: BUY 2.001 BTCUSDT @ 122645.1 (SL: 120314.8431, TP: 131034.02484000003)","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.694Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 2.001 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.694Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.695Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":35,\"quantity\":2.001,\"stopLoss\":120314.8431,\"takeProfit\":131034.02484000003,\"timestamp\":1759556109694,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está en el rango superior (73.56) y el MACD está en un signal bullish con un valor de $142.9351, lo que indica una posible tendencia ascendente. Además, el Bollinger Band Superior se encuentra por encima del precio actual, lo que sugiere una mayor volatilidad y un mayor margen de maniobra para realizar una inversión. La predicción de Kalman también indica una posible subida con alta confianza.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"high\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.695Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:35:09.695Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556110279}","module":"BybitClient","timestamp":"2025-10-04T05:35:10.099Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:35:10.100Z"}
{"level":"info","message":"Validando posición: Cantidad=2.001, Precio=122627.9, Valor=245378.43","module":"RiskManager","timestamp":"2025-10-04T05:35:10.501Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.88,\"leverage\":35,\"stopLoss\":120314.8431,\"takeProfit\":131034.02484000003},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:35:10.501Z"}
{"level":"debug","message":"Autenticación: timestamp=1759556110502, query=category=linear&symbol=BTCUSDT&buyLeverage=35&sellLeverage=35, signature=dbef654b6b71d171bc4363292efa5a74e709f6b5aa6474fac6042a247d0c82b0","module":"BybitClient","timestamp":"2025-10-04T05:35:10.502Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $245378.43, Máximo: $108006.86","module":"RiskManager","timestamp":"2025-10-04T05:35:10.501Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.88","module":"TradingStrategy","timestamp":"2025-10-04T05:35:10.502Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.88 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:35:10.502Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10004,\"retMsg\":\"error sign! origin_string[1759556110502jZVZskvC82vQUZhMzV5000{\\\"category\\\":\\\"linear\\\",\\\"symbol\\\":\\\"BTCUSDT\\\",\\\"buyLeverage\\\":\\\"35\\\",\\\"sellLeverage\\\":\\\"35\\\"}]\",\"result\":{},\"retExtInfo\":{},\"time\":1759556111074}","module":"BybitClient","timestamp":"2025-10-04T05:35:10.893Z"}
{"error":{"endpoint":"/v5/position/set-leverage","error":"Error API Bybit: error sign! origin_string[1759556110502jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"35\",\"sellLeverage\":\"35\"}] (Code: 10004)","method":"POST","params":{"buyLeverage":"35","category":"linear","sellLeverage":"35","symbol":"BTCUSDT"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T05:35:10.893Z"}
{"error":"Error: Error API Bybit: error sign! origin_string[1759556110502jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"35\",\"sellLeverage\":\"35\"}] (Code: 10004)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:342:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.setLeverage (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:200:7)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:121:9)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error estableciendo leverage:","module":"BybitClient","timestamp":"2025-10-04T05:35:10.900Z"}
{"level":"warn","message":"Continuando sin cambiar leverage para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:35:10.901Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.88 BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:35:10.901Z"}
{"level":"debug","message":"Autenticación: timestamp=1759556110904, query=category=linear&symbol=BTCUSDT&side=Buy&orderType=Market&qty=0.88&timeInForce=IOC, signature=f01f5b1b284416703c0cdbb48dbbaa885644fb69e42c9c0dbae0c6346765a40f","module":"BybitClient","timestamp":"2025-10-04T05:35:10.904Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10004,\"retMsg\":\"error sign! origin_string[1759556110904jZVZskvC82vQUZhMzV5000{\\\"category\\\":\\\"linear\\\",\\\"symbol\\\":\\\"BTCUSDT\\\",\\\"side\\\":\\\"Buy\\\",\\\"orderType\\\":\\\"Market\\\",\\\"qty\\\":\\\"0.88\\\",\\\"timeInForce\\\":\\\"IOC\\\"}]\",\"result\":{},\"retExtInfo\":{},\"time\":1759556111476}","module":"BybitClient","timestamp":"2025-10-04T05:35:11.298Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: error sign! origin_string[1759556110904jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:150:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-04T05:35:11.300Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: error sign! origin_string[1759556110904jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"0.88","side":"Buy","symbol":"BTCUSDT","timeInForce":"IOC"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T05:35:11.299Z"}
{"error":"Error: Error API Bybit: error sign! origin_string[1759556110904jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:342:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:134:24)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-04T05:35:11.300Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:36:34.043Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759556194052}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:36:34.055Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:36:34.059Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759556198181}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:36:38.174Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:36:38.162Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:36:38.170Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:36:38.173Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:36:38.173Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759556198182}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:36:38.178Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:36:38.180Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:36:38.180Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:36:38.181Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:36:38.181Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:36:38.181Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:36:38.181Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:36:38.181Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:36:38.174Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:36:38.174Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:36:38.174Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:36:38.175Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:36:38.175Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:36:38.176Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:36:38.204Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:36:38.242Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:36:39.603Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:36:39.605Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:36:39.606Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:36:39.606Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:36:40.018Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:36:40.019Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:36:40.019Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:36:40.019Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1259","module":"KalmanFilter","timestamp":"2025-10-04T05:36:40.020Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:36:40.020Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:36:40.019Z"}
{"level":"debug","message":"Predicción Kalman: 122533.12142591599 (Confianza: 0.839)","module":"KalmanFilter","timestamp":"2025-10-04T05:36:40.020Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:36:40.019Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:36:40.414Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:37:12.089Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122124.48080868885,"middle":122430.48500000002,"upper":122736.48919131118},"ema":{"ema21":122425.47647539448,"ema50":122243.61104428298,"ema9":122571.47223209425},"macd":{"histogram":15.656062742960046,"macd":156.56062742960057,"signal":140.90456468664053},"rsi":78.38354854136563,"volume":{"avg":115.71522000000004,"current":33.561,"ratio":0.29003099160162327}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está en un nivel altamente overbought (78.38), indicando una posibilidad alta de una retroceso. Además, el MACD está en un nivel bull","symbol":"BTCUSDT","timestamp":1759556232094}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556232095, payload=category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:37:12.100Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T05:37:12.093Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T05:37:12.093Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122640.3\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759556233147}","module":"BybitClient","timestamp":"2025-10-04T05:37:12.962Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:37:12.963Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:37:12.963Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556232963, payload=accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:37:12.964Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-04T05:37:12.963Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556233543}","module":"BybitClient","timestamp":"2025-10-04T05:37:13.380Z"}
{"level":"info","message":"Balance disponible: $40081.39, Precio: $122640.3","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.383Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:37:13.383Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.784Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:37:13.786Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556233786, payload=accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:37:13.786Z"}
{"level":"info","message":"Riesgo: 15%, Capital a arriesgar: $6012.21","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.784Z"}
{"level":"info","message":"Position value: $180366.25, Quantity raw: 1.470693","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.784Z"}
{"level":"info","message":"Cantidad final calculada: 1.47 BTC (valor: $180281.24)","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.784Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 30x, Quantity: 1.47","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"info","message":"Generando señal de trading: BUY 1.47 BTCUSDT @ 122640.3 (SL: 120310.1343, TP: 128698.73082)","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 1.47 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":30,\"quantity\":1.47,\"stopLoss\":120310.1343,\"takeProfit\":128698.73082,\"timestamp\":1759556233785,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"La RSI está en un nivel altamente overbought (78.38), indicando una posibilidad alta de una retroceso. Además, el MACD está en un nivel bull\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:37:13.785Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556234367}","module":"BybitClient","timestamp":"2025-10-04T05:37:14.184Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:37:14.185Z"}
{"level":"info","message":"Validando posición: Cantidad=1.47, Precio=122640.3, Valor=180281.24","module":"RiskManager","timestamp":"2025-10-04T05:37:14.575Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.88,\"leverage\":30,\"stopLoss\":120310.1343,\"takeProfit\":128698.73082},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:37:14.575Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759556234576, payload={\"buyLeverage\":\"30\",\"category\":\"linear\",\"sellLeverage\":\"30\",\"symbol\":\"BTCUSDT\"}","module":"BybitClient","timestamp":"2025-10-04T05:37:14.576Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $180281.24, Máximo: $108006.86","module":"RiskManager","timestamp":"2025-10-04T05:37:14.575Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.88","module":"TradingStrategy","timestamp":"2025-10-04T05:37:14.576Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.88 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:37:14.576Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10004,\"retMsg\":\"error sign! origin_string[1759556234576jZVZskvC82vQUZhMzV5000{\\\"category\\\":\\\"linear\\\",\\\"symbol\\\":\\\"BTCUSDT\\\",\\\"buyLeverage\\\":\\\"30\\\",\\\"sellLeverage\\\":\\\"30\\\"}]\",\"result\":{},\"retExtInfo\":{},\"time\":1759556235151}","module":"BybitClient","timestamp":"2025-10-04T05:37:14.965Z"}
{"error":{"endpoint":"/v5/position/set-leverage","error":"Error API Bybit: error sign! origin_string[1759556234576jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"30\",\"sellLeverage\":\"30\"}] (Code: 10004)","method":"POST","params":{"buyLeverage":"30","category":"linear","sellLeverage":"30","symbol":"BTCUSDT"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T05:37:14.966Z"}
{"error":"Error: Error API Bybit: error sign! origin_string[1759556234576jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"30\",\"sellLeverage\":\"30\"}] (Code: 10004)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:355:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.setLeverage (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:200:7)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:121:9)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error estableciendo leverage:","module":"BybitClient","timestamp":"2025-10-04T05:37:14.978Z"}
{"level":"warn","message":"Continuando sin cambiar leverage para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:37:14.979Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.88 BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:37:14.980Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759556234980, payload={\"category\":\"linear\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"side\":\"Buy\",\"symbol\":\"BTCUSDT\",\"timeInForce\"","module":"BybitClient","timestamp":"2025-10-04T05:37:14.980Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10004,\"retMsg\":\"error sign! origin_string[1759556234980jZVZskvC82vQUZhMzV5000{\\\"category\\\":\\\"linear\\\",\\\"symbol\\\":\\\"BTCUSDT\\\",\\\"side\\\":\\\"Buy\\\",\\\"orderType\\\":\\\"Market\\\",\\\"qty\\\":\\\"0.88\\\",\\\"timeInForce\\\":\\\"IOC\\\"}]\",\"result\":{},\"retExtInfo\":{},\"time\":1759556235559}","module":"BybitClient","timestamp":"2025-10-04T05:37:15.374Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: error sign! origin_string[1759556234980jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:150:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-04T05:37:15.377Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: error sign! origin_string[1759556234980jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"0.88","side":"Buy","symbol":"BTCUSDT","timeInForce":"IOC"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T05:37:15.374Z"}
{"error":"Error: Error API Bybit: error sign! origin_string[1759556234980jZVZskvC82vQUZhMzV5000{\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.88\",\"timeInForce\":\"IOC\"}] (Code: 10004)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:355:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:134:24)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:287:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:95:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-04T05:37:15.375Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:39:31.332Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759556371354}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:39:31.355Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:39:31.366Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759556375275}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:39:35.270Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:39:35.259Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:39:35.267Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:39:35.269Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:39:35.269Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759556375276}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:39:35.272Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:39:35.273Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:39:35.273Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:39:35.274Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:39:35.275Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:39:35.275Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:39:35.276Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:39:35.276Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:39:35.270Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:39:35.270Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:39:35.270Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:39:35.270Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:39:35.271Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:39:35.271Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:39:35.306Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:39:35.935Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:39:37.346Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:39:37.350Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:39:37.352Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:39:37.352Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:39:37.937Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:39:37.938Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:39:37.938Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:39:37.939Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1361","module":"KalmanFilter","timestamp":"2025-10-04T05:39:37.940Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:39:37.941Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:39:37.938Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:39:37.938Z"}
{"level":"debug","message":"Predicción Kalman: 122517.92540351489 (Confianza: 0.836)","module":"KalmanFilter","timestamp":"2025-10-04T05:39:37.941Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:39:38.348Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:40:09.679Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122126.99446154152,"middle":122428.87500000003,"upper":122730.75553845854},"ema":{"ema21":122422.5492026672,"ema50":122242.34829918495,"ema9":122565.03223209425},"macd":{"histogram":15.399196646093316,"macd":153.99196646093333,"signal":138.59276981484},"rsi":74.8047174146093,"volume":{"avg":116.35011000000004,"current":97.05,"ratio":0.8341203974796411}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por encima del 70, indicando un nivel de overbought. Además, el MACD está en una posición bullish y el Bollinger Band está expandido, lo que sugiere una posible oportunidad de compra. La predicción de Kalman también indica una subida probable con una confianza del 83.6%. Considerando todos estos factores, es recomendable tomar una posición de compra con un nivel de leverage alto (10-50x)","symbol":"BTCUSDT","timestamp":1759556409689}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556409691","module":"BybitClient","timestamp":"2025-10-04T05:40:09.696Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:40:09.696Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759555055484%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122583.4\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-10831.16214444\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264625154,\"updatedTime\":\"1759555055484\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759556410770}","module":"BybitClient","timestamp":"2025-10-04T05:40:10.586Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:40:10.586Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:40:10.586Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556410587","module":"BybitClient","timestamp":"2025-10-04T05:40:10.587Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:40:10.587Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:40:10.586Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556411177}","module":"BybitClient","timestamp":"2025-10-04T05:40:10.999Z"}
{"level":"info","message":"Balance disponible: $40081.39, Precio: $122608.2","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.000Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:40:11.000Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.731Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:40:11.733Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556411734","module":"BybitClient","timestamp":"2025-10-04T05:40:11.734Z"}
{"level":"info","message":"Riesgo: 17.5%, Capital a arriesgar: $7014.24","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.731Z"}
{"level":"info","message":"Position value: $245498.51, Quantity raw: 2.002301","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"Cantidad final calculada: 2.0020000000000002 BTC (valor: $245461.62)","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 35x, Quantity: 2.0020000000000002","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"Generando señal de trading: BUY 2.0020000000000002 BTCUSDT @ 122608.2 (SL: 120278.6442, TP: 130994.60088)","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 2.0020000000000002 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.732Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":35,\"quantity\":2.0020000000000002,\"stopLoss\":120278.6442,\"takeProfit\":130994.60088,\"timestamp\":1759556411732,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por encima del 70, indicando un nivel de overbought. Además, el MACD está en una posición bullish y el Bollinger Band está expandido, lo que sugiere una posible oportunidad de compra. La predicción de Kalman también indica una subida probable con una confianza del 83.6%. Considerando todos estos factores, es recomendable tomar una posición de compra con un nivel de leverage alto (10-50x)\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.733Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:40:11.733Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:40:11.734Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"216013.72776911\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"216013.72776911\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.37375417\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121399.84382741\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4505.497071\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"40081.38890068\",\"totalPositionMM\":\"0\",\"usdValue\":\"40113.01311652\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"40081.38890068\",\"cumRealisedPnl\":\"-10826.21398932\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759556412326}","module":"BybitClient","timestamp":"2025-10-04T05:40:12.143Z"}
{"level":"info","message":"Balance obtenido - Total: $216013.73, Disponible: $40081.39","module":"BybitClient","timestamp":"2025-10-04T05:40:12.144Z"}
{"level":"info","message":"Validando posición: Cantidad=2.0020000000000002, Precio=122583.3, Valor=245411.77","module":"RiskManager","timestamp":"2025-10-04T05:40:12.544Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $108006.86\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.881,\"leverage\":35,\"stopLoss\":120278.6442,\"takeProfit\":130994.60088},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:40:12.544Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759556412544","module":"BybitClient","timestamp":"2025-10-04T05:40:12.545Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $245411.77, Máximo: $108006.86","module":"RiskManager","timestamp":"2025-10-04T05:40:12.544Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.881","module":"TradingStrategy","timestamp":"2025-10-04T05:40:12.544Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.881 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:40:12.544Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"35\",\"sellLeverage\":\"35\"}","module":"BybitClient","timestamp":"2025-10-04T05:40:12.545Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759556413460}","module":"BybitClient","timestamp":"2025-10-04T05:40:13.278Z"}
{"level":"info","message":"Leverage establecido a 35x para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:40:13.279Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.881 BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:40:13.279Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759556413279","module":"BybitClient","timestamp":"2025-10-04T05:40:13.279Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.881\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-04T05:40:13.279Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"a12170c3-da71-4958-83a0-b6849a96a80f\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759556414197}","module":"BybitClient","timestamp":"2025-10-04T05:40:14.013Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":0.881,"side":"BUY","symbol":"BTCUSDT","timestamp":1759556414013}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T05:40:14.014Z"}
{"level":"info","message":"Orden ejecutada exitosamente: a12170c3-da71-4958-83a0-b6849a96a80f","module":"BybitClient","timestamp":"2025-10-04T05:40:14.013Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T05:44:37.999Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:44:39.491Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T05:44:39.493Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:44:39.492Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:45:14.051Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1517","module":"KalmanFilter","timestamp":"2025-10-04T05:45:14.053Z"}
{"level":"debug","message":"Predicción Kalman: 122504.52840230832 (Confianza: 0.829)","module":"KalmanFilter","timestamp":"2025-10-04T05:45:14.054Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:45:14.963Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:46:02.024Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122264.88269926156,"middle":122513.18999999999,"upper":122761.49730073841},"ema":{"ema21":122480.30877447869,"ema50":122299.89439164771,"ema9":122561.52496177988},"macd":{"histogram":11.097946893499469,"macd":110.97946893499466,"signal":99.88152204149519},"rsi":47.70932069510212,"volume":{"avg":120.27900000000004,"current":233.462,"ratio":1.9410038327555095}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior, indica una oportunidad de compra con confianza. Además, la predicción de Kalman sugiere que el precio podría subir en los próximos días. Considerando el leverage alto (10-50x) y el alto volumen, es recomendable tomar una posición de compra con un nivel de riesgo medio.","symbol":"BTCUSDT","timestamp":1759556762037}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759556762041","module":"BybitClient","timestamp":"2025-10-04T05:46:02.054Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:46:02.054Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759556414196%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"35\",\"autoAddMargin\":0,\"avgPrice\":\"122583.3\",\"liqPrice\":\"119693.9\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"107995.8873\",\"isReduceOnly\":false,\"positionIMByMp\":\"3143.29805691\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"119679.4\",\"unrealisedPnl\":\"-154.66836\",\"markPrice\":\"122407.74\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-10890.55988246\",\"positionMM\":\"597.68055913\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3143.29805691\",\"positionMMByMp\":\"596.90721732\",\"seq\":140697264661824,\"updatedTime\":\"1759556414196\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3143.29805691\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-59.39773802\",\"size\":\"0.881\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759556764138}","module":"BybitClient","timestamp":"2025-10-04T05:46:03.987Z"}
{"level":"info","message":"Posiciones existentes: 1","module":"TradingStrategy","timestamp":"2025-10-04T05:46:03.992Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T05:46:03.991Z"}
{"level":"info","message":"Analizando posición existente...","module":"TradingStrategy","timestamp":"2025-10-04T05:46:03.992Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T05:46:03.994Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:48:44.572Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759556924582}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:48:44.582Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:48:44.586Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759556965740}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:49:25.476Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:49:25.693Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:49:25.678Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:49:25.685Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:49:25.683Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759556965748}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:49:25.737Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:49:25.739Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:49:25.739Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:49:25.739Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:49:25.740Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:49:25.740Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:49:25.746Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:49:25.746Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:49:25.693Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:49:25.729Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:49:25.729Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:49:25.729Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:49:25.733Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:49:25.733Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:49:25.776Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:49:27.157Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:49:28.527Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:49:28.528Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:49:28.529Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:49:28.528Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:49:28.933Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:49:28.934Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:49:28.934Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:49:28.934Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1492","module":"KalmanFilter","timestamp":"2025-10-04T05:49:28.935Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:49:28.935Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:49:28.933Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:49:28.934Z"}
{"level":"debug","message":"Predicción Kalman: 122437.65250527898 (Confianza: 0.833)","module":"KalmanFilter","timestamp":"2025-10-04T05:49:28.935Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:49:29.324Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:50:07.784Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122173.63023860351,"middle":122444.21500000001,"upper":122714.79976139651},"ema":{"ema21":122415.48688933483,"ema50":122251.23831253742,"ema9":122499.16302852108},"macd":{"histogram":11.144198900500484,"macd":111.44198900500487,"signal":100.29779010450439},"rsi":50.01845245417568,"volume":{"avg":120.25221000000003,"current":185.191,"ratio":1.5400215929503496}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior, indica una oportunidad buena para comprar. Además, la predicción de Kalman sugiere que el precio tendrá una tendencia ascendente en los próximos días. Considerando el leverage alto (10-50x) y el alto volumen, es recomendable tomar esta decisión AGRESIVA.","symbol":"BTCUSDT","timestamp":1759557007786}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557007797","module":"BybitClient","timestamp":"2025-10-04T05:50:07.806Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:50:07.806Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759556414196%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"35\",\"autoAddMargin\":0,\"avgPrice\":\"122583.3\",\"liqPrice\":\"119693.9\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"107995.8873\",\"isReduceOnly\":false,\"positionIMByMp\":\"3143.29805691\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"119679.4\",\"unrealisedPnl\":\"-186.88653\",\"markPrice\":\"122371.17\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-10890.55988246\",\"positionMM\":\"597.68055913\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3143.29805691\",\"positionMMByMp\":\"596.74612647\",\"seq\":140697264661824,\"updatedTime\":\"1759556414196\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3143.29805691\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-59.39773802\",\"size\":\"0.881\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557008833}","module":"BybitClient","timestamp":"2025-10-04T05:50:08.668Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.881 BTCUSDT | PnL: -0.17%","module":"TradingStrategy","timestamp":"2025-10-04T05:50:08.670Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T05:50:08.669Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557008671","module":"BybitClient","timestamp":"2025-10-04T05:50:08.671Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:50:08.671Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759556414196%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"35\",\"autoAddMargin\":0,\"avgPrice\":\"122583.3\",\"liqPrice\":\"119693.9\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"107995.8873\",\"isReduceOnly\":false,\"positionIMByMp\":\"3143.29805691\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"119679.4\",\"unrealisedPnl\":\"-186.88653\",\"markPrice\":\"122371.17\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-10890.55988246\",\"positionMM\":\"597.68055913\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3143.29805691\",\"positionMMByMp\":\"596.74612647\",\"seq\":140697264661824,\"updatedTime\":\"1759556414196\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3143.29805691\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-59.39773802\",\"size\":\"0.881\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557009229}","module":"BybitClient","timestamp":"2025-10-04T05:50:09.078Z"}
{"level":"info","message":"Posiciones existentes: 1","module":"TradingStrategy","timestamp":"2025-10-04T05:50:09.079Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T05:50:09.079Z"}
{"level":"info","message":"Analizando posición existente...","module":"TradingStrategy","timestamp":"2025-10-04T05:50:09.079Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T05:50:09.079Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:50:36.304Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759557036311}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:50:36.312Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:50:36.316Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759557040232}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T05:50:40.222Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:50:40.212Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:50:40.220Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:50:40.222Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:50:40.221Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759557040233}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T05:50:40.227Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T05:50:40.232Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:50:40.231Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:50:40.232Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T05:50:40.232Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T05:50:40.233Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T05:50:40.233Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T05:50:40.233Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T05:50:40.223Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T05:50:40.223Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T05:50:40.223Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T05:50:40.223Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T05:50:40.224Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T05:50:40.224Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T05:50:40.276Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T05:50:40.618Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T05:50:41.498Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T05:50:41.499Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T05:50:41.500Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T05:50:41.500Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:50:41.939Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:50:41.951Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:50:41.952Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:50:41.953Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1208","module":"KalmanFilter","timestamp":"2025-10-04T05:50:41.954Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T05:50:41.954Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:50:41.951Z"}
{"level":"debug","message":"Predicción Kalman: 122418.62850292886 (Confianza: 0.842)","module":"KalmanFilter","timestamp":"2025-10-04T05:50:41.954Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T05:50:41.952Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:50:42.360Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:51:15.100Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122201.27779245785,"middle":122453.20500000003,"upper":122705.1322075422},"ema":{"ema21":122414.36219853643,"ema50":122256.7132429003,"ema9":122479.9424228115},"macd":{"histogram":9.653102491670865,"macd":96.5310249167087,"signal":86.87792242503784},"rsi":48.15950920245389,"volume":{"avg":117.68260000000002,"current":12.243,"ratio":0.10403407130705812}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del Bollinger Superior, un MACD bullish y un RSI por debajo de 30 señala una posible oportunidad de compra. Además, la predicción de Kalman indica que el precio podría subir en los próximos días con alta confianza. Considerando el leverage alto (10-50x) y el nivel de riesgo bajo, es recomendable realizar una operación de compra.","symbol":"BTCUSDT","timestamp":1759557075112}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557075113","module":"BybitClient","timestamp":"2025-10-04T05:51:15.117Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:51:15.117Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759557033533%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"35\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122446.5\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-11130.19913309\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264678644,\"updatedTime\":\"1759557033533\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557076670}","module":"BybitClient","timestamp":"2025-10-04T05:51:16.516Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:51:16.517Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557076517","module":"BybitClient","timestamp":"2025-10-04T05:51:16.517Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:51:16.517Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759557033533%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"35\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122446.55\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-11130.19913309\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697264678644,\"updatedTime\":\"1759557033533\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557077412}","module":"BybitClient","timestamp":"2025-10-04T05:51:17.259Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T05:51:17.259Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T05:51:17.259Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557077260","module":"BybitClient","timestamp":"2025-10-04T05:51:17.260Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:51:17.260Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T05:51:17.259Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"215498.25805558\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"215498.25805558\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49997.27375507\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121181.2923337\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4503.564838\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"39782.35191203\",\"totalPositionMM\":\"0\",\"usdValue\":\"39816.1271288\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"39782.35191203\",\"cumRealisedPnl\":\"-11125.25097797\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759557077828}","module":"BybitClient","timestamp":"2025-10-04T05:51:17.679Z"}
{"level":"info","message":"Balance disponible: $39782.35, Precio: $122406.9","module":"TradingStrategy","timestamp":"2025-10-04T05:51:17.681Z"}
{"level":"info","message":"Balance obtenido - Total: $215498.26, Disponible: $39782.35","module":"BybitClient","timestamp":"2025-10-04T05:51:17.680Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.094Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T05:51:18.096Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557078096","module":"BybitClient","timestamp":"2025-10-04T05:51:18.096Z"}
{"level":"info","message":"Riesgo: 15%, Capital a arriesgar: $5967.35","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.094Z"}
{"level":"info","message":"Position value: $179020.58, Quantity raw: 1.462504","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.094Z"}
{"level":"info","message":"Cantidad final calculada: 1.462 BTC (valor: $178958.89)","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.094Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 30x, Quantity: 1.462","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.094Z"}
{"level":"info","message":"Generando señal de trading: BUY 1.462 BTCUSDT @ 122406.9 (SL: 120081.16889999999, TP: 130779.53196000001)","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.095Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 1.462 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.095Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.095Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":30,\"quantity\":1.462,\"stopLoss\":120081.16889999999,\"takeProfit\":130779.53196000001,\"timestamp\":1759557078095,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del Bollinger Superior, un MACD bullish y un RSI por debajo de 30 señala una posible oportunidad de compra. Además, la predicción de Kalman indica que el precio podría subir en los próximos días con alta confianza. Considerando el leverage alto (10-50x) y el nivel de riesgo bajo, es recomendable realizar una operación de compra.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"low\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.095Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T05:51:18.095Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T05:51:18.097Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"215498.25805558\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"215498.25805558\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49997.27375507\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121181.2923337\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4503.564838\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"39782.35191203\",\"totalPositionMM\":\"0\",\"usdValue\":\"39816.1271288\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"39782.35191203\",\"cumRealisedPnl\":\"-11125.25097797\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759557078993}","module":"BybitClient","timestamp":"2025-10-04T05:51:18.845Z"}
{"level":"info","message":"Balance obtenido - Total: $215498.26, Disponible: $39782.35","module":"BybitClient","timestamp":"2025-10-04T05:51:18.846Z"}
{"level":"info","message":"Validando posición: Cantidad=1.462, Precio=122446.5, Valor=179016.78","module":"RiskManager","timestamp":"2025-10-04T05:51:19.260Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $107749.13\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.879,\"leverage\":30,\"stopLoss\":120081.16889999999,\"takeProfit\":130779.53196000001},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T05:51:19.261Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759557079262","module":"BybitClient","timestamp":"2025-10-04T05:51:19.262Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $179016.78, Máximo: $107749.13","module":"RiskManager","timestamp":"2025-10-04T05:51:19.260Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.879","module":"TradingStrategy","timestamp":"2025-10-04T05:51:19.261Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.879 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T05:51:19.261Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"30\",\"sellLeverage\":\"30\"}","module":"BybitClient","timestamp":"2025-10-04T05:51:19.262Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759557079829}","module":"BybitClient","timestamp":"2025-10-04T05:51:19.675Z"}
{"level":"info","message":"Leverage establecido a 30x para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:51:19.675Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.879 BTCUSDT | SL: 120081.16889999999 | TP: 130779.53196000001","module":"BybitClient","timestamp":"2025-10-04T05:51:19.675Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759557079675","module":"BybitClient","timestamp":"2025-10-04T05:51:19.675Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.879\",\"timeInForce\":\"IOC\",\"stopLoss\":\"120081.16889999999\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"130779.53196000001\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-04T05:51:19.675Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"348b0083-95d2-4238-a419-45138ab6c767\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759557080244}","module":"BybitClient","timestamp":"2025-10-04T05:51:20.094Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":0.879,"side":"BUY","symbol":"BTCUSDT","timestamp":1759557080095}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T05:51:20.096Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 348b0083-95d2-4238-a419-45138ab6c767","module":"BybitClient","timestamp":"2025-10-04T05:51:20.094Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T05:55:41.969Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T05:55:43.367Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T05:55:43.368Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:55:43.368Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T05:56:20.101Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1376","module":"KalmanFilter","timestamp":"2025-10-04T05:56:20.103Z"}
{"level":"debug","message":"Predicción Kalman: 122445.36855056985 (Confianza: 0.839)","module":"KalmanFilter","timestamp":"2025-10-04T05:56:20.104Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T05:56:20.971Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T05:56:59.565Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122302.64725940136,"middle":122498.5,"upper":122694.35274059864},"ema":{"ema21":122441.36200937846,"ema50":122302.04103638187,"ema9":122485.09201314586},"macd":{"histogram":6.910881504666754,"macd":69.10881504666759,"signal":62.19793354200083},"rsi":51.56404051268239,"volume":{"avg":117.53172000000002,"current":80.575,"ratio":0.6855596089294022}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por encima del cambio reciente, un RSI por debajo de 30 y un MACD con una señal bullish sugiere una tendencia bullish. Además, el Bollinger Band Superior se encuentra por encima del precio actual, lo que indica una alta volatilidad. Considerando el leverage alto (10-50x) y la confianza en la señal (83.9%), la mejor estrategia es comprar con una posición agresiva.","symbol":"BTCUSDT","timestamp":1759557419573}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557419578","module":"BybitClient","timestamp":"2025-10-04T05:56:59.585Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:56:59.586Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759557080244%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122446.5\",\"liqPrice\":\"118977.2\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130779.5\",\"positionValue\":\"107630.4735\",\"isReduceOnly\":false,\"positionIMByMp\":\"3644.90706139\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118959.8\",\"unrealisedPnl\":\"50.5425\",\"markPrice\":\"122504\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-11189.39589352\",\"positionMM\":\"595.37626135\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3644.90706139\",\"positionMMByMp\":\"595.62897384\",\"seq\":140697264679900,\"updatedTime\":\"1759557080244\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3644.90706139\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-59.19676043\",\"size\":\"0.879\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"120081.1\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557421183}","module":"BybitClient","timestamp":"2025-10-04T05:57:01.006Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.879 BTCUSDT | PnL: 0.05%","module":"TradingStrategy","timestamp":"2025-10-04T05:57:01.010Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T05:57:01.010Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759557421013","module":"BybitClient","timestamp":"2025-10-04T05:57:01.013Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T05:57:01.013Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759557080244%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122446.5\",\"liqPrice\":\"118977.2\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130779.5\",\"positionValue\":\"107630.4735\",\"isReduceOnly\":false,\"positionIMByMp\":\"3644.90706139\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118959.8\",\"unrealisedPnl\":\"50.5425\",\"markPrice\":\"122504\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-11189.39589352\",\"positionMM\":\"595.37626135\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3644.90706139\",\"positionMMByMp\":\"595.62897384\",\"seq\":140697264679900,\"updatedTime\":\"1759557080244\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3644.90706139\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-59.19676043\",\"size\":\"0.879\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"120081.1\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759557421930}","module":"BybitClient","timestamp":"2025-10-04T05:57:01.758Z"}
{"level":"info","message":"Posiciones existentes: 1","module":"TradingStrategy","timestamp":"2025-10-04T05:57:01.760Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T05:57:01.759Z"}
{"level":"info","message":"Analizando posición existente...","module":"TradingStrategy","timestamp":"2025-10-04T05:57:01.760Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T05:57:01.761Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T05:57:20.049Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759557440053}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T05:57:20.053Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T05:57:20.057Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759617070263}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:31:10.249Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T22:31:10.258Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:31:10.255Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:31:10.257Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:31:10.257Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759617070263}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:31:10.261Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:31:10.262Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:31:10.261Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:31:10.262Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:31:10.263Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T22:31:10.263Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T22:31:10.263Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T22:31:10.263Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T22:31:10.258Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T22:31:10.258Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T22:31:10.259Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T22:31:10.259Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T22:31:10.259Z"}
{"level":"info","message":"6 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T22:31:10.259Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T22:31:10.280Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T22:31:10.393Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T22:31:11.860Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T22:31:11.860Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T22:31:11.861Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T22:31:11.861Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:31:12.782Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:31:12.783Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:31:12.784Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:31:12.785Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:31:12.785Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T22:31:12.786Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:31:12.783Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:31:12.783Z"}
{"level":"debug","message":"Predicción Kalman: 122180.35105158508 (Confianza: 0.865)","module":"KalmanFilter","timestamp":"2025-10-04T22:31:12.786Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:31:13.200Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:32:27.636Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":121908.96914778356,"middle":122137.55,"upper":122366.13085221645},"ema":{"ema21":122118.64257124247,"ema50":122011.2652047352,"ema9":122168.81174491852},"macd":{"histogram":6.48493340910936,"macd":64.84933409109362,"signal":58.364400681984264},"rsi":51.71232876712328,"volume":{"avg":120.96206999999998,"current":6.413,"ratio":0.05301661917657329}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30 sugiere una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band se encuentra en el rango superior, lo que indica una mayor volatilidad y un mayor margen de maniobra para la toma de decisiones. Considerando el leverage alto (10-50x) y la confianza moderada (86.5%), la decisión es comprar con una dosis moderada de riesgo (medium).","symbol":"BTCUSDT","timestamp":1759617147658}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617147669","module":"BybitClient","timestamp":"2025-10-04T22:32:27.681Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:32:27.684Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759597094167%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122207\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-11973.12594001\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697265821136,\"updatedTime\":\"1759597094167\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617149949}","module":"BybitClient","timestamp":"2025-10-04T22:32:29.671Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:32:29.672Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617149676","module":"BybitClient","timestamp":"2025-10-04T22:32:29.677Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:32:29.677Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759597094167%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122207.07\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-11973.12594001\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697265821136,\"updatedTime\":\"1759597094167\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617150703}","module":"BybitClient","timestamp":"2025-10-04T22:32:30.419Z"}
{"level":"info","message":"Posiciones existentes: 0","module":"TradingStrategy","timestamp":"2025-10-04T22:32:30.429Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:32:30.419Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617150465","module":"BybitClient","timestamp":"2025-10-04T22:32:30.466Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:32:30.480Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T22:32:30.430Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214099.78543212\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214099.78543212\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.87375393\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120672.93946312\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4469.650728\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38939.42510511\",\"totalPositionMM\":\"0\",\"usdValue\":\"38962.32148707\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38939.42510511\",\"cumRealisedPnl\":\"-11968.17778489\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759617151206}","module":"BybitClient","timestamp":"2025-10-04T22:32:30.928Z"}
{"level":"info","message":"Balance disponible: $38939.43, Precio: $122210","module":"TradingStrategy","timestamp":"2025-10-04T22:32:30.929Z"}
{"level":"info","message":"Balance obtenido - Total: $214099.79, Disponible: $38939.43","module":"BybitClient","timestamp":"2025-10-04T22:32:30.929Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.441Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T22:32:31.496Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617151496","module":"BybitClient","timestamp":"2025-10-04T22:32:31.497Z"}
{"level":"info","message":"Riesgo: 15%, Capital a arriesgar: $5840.91","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.443Z"}
{"level":"info","message":"Position value: $175227.41, Quantity raw: 1.433822","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.443Z"}
{"level":"info","message":"Cantidad final calculada: 1.433 BTC (valor: $175126.93)","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.494Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 30x, Quantity: 1.433","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.494Z"}
{"level":"info","message":"Generando señal de trading: BUY 1.433 BTCUSDT @ 122210 (SL: 119888.01, TP: 130569.16400000002)","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.495Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 1.433 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.495Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.495Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":30,\"quantity\":1.433,\"stopLoss\":119888.01,\"takeProfit\":130569.16400000002,\"timestamp\":1759617151495,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30 sugiere una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band se encuentra en el rango superior, lo que indica una mayor volatilidad y un mayor margen de maniobra para la toma de decisiones. Considerando el leverage alto (10-50x) y la confianza moderada (86.5%), la decisión es comprar con una dosis moderada de riesgo (medium).\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.495Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T22:32:31.495Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:32:31.497Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214099.78543212\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214099.78543212\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.87375393\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120672.93946312\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4469.650728\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38939.42510511\",\"totalPositionMM\":\"0\",\"usdValue\":\"38962.32148707\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38939.42510511\",\"cumRealisedPnl\":\"-11968.17778489\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759617152519}","module":"BybitClient","timestamp":"2025-10-04T22:32:32.250Z"}
{"level":"info","message":"Balance obtenido - Total: $214099.79, Disponible: $38939.43","module":"BybitClient","timestamp":"2025-10-04T22:32:32.252Z"}
{"level":"info","message":"Validando posición: Cantidad=1.433, Precio=122201.4, Valor=175114.61","module":"RiskManager","timestamp":"2025-10-04T22:32:32.665Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Posición excede límite de riesgo. Máximo: $107049.89\",\"adjustedParams\":{\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"quantity\":0.876,\"leverage\":30,\"stopLoss\":119888.01,\"takeProfit\":130569.16400000002},\"riskScore\":0.8}","module":"TradingStrategy","timestamp":"2025-10-04T22:32:32.667Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759617152668","module":"BybitClient","timestamp":"2025-10-04T22:32:32.669Z"}
{"level":"warn","message":"Posición excede límite. Solicitado: $175114.61, Máximo: $107049.89","module":"RiskManager","timestamp":"2025-10-04T22:32:32.666Z"}
{"level":"info","message":"Trade ajustado por Risk Manager. Cantidad ajustada: 0.876","module":"TradingStrategy","timestamp":"2025-10-04T22:32:32.667Z"}
{"level":"info","message":"Ejecutando trade con parámetros ajustados: 0.876 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:32:32.667Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"30\",\"sellLeverage\":\"30\"}","module":"BybitClient","timestamp":"2025-10-04T22:32:32.669Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759617153368}","module":"BybitClient","timestamp":"2025-10-04T22:32:33.083Z"}
{"error":{"endpoint":"/v5/position/set-leverage","error":"Error API Bybit: leverage not modified (Code: 110043)","method":"POST","params":{"buyLeverage":"30","category":"linear","sellLeverage":"30","symbol":"BTCUSDT"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T22:32:33.084Z"}
{"error":"Error: Error API Bybit: leverage not modified (Code: 110043)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:406:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.setLeverage (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:221:7)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:121:9)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:290:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error estableciendo leverage:","module":"BybitClient","timestamp":"2025-10-04T22:32:33.114Z"}
{"level":"warn","message":"Continuando sin cambiar leverage para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:32:33.114Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.876 BTCUSDT | SL: 119888.01 | TP: 130569.16400000002","module":"BybitClient","timestamp":"2025-10-04T22:32:33.115Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759617153115","module":"BybitClient","timestamp":"2025-10-04T22:32:33.115Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.876\",\"timeInForce\":\"IOC\",\"stopLoss\":\"119888.01\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"130569.16400000002\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-04T22:32:33.115Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"d6a0006c-00e8-4397-aaa3-fc702a0a6a74\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759617154136}","module":"BybitClient","timestamp":"2025-10-04T22:32:33.851Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":0.876,"side":"BUY","symbol":"BTCUSDT","timestamp":1759617153852}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T22:32:33.854Z"}
{"level":"info","message":"Orden ejecutada exitosamente: d6a0006c-00e8-4397-aaa3-fc702a0a6a74","module":"BybitClient","timestamp":"2025-10-04T22:32:33.851Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T22:36:12.797Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:36:14.259Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T22:36:14.259Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:36:14.259Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:37:33.863Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:37:33.874Z"}
{"level":"debug","message":"Predicción Kalman: 122234.92964064101 (Confianza: 0.877)","module":"KalmanFilter","timestamp":"2025-10-04T22:37:33.875Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:37:35.258Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:38:18.849Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122074.93407845673,"middle":122192.07499999998,"upper":122309.21592154323},"ema":{"ema21":122155.67242219631,"ema50":122045.46661175389,"ema9":122206.15396055636},"macd":{"histogram":6.131557451885598,"macd":61.31557451885601,"signal":55.18401706697041},"rsi":58.93014253035341,"volume":{"avg":118.53442,"current":13.564,"ratio":0.11443089694959489}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de MACD es bullish y el RSI está por debajo del 30, lo que indica una posible oportunidad de compra. Además, la predicción de Kalman muestra un precio predicho cercano al actual, con alta confianza. Recomiendo utilizar leverage alto (10-50x) para aprovechar esta oportunidad.","symbol":"BTCUSDT","timestamp":1759617498854}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617498858","module":"BybitClient","timestamp":"2025-10-04T22:38:18.866Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:38:18.867Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"33.726\",\"markPrice\":\"122239.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.32519886\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617500010}","module":"BybitClient","timestamp":"2025-10-04T22:38:19.714Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.876 BTCUSDT | PnL: 0.03%","module":"TradingStrategy","timestamp":"2025-10-04T22:38:19.719Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:38:19.719Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617499722","module":"BybitClient","timestamp":"2025-10-04T22:38:19.723Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:38:19.723Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"33.726\",\"markPrice\":\"122239.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.32519886\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617500412}","module":"BybitClient","timestamp":"2025-10-04T22:38:20.115Z"}
{"level":"info","message":"Posiciones existentes: 1","module":"TradingStrategy","timestamp":"2025-10-04T22:38:20.116Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:38:20.116Z"}
{"level":"info","message":"Analizando posición existente...","module":"TradingStrategy","timestamp":"2025-10-04T22:38:20.116Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T22:38:20.116Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T22:41:12.781Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:41:14.180Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T22:41:14.180Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:41:14.180Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:43:20.130Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:43:20.141Z"}
{"level":"debug","message":"Predicción Kalman: 122245.4268440204 (Confianza: 0.888)","module":"KalmanFilter","timestamp":"2025-10-04T22:43:20.141Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:43:21.540Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:44:54.192Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122074.8786247171,"middle":122186.42,"upper":122297.9613752829},"ema":{"ema21":122183.8801372427,"ema50":122075.29369068886,"ema9":122224.05729777472},"macd":{"histogram":5.176196390042605,"macd":51.76196390042605,"signal":46.58576751038345},"rsi":53.91053787047175,"volume":{"avg":107.62139,"current":4.883,"ratio":0.04537202130543008}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior, indica una posible oportunidad de compra. Además, la predicción de Kalman sugiere que el precio podría subir en los próximos días. Considerando el leverage alto (10-50x) y el nivel de confianza alto (88.8%), es recomendable tomar una posición de compra con una confianza del 88.8%","symbol":"BTCUSDT","timestamp":1759617894200}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617894208","module":"BybitClient","timestamp":"2025-10-04T22:44:54.231Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:44:54.398Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"33.726\",\"markPrice\":\"122239.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.32519886\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617896135}","module":"BybitClient","timestamp":"2025-10-04T22:44:55.842Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.876 BTCUSDT | PnL: 0.03%","module":"TradingStrategy","timestamp":"2025-10-04T22:44:55.844Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:44:55.843Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759617895845","module":"BybitClient","timestamp":"2025-10-04T22:44:55.845Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:44:55.846Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"33.726\",\"markPrice\":\"122239.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.32519886\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759617896884}","module":"BybitClient","timestamp":"2025-10-04T22:44:56.587Z"}
{"level":"info","message":"Posiciones existentes: 1","module":"TradingStrategy","timestamp":"2025-10-04T22:44:56.589Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:44:56.589Z"}
{"level":"info","message":"Analizando posición existente...","module":"TradingStrategy","timestamp":"2025-10-04T22:44:56.589Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T22:44:56.589Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T22:45:58.658Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759617958669}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T22:45:58.672Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T22:45:58.680Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759617967167}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T22:46:07.157Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:46:07.104Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:46:07.153Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:46:07.156Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:46:07.155Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759617967168}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:46:07.161Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":100,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:46:07.165Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:46:07.165Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:46:07.166Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:46:07.167Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T22:46:07.168Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T22:46:07.168Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T22:46:07.168Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T22:46:07.158Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T22:46:07.158Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T22:46:07.158Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T22:46:07.158Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T22:46:07.159Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T22:46:07.159Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T22:46:07.159Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T22:46:07.191Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T22:46:08.009Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T22:46:09.398Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T22:46:09.399Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T22:46:09.399Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T22:46:09.399Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:46:09.805Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:46:09.806Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:46:09.806Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:46:09.807Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:46:09.808Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T22:46:09.808Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:46:09.805Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:46:09.806Z"}
{"level":"debug","message":"Predicción Kalman: 122265.67347862292 (Confianza: 0.869)","module":"KalmanFilter","timestamp":"2025-10-04T22:46:09.808Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:46:10.203Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:47:07.562Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122065.42861555573,"middle":122196.88999999998,"upper":122328.35138444424},"ema":{"ema21":122161.30500730911,"ema50":122041.60820855381,"ema9":122225.44233338398},"macd":{"histogram":7.472430849548246,"macd":74.72430849548255,"signal":67.2518776459343},"rsi":54.535165723525125,"volume":{"avg":119.51907999999999,"current":3.851,"ratio":0.032220796880297276}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30, junto con un MACD bullish y una Bollinger Band superior en el gráfico, señala una posible oportunidad de compra. Además, la predicción de Kalman indica que el precio podría subir en los próximos días con alta confianza. Considerando el uso de leverage alto (10-50x) y el nivel de confianza razonablemente alto (86.9%), es recomendable tomar una posición de compra AGRESIVA.","symbol":"BTCUSDT","timestamp":1759618027565}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618027566","module":"BybitClient","timestamp":"2025-10-04T22:47:07.569Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:47:07.569Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"63.948\",\"markPrice\":\"122274.4\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.47630886\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618029301}","module":"BybitClient","timestamp":"2025-10-04T22:47:09.053Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.876 BTCUSDT | PnL: 0.06%","module":"TradingStrategy","timestamp":"2025-10-04T22:47:09.054Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:47:09.054Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T22:47:09.453Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T22:47:09.454Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para apr...","module":"OllamaClient","timestamp":"2025-10-04T22:47:41.612Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para aprovechar e...","module":"TradingStrategy","timestamp":"2025-10-04T22:47:41.614Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618061615","module":"BybitClient","timestamp":"2025-10-04T22:47:41.617Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T22:47:41.614Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T22:47:41.614Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:47:41.617Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759617154135%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"122201.4\",\"liqPrice\":\"118739.1\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"130569.1\",\"positionValue\":\"107048.4264\",\"isReduceOnly\":false,\"positionIMByMp\":\"3625.19603053\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"118721.7\",\"unrealisedPnl\":\"63.8604\",\"markPrice\":\"122274.3\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12032.00257453\",\"positionMM\":\"592.15656887\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"3625.19603053\",\"positionMMByMp\":\"592.47587086\",\"seq\":140697266384441,\"updatedTime\":\"1759617154135\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"3625.19603053\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-58.87663452\",\"size\":\"0.876\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"119888\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618063057}","module":"BybitClient","timestamp":"2025-10-04T22:47:42.754Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T22:47:42.762Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T22:47:42.762Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T22:47:42.762Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T22:51:09.818Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:51:11.293Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T22:51:11.304Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:51:11.303Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:52:42.768Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:52:42.779Z"}
{"level":"debug","message":"Predicción Kalman: 122268.20224497399 (Confianza: 0.885)","module":"KalmanFilter","timestamp":"2025-10-04T22:52:42.779Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:52:44.516Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:53:45.625Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122082.97449441289,"middle":122214.505,"upper":122346.03550558712},"ema":{"ema21":122204.54564550733,"ema50":122078.66186259479,"ema9":122258.7167197537},"macd":{"histogram":6.704074458211835,"macd":67.04074458211835,"signal":60.336670123906515},"rsi":66.75476684916046,"volume":{"avg":113.03632000000002,"current":5.128,"ratio":0.045365949634595316}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior y Medio en el rango superior, señaliza una posible oportunidad de compra. Además, la predicción de Kalman para el precio futuro también apoya esta decisión.","symbol":"BTCUSDT","timestamp":1759618425630}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618425631","module":"BybitClient","timestamp":"2025-10-04T22:53:45.635Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:53:45.635Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122198.2\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618427727}","module":"BybitClient","timestamp":"2025-10-04T22:53:47.426Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:53:47.426Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618427426","module":"BybitClient","timestamp":"2025-10-04T22:53:47.426Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:53:47.427Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122198.3\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618428469}","module":"BybitClient","timestamp":"2025-10-04T22:53:48.167Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T22:53:48.168Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:53:48.167Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618428173","module":"BybitClient","timestamp":"2025-10-04T22:53:48.174Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:53:48.174Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618429216}","module":"BybitClient","timestamp":"2025-10-04T22:53:48.920Z"}
{"level":"info","message":"Balance disponible: $38884.80, Precio: $122177.8","module":"TradingStrategy","timestamp":"2025-10-04T22:53:48.924Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:53:48.924Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.662Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T22:53:49.696Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618429696","module":"BybitClient","timestamp":"2025-10-04T22:53:49.697Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2203.47","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.689Z"}
{"level":"info","message":"Position value: $37459.02, Quantity raw: 0.306594","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.689Z"}
{"level":"info","message":"Cantidad final calculada: 0.306 BTC (valor: $37386.41)","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.690Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 0.306","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.690Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.306 BTCUSDT @ 122177.8 (SL: 121444.7332, TP: 123570.62692000001)","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.693Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.306 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.693Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.694Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":0.306,\"stopLoss\":121444.7332,\"takeProfit\":123570.62692000001,\"timestamp\":1759618429693,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior y Medio en el rango superior, señaliza una posible oportunidad de compra. Además, la predicción de Kalman para el precio futuro también apoya esta decisión.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.694Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T22:53:49.694Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:53:49.697Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618430737}","module":"BybitClient","timestamp":"2025-10-04T22:53:50.438Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:53:50.441Z"}
{"level":"info","message":"Validando posición: Cantidad=0.306, Precio=122198.20, Valor=$37392.65","module":"RiskManager","timestamp":"2025-10-04T22:53:50.848Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618430848","module":"BybitClient","timestamp":"2025-10-04T22:53:50.849Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:53:50.849Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122198.2\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618431889}","module":"BybitClient","timestamp":"2025-10-04T22:53:51.595Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Exposición total excedería límite: $100\",\"riskScore\":0.7}","module":"TradingStrategy","timestamp":"2025-10-04T22:53:51.596Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:53:51.595Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Exposición total excedería límite: $100","module":"TradingStrategy","timestamp":"2025-10-04T22:53:51.596Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T22:55:39.192Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759618539199}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T22:55:39.200Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T22:55:39.205Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759618544330}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:55:44.315Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T22:55:44.325Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:55:44.321Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:55:44.324Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:55:44.324Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:55:44.328Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759618544330}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":1000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:55:44.329Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:55:44.329Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:55:44.329Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:55:44.329Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T22:55:44.325Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T22:55:44.326Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T22:55:44.351Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T22:55:44.330Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T22:55:44.330Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T22:55:44.330Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T22:55:45.423Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T22:55:47.340Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T22:55:47.340Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T22:55:47.340Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T22:55:47.340Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:55:48.249Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:55:48.250Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:55:48.250Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:55:48.251Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:55:48.252Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T22:55:48.252Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:55:48.250Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:55:48.250Z"}
{"level":"debug","message":"Predicción Kalman: 122240.0503869407 (Confianza: 0.876)","module":"KalmanFilter","timestamp":"2025-10-04T22:55:48.252Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:55:48.661Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:56:32.878Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122081.80713580789,"middle":122206.11499999999,"upper":122330.42286419209},"ema":{"ema21":122171.90785388624,"ema50":122054.60194768435,"ema9":122224.48069335638},"macd":{"histogram":6.5966134662623475,"macd":65.96613466262352,"signal":59.36952119636117},"rsi":58.451304792768866,"volume":{"avg":119.82261,"current":5.672,"ratio":0.04733664205778859}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30, junto con un MACD bullish y un Bollinger Band superior, indica una oportunidad buena para comprar. Además, la predicción de Kalman sugiere que el precio podría subir aún más, lo que respalda nuestra decisión de compra. Utilizaremos un leverage alto (10-50x) para aprovechar al máximo esta oportunidad.","symbol":"BTCUSDT","timestamp":1759618592880}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618592881","module":"BybitClient","timestamp":"2025-10-04T22:56:32.882Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:56:32.882Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122254\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618595552}","module":"BybitClient","timestamp":"2025-10-04T22:56:35.241Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:56:35.242Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618595242","module":"BybitClient","timestamp":"2025-10-04T22:56:35.242Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:56:35.242Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122254\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618596291}","module":"BybitClient","timestamp":"2025-10-04T22:56:36.041Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T22:56:36.045Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:56:36.042Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618596045","module":"BybitClient","timestamp":"2025-10-04T22:56:36.045Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:56:36.046Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618597096}","module":"BybitClient","timestamp":"2025-10-04T22:56:36.785Z"}
{"level":"info","message":"Balance disponible: $38884.80, Precio: $122235.6","module":"TradingStrategy","timestamp":"2025-10-04T22:56:36.786Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:56:36.786Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T22:56:37.196Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618597197","module":"BybitClient","timestamp":"2025-10-04T22:56:37.197Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2203.47","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"Position value: $37459.02, Quantity raw: 0.306449","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"Cantidad final calculada: 0.306 BTC (valor: $37404.09)","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 0.306","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.306 BTCUSDT @ 122235.6 (SL: 121502.1864, TP: 123629.08584)","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.194Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.306 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.195Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.195Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":0.306,\"stopLoss\":121502.1864,\"takeProfit\":123629.08584,\"timestamp\":1759618597195,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30, junto con un MACD bullish y un Bollinger Band superior, indica una oportunidad buena para comprar. Además, la predicción de Kalman sugiere que el precio podría subir aún más, lo que respalda nuestra decisión de compra. Utilizaremos un leverage alto (10-50x) para aprovechar al máximo esta oportunidad.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.195Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T22:56:37.195Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:56:37.197Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618598247}","module":"BybitClient","timestamp":"2025-10-04T22:56:37.936Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:56:37.937Z"}
{"level":"info","message":"Validando posición: Cantidad=0.306, Precio=122254.00, Valor=$37409.72","module":"RiskManager","timestamp":"2025-10-04T22:56:38.668Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618598668","module":"BybitClient","timestamp":"2025-10-04T22:56:38.668Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:56:38.668Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122254\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618599716}","module":"BybitClient","timestamp":"2025-10-04T22:56:39.419Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Exposición total excedería límite: $1000\",\"riskScore\":0.7}","module":"TradingStrategy","timestamp":"2025-10-04T22:56:39.420Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:56:39.419Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Exposición total excedería límite: $1000","module":"TradingStrategy","timestamp":"2025-10-04T22:56:39.420Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T22:56:53.297Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759618613299}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T22:56:53.299Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T22:56:53.307Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759618617552}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T22:56:57.536Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:56:57.523Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:56:57.529Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:56:57.533Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:56:57.532Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759618617553}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:56:57.544Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:56:57.546Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:56:57.546Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:56:57.548Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:56:57.552Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T22:56:57.552Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T22:56:57.552Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T22:56:57.553Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T22:56:57.537Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T22:56:57.537Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T22:56:57.537Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T22:56:57.538Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T22:56:57.539Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T22:56:57.539Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T22:56:57.539Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T22:56:57.577Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T22:56:59.359Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T22:57:00.626Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T22:57:00.628Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T22:57:00.629Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T22:57:00.629Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:57:01.546Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:57:01.546Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:57:01.546Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:57:01.547Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:57:01.547Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T22:57:01.548Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:57:01.546Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:57:01.546Z"}
{"level":"debug","message":"Predicción Kalman: 122245.34772058597 (Confianza: 0.876)","module":"KalmanFilter","timestamp":"2025-10-04T22:57:01.548Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:57:02.288Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:57:44.711Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122081.55940745599,"middle":122207.12,"upper":122332.680592544},"ema":{"ema21":122173.73512661352,"ema50":122055.39018297846,"ema9":122228.50069335639},"macd":{"histogram":6.756955346604805,"macd":67.56955346604809,"signal":60.81259811944329},"rsi":59.82849604221741,"volume":{"avg":120.18423000000001,"current":41.834,"ratio":0.3480822733564961}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Band superior, indica una posible oportunidad de compra. Además, la predicción Kalman sugiere que el precio podría subir en los próximos días.","symbol":"BTCUSDT","timestamp":1759618664729}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618664766","module":"BybitClient","timestamp":"2025-10-04T22:57:44.775Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:57:44.775Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122241.24\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618666530}","module":"BybitClient","timestamp":"2025-10-04T22:57:46.224Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:57:46.224Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618666225","module":"BybitClient","timestamp":"2025-10-04T22:57:46.225Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:57:46.225Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122241.24\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618666947}","module":"BybitClient","timestamp":"2025-10-04T22:57:46.639Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T22:57:46.640Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:57:46.640Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618666642","module":"BybitClient","timestamp":"2025-10-04T22:57:46.642Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:57:46.644Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618667694}","module":"BybitClient","timestamp":"2025-10-04T22:57:47.388Z"}
{"level":"info","message":"Balance disponible: $38884.80, Precio: $122255.4","module":"TradingStrategy","timestamp":"2025-10-04T22:57:47.389Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:57:47.388Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.233Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T22:57:48.235Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618668235","module":"BybitClient","timestamp":"2025-10-04T22:57:48.235Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2203.47","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.233Z"}
{"level":"info","message":"Position value: $37459.02, Quantity raw: 0.306400","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.233Z"}
{"level":"info","message":"Cantidad final calculada: 0.306 BTC (valor: $37410.15)","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.233Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 0.306","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.234Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.306 BTCUSDT @ 122255.4 (SL: 121521.8676, TP: 123649.11155999999)","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.234Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.306 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.234Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.234Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":0.306,\"stopLoss\":121521.8676,\"takeProfit\":123649.11155999999,\"timestamp\":1759618668234,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Band superior, indica una posible oportunidad de compra. Además, la predicción Kalman sugiere que el precio podría subir en los próximos días.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.234Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T22:57:48.235Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T22:57:48.236Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618669286}","module":"BybitClient","timestamp":"2025-10-04T22:57:48.980Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T22:57:48.980Z"}
{"level":"info","message":"Validando posición: Cantidad=0.306, Precio=122222.70, Valor=$37400.15","module":"RiskManager","timestamp":"2025-10-04T22:57:49.393Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618669393","module":"BybitClient","timestamp":"2025-10-04T22:57:49.393Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:57:49.393Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122240.84\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618670116}","module":"BybitClient","timestamp":"2025-10-04T22:57:49.809Z"}
{"level":"info","message":"Resultado validación: {\"approved\":false,\"reason\":\"Exposición total excedería límite: $10000\",\"riskScore\":0.7}","module":"TradingStrategy","timestamp":"2025-10-04T22:57:49.840Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T22:57:49.839Z"}
{"level":"warn","message":"Trade rechazado por gestión de riesgo: Exposición total excedería límite: $10000","module":"TradingStrategy","timestamp":"2025-10-04T22:57:49.840Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T22:58:42.494Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759618722506}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T22:58:42.509Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T22:58:42.514Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759618727261}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T22:58:47.254Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:58:47.244Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:58:47.251Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:58:47.253Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:58:47.253Z"}
{"component":"TradingStrategy","interval":"5m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759618727262}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T22:58:47.258Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T22:58:47.259Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:58:47.259Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:58:47.260Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T22:58:47.261Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T22:58:47.262Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T22:58:47.262Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (5m)","module":"TradingSystem","timestamp":"2025-10-04T22:58:47.262Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T22:58:47.255Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T22:58:47.255Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T22:58:47.255Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T22:58:47.255Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T22:58:47.255Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T22:58:47.256Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T22:58:47.256Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T22:58:47.283Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T22:58:50.421Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T22:58:51.620Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (5m)","module":"DataManager","timestamp":"2025-10-04T22:58:51.621Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T22:58:51.621Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-04T22:58:51.621Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T22:58:52.037Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:58:52.040Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T22:58:52.040Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T22:58:52.040Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T22:58:52.041Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T22:58:52.041Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:58:52.040Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-04T22:58:52.040Z"}
{"level":"debug","message":"Predicción Kalman: 122240.41935545334 (Confianza: 0.876)","module":"KalmanFilter","timestamp":"2025-10-04T22:58:52.041Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T22:58:52.779Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T22:59:59.141Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122081.8094674383,"middle":122206.18499999998,"upper":122330.56053256166},"ema":{"ema21":122172.03512661351,"ema50":122054.65684964514,"ema9":122224.76069335638},"macd":{"histogram":6.607781557430279,"macd":66.0778155743028,"signal":59.470034016872525},"rsi":58.550280755487755,"volume":{"avg":120.26295,"current":49.706,"ratio":0.41331099894023887}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior y Medio en el rango superior, señala una posible oportunidad de compra. Además, la predicción de Kalman indica un precio futuro que está por encima del precio actual, lo que sugiere una tendencia bullish. Considerando el leverage alto (10-50x) y el nivel de confianza moderado (87.6%), la decisión es comprar con una confianza del 87.6%.","symbol":"BTCUSDT","timestamp":1759618799154}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618799161","module":"BybitClient","timestamp":"2025-10-04T22:59:59.165Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T22:59:59.165Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122237\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618800635}","module":"BybitClient","timestamp":"2025-10-04T23:00:00.321Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:00:00.321Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618800323","module":"BybitClient","timestamp":"2025-10-04T23:00:00.324Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:00:00.324Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122237\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618801034}","module":"BybitClient","timestamp":"2025-10-04T23:00:00.720Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T23:00:00.720Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:00:00.720Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618800725","module":"BybitClient","timestamp":"2025-10-04T23:00:00.725Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:00:00.725Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618801438}","module":"BybitClient","timestamp":"2025-10-04T23:00:01.139Z"}
{"level":"info","message":"Balance disponible: $38884.80, Precio: $122237","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.141Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T23:00:01.141Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T23:00:01.543Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618801544","module":"BybitClient","timestamp":"2025-10-04T23:00:01.544Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2203.47","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"Position value: $37459.02, Quantity raw: 0.306446","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"Cantidad final calculada: 0.306 BTC (valor: $37404.52)","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 0.306","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.306 BTCUSDT @ 122237 (SL: 121503.578, TP: 123630.50180000001)","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.306 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.536Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.537Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":0.306,\"stopLoss\":121503.578,\"takeProfit\":123630.50180000001,\"timestamp\":1759618801536,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La combinación de un precio actual por debajo del cambio reciente y una RSI por debajo de 30, junto con un MACD bullish y un Bollinger Superior y Medio en el rango superior, señala una posible oportunidad de compra. Además, la predicción de Kalman indica un precio futuro que está por encima del precio actual, lo que sugiere una tendencia bullish. Considerando el leverage alto (10-50x) y el nivel de confianza moderado (87.6%), la decisión es comprar con una confianza del 87.6%.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.539Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T23:00:01.539Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:00:01.544Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214444.61638238\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214444.61638238\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.27375459\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121046.15658721\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4494.875045\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38884.79669829\",\"totalPositionMM\":\"0\",\"usdValue\":\"38907.31099557\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38884.79669829\",\"cumRealisedPnl\":\"-12022.80619171\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759618802255}","module":"BybitClient","timestamp":"2025-10-04T23:00:01.942Z"}
{"level":"info","message":"Balance obtenido - Total: $214444.62, Disponible: $38884.80","module":"BybitClient","timestamp":"2025-10-04T23:00:01.947Z"}
{"level":"info","message":"Validando posición: Cantidad=0.306, Precio=122236.90, Valor=$37404.49","module":"RiskManager","timestamp":"2025-10-04T23:00:02.340Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759618802340","module":"BybitClient","timestamp":"2025-10-04T23:00:02.340Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:00:02.340Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618277791%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"30\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122236.9\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12027.75434683\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266416671,\"updatedTime\":\"1759618277791\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759618803051}","module":"BybitClient","timestamp":"2025-10-04T23:00:02.736Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:00:02.743Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-04T23:00:03.141Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:00:03.535Z"}
{"level":"info","message":"Velas obtenidas: 20 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:00:03.536Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-04T23:00:03.930Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.30338254926840547}","module":"TradingStrategy","timestamp":"2025-10-04T23:00:03.932Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759618803932","module":"BybitClient","timestamp":"2025-10-04T23:00:03.932Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-04T23:00:03.932Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"17\",\"sellLeverage\":\"17\"}","module":"BybitClient","timestamp":"2025-10-04T23:00:03.933Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759618804644}","module":"BybitClient","timestamp":"2025-10-04T23:00:04.334Z"}
{"level":"info","message":"Leverage establecido a 17x para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:00:04.335Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.306 BTCUSDT | SL: 121503.578 | TP: 123630.50180000001","module":"BybitClient","timestamp":"2025-10-04T23:00:04.335Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759618804336","module":"BybitClient","timestamp":"2025-10-04T23:00:04.336Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.306\",\"timeInForce\":\"IOC\",\"stopLoss\":\"121503.578\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"123630.50180000001\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-04T23:00:04.336Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"7b1b60eb-6d1e-4357-93d4-0141f523fcbb\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759618805047}","module":"BybitClient","timestamp":"2025-10-04T23:00:04.744Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":0.306,"side":"BUY","symbol":"BTCUSDT","timestamp":1759618804745}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T23:00:04.746Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 7b1b60eb-6d1e-4357-93d4-0141f523fcbb","module":"BybitClient","timestamp":"2025-10-04T23:00:04.745Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:03:52.045Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:03:53.804Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:03:53.805Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:03:53.804Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:05:04.761Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T23:05:04.774Z"}
{"level":"debug","message":"Predicción Kalman: 122227.83851606477 (Confianza: 0.888)","module":"KalmanFilter","timestamp":"2025-10-04T23:05:04.775Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:05:05.922Z"}
{"error":"AxiosError: timeout of 120000ms exceeded\n    at RedirectableRequest.handleRequestTimeout (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/adapters/http.js:675:16)\n    at RedirectableRequest.emit (node:events:507:28)\n    at RedirectableRequest.emit (node:domain:489:12)\n    at Timeout.<anonymous> (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/follow-redirects@1.15.11/node_modules/follow-redirects/index.js:221:12)\n    at listOnTimeout (node:internal/timers:611:17)\n    at processTimers (node:internal/timers:546:7)\n    at Axios.request (/Users/x3at/Documents/ai-trading-system/node_modules/.pnpm/axios@1.12.2/node_modules/axios/lib/core/Axios.js:45:41)\n    at async OllamaClient.analyze (/Users/x3at/Documents/ai-trading-system/src/ai/ollama-client.ts:39:24)\n    at async TradingStrategy.performCompleteAnalysis (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:133:16)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:87:26)","level":"error","message":"Error en análisis de Ollama:","module":"OllamaClient","timestamp":"2025-10-04T23:07:06.054Z"}
{"confidence":0.1,"decision":"HOLD","indicators":{"bollinger":{"lower":122084.71398595064,"middle":122203.54500000001,"upper":122322.37601404938},"ema":{"ema21":122196.54277914939,"ema50":122084.57456940485,"ema9":122230.42791997863},"macd":{"histogram":4.9477149981830735,"macd":49.477149981830735,"signal":44.52943498364766},"rsi":53.96155649320301,"volume":{"avg":110.32748000000001,"current":23.735,"ratio":0.21513225898026492}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"Error en análisis de IA: timeout of 120000ms exceeded","symbol":"BTCUSDT","timestamp":1759619226063}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759619226067","module":"BybitClient","timestamp":"2025-10-04T23:07:06.073Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:07:06.081Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"0.19278\",\"markPrice\":\"122237.53\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.38585587\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759619228315}","module":"BybitClient","timestamp":"2025-10-04T23:07:07.999Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.306 BTCUSDT | PnL: 0.00%","module":"TradingStrategy","timestamp":"2025-10-04T23:07:08.000Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:07:07.999Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:07:08.737Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:07:08.738Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para apr...","module":"OllamaClient","timestamp":"2025-10-04T23:08:06.426Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para aprovechar e...","module":"TradingStrategy","timestamp":"2025-10-04T23:08:06.485Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759619286494","module":"BybitClient","timestamp":"2025-10-04T23:08:06.507Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:08:06.484Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:08:06.485Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:08:06.522Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"0.80478\",\"markPrice\":\"122239.53\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.38891587\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759619287773}","module":"BybitClient","timestamp":"2025-10-04T23:08:07.461Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:08:07.469Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:08:07.462Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:08:07.469Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:08:52.038Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:08:53.419Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:08:53.421Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:08:53.421Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:13:07.500Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0587","module":"KalmanFilter","timestamp":"2025-10-04T23:13:07.511Z"}
{"level":"debug","message":"Predicción Kalman: 122224.63805670667 (Confianza: 0.886)","module":"KalmanFilter","timestamp":"2025-10-04T23:13:07.512Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:13:08.919Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:13:52.036Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:13:52.959Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:13:52.960Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:13:52.959Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:15:07.462Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122138.01466546547,"middle":122228.85,"upper":122319.68533453454},"ema":{"ema21":122210.80655273581,"ema50":122106.99213878252,"ema9":122232.23919678402},"macd":{"histogram":3.548327442792651,"macd":35.48327442792652,"signal":31.934946985133866},"rsi":50.06315124723621,"volume":{"avg":98.80839000000003,"current":30.464,"ratio":0.3083138992549113}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo de 30 y el MACD es bullish, lo que indica una posible oportunidad de compra. Además, el Kalman predice un aumento en ","symbol":"BTCUSDT","timestamp":1759619707519}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759619707520","module":"BybitClient","timestamp":"2025-10-04T23:15:07.541Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:15:07.515Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:15:07.519Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:15:07.541Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-13.1274\",\"markPrice\":\"122194\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.31925497\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759619709625}","module":"BybitClient","timestamp":"2025-10-04T23:15:09.305Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.306 BTCUSDT | PnL: -0.04%","module":"TradingStrategy","timestamp":"2025-10-04T23:15:09.309Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:15:09.308Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:15:10.057Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:15:10.057Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para apr...","module":"OllamaClient","timestamp":"2025-10-04T23:15:41.256Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es bullish y no hay señales de reversión. Mantener la posición para aprovechar e...","module":"TradingStrategy","timestamp":"2025-10-04T23:15:41.266Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759619741267","module":"BybitClient","timestamp":"2025-10-04T23:15:41.268Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:15:41.265Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:15:41.266Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:15:41.268Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-15.4224\",\"markPrice\":\"122186.5\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.30777997\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759619742811}","module":"BybitClient","timestamp":"2025-10-04T23:15:42.488Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:15:42.489Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:15:42.489Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:15:42.492Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:18:52.034Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:18:53.420Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:18:53.420Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:18:53.420Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:20:42.491Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T23:20:42.494Z"}
{"level":"debug","message":"Predicción Kalman: 122208.73093603025 (Confianza: 0.897)","module":"KalmanFilter","timestamp":"2025-10-04T23:20:42.494Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:20:45.202Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:22:33.951Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122168.32466227905,"middle":122226.62,"upper":122284.91533772094},"ema":{"ema21":122212.8294268832,"ema50":122140.02673559482,"ema9":122213.42043626169},"macd":{"histogram":1.0644159810894056,"macd":10.644159810894052,"signal":9.579743829804647},"rsi":40.970448741334515,"volume":{"avg":82.78577999999999,"current":36.457,"ratio":0.440377562426784}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de un precio actual por debajo del cambio reciente y el MACD en una posición bullish sugiere una oportunidad de compra con confianza. Además, el RSI está en un nivel bajo y el Bollinger Band se encuentra en el rango superior, lo que indica una mayor volatilidad y un mayor margen de maniobra para la inversión.","symbol":"BTCUSDT","timestamp":1759620153952}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620153952","module":"BybitClient","timestamp":"2025-10-04T23:22:33.954Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:22:33.954Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-15.2388\",\"markPrice\":\"122187.1\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.30869797\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620156168}","module":"BybitClient","timestamp":"2025-10-04T23:22:35.832Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.306 BTCUSDT | PnL: -0.04%","module":"TradingStrategy","timestamp":"2025-10-04T23:22:35.833Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:22:35.833Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:22:36.227Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:22:36.228Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-04T23:22:59.207Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-04T23:22:59.208Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620179209","module":"BybitClient","timestamp":"2025-10-04T23:22:59.209Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:22:59.208Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:22:59.208Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:22:59.209Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-19.9206\",\"markPrice\":\"122171.8\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.28528897\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620180487}","module":"BybitClient","timestamp":"2025-10-04T23:23:00.152Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:23:00.153Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:23:00.153Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:23:00.153Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:23:52.037Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:23:53.484Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:23:53.484Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:23:53.484Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:28:00.163Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0518","module":"KalmanFilter","timestamp":"2025-10-04T23:28:00.171Z"}
{"level":"debug","message":"Predicción Kalman: 122190.62725930853 (Confianza: 0.898)","module":"KalmanFilter","timestamp":"2025-10-04T23:28:00.172Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:28:02.185Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:28:52.032Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:28:53.217Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:28:53.218Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:28:53.217Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:29:24.583Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122157.36306996881,"middle":122216.275,"upper":122275.18693003118},"ema":{"ema21":122205.99788257609,"ema50":122150.23914073038,"ema9":122197.85972053533},"macd":{"histogram":0.04238866825180593,"macd":0.4238866825180594,"signal":0.38149801426625346},"rsi":45.140997830802135,"volume":{"avg":75.71677999999999,"current":36.993,"ratio":0.4885706972747654}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La combinación de los indicadores técnicos y la predicción de Kalman indican una tendencia bullish en el mercado. Además, el volumen y la volatilidad son altas, lo que sugiere una oportunidad de trading aggressivo. Considerando el leverage alto (10-50x) y la confianza en la señal, es recomendable comprar con una posición AGRESIVA.","symbol":"BTCUSDT","timestamp":1759620564588}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620564589","module":"BybitClient","timestamp":"2025-10-04T23:29:24.591Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:29:24.591Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-23.5314\",\"markPrice\":\"122160\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.26723497\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620566955}","module":"BybitClient","timestamp":"2025-10-04T23:29:26.616Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.306 BTCUSDT | PnL: -0.06%","module":"TradingStrategy","timestamp":"2025-10-04T23:29:26.617Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:29:26.617Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:29:27.018Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:29:27.018Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y espe...","module":"OllamaClient","timestamp":"2025-10-04T23:29:50.679Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay...","module":"TradingStrategy","timestamp":"2025-10-04T23:29:50.682Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620590683","module":"BybitClient","timestamp":"2025-10-04T23:29:50.683Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:29:50.681Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:29:50.682Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 30%)","module":"OllamaClient","timestamp":"2025-10-04T23:29:50.682Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:29:50.682Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-04T23:29:50.684Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759618805047%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"122236.9\",\"liqPrice\":\"115657.7\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123630.5\",\"positionValue\":\"37404.4914\",\"isReduceOnly\":false,\"positionIMByMp\":\"2219.62665698\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"115624.7\",\"unrealisedPnl\":\"-23.5314\",\"markPrice\":\"122160\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12048.3268171\",\"positionMM\":\"206.38489198\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"2219.62665698\",\"positionMMByMp\":\"206.26723497\",\"seq\":140697266431419,\"updatedTime\":\"1759618805047\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2219.62665698\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.57247027\",\"size\":\"0.306\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121503.5\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620592761}","module":"BybitClient","timestamp":"2025-10-04T23:29:52.429Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:29:52.429Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:29:52.429Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:29:52.430Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T23:32:18.010Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759620738017}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T23:32:18.017Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T23:32:18.024Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759620759710}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T23:32:39.701Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:32:39.699Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T23:32:39.700Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:32:39.700Z"}
{"component":"TradingStrategy","interval":"1m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"ASTERUSDT","timestamp":1759620759714}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T23:32:39.684Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T23:32:39.707Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:32:39.709Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:32:39.707Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T23:32:39.706Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:32:39.710Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T23:32:39.710Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T23:32:39.714Z"}
{"level":"info","message":"Iniciando estrategia de trading para ASTERUSDT (1m)","module":"TradingSystem","timestamp":"2025-10-04T23:32:39.714Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T23:32:39.701Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T23:32:39.701Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T23:32:39.701Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T23:32:39.701Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T23:32:39.703Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T23:32:39.703Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T23:32:39.703Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T23:32:39.734Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T23:32:42.235Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T23:32:44.551Z"}
{"level":"info","message":"Iniciando recopilación de datos para ASTERUSDT (1m)","module":"DataManager","timestamp":"2025-10-04T23:32:44.551Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T23:32:44.552Z"}
{"level":"info","message":"Recopilando datos históricos para ASTERUSDT...","module":"DataManager","timestamp":"2025-10-04T23:32:44.551Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:32:44.964Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para ASTERUSDT","module":"DataManager","timestamp":"2025-10-04T23:32:44.964Z"}
{"level":"info","message":"Datos suficientes recopilados para ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-04T23:32:44.965Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:32:44.966Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T23:32:44.966Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T23:32:44.967Z"}
{"level":"info","message":"Velas obtenidas: 200 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:32:44.964Z"}
{"level":"info","message":"Recopilación de datos iniciada para ASTERUSDT","module":"DataManager","timestamp":"2025-10-04T23:32:44.965Z"}
{"level":"debug","message":"Predicción Kalman: 2.051201721502691 (Confianza: 0.912)","module":"KalmanFilter","timestamp":"2025-10-04T23:32:44.966Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:32:45.361Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:33:18.901Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.032680736899461,"middle":2.0465899999999997,"upper":2.0604992631005383},"ema":{"ema21":2.0497666983833103,"ema50":2.0539309187425334,"ema9":2.0505742649183905},"macd":{"histogram":0.0000071482746016648865,"macd":0.00007148274601664895,"signal":0.00006433447141498406},"rsi":58.48214285714267,"volume":{"avg":109614.73,"current":60383,"ratio":0.550865745871928}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, el MACD es bullish y el volumen es alto, lo que sugiere una posible tendencia al alza. Además, la predicción de Kalman indica un precio próximo a $2.05 con alta confianza, lo que justifica una posición de compra.","symbol":"ASTERUSDT","timestamp":1759620798911}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620798912","module":"BybitClient","timestamp":"2025-10-04T23:33:18.913Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:18.913Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"tpslMode\":\"\",\"isReduceOnly\":false,\"riskId\":1,\"trailingStop\":\"\",\"unrealisedPnl\":\"\",\"markPrice\":\"\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"\",\"positionMM\":\"\",\"createdTime\":\"\",\"positionIdx\":0,\"positionIM\":\"\",\"seq\":-1,\"updatedTime\":\"\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"\",\"size\":\"0\",\"positionStatus\":\"\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620800426}","module":"BybitClient","timestamp":"2025-10-04T23:33:20.082Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:33:20.083Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620800084","module":"BybitClient","timestamp":"2025-10-04T23:33:20.084Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:20.084Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"tpslMode\":\"\",\"isReduceOnly\":false,\"riskId\":1,\"trailingStop\":\"\",\"unrealisedPnl\":\"\",\"markPrice\":\"\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"\",\"positionMM\":\"\",\"createdTime\":\"\",\"positionIdx\":0,\"positionIM\":\"\",\"seq\":-1,\"updatedTime\":\"\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"\",\"size\":\"0\",\"positionStatus\":\"\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620800827}","module":"BybitClient","timestamp":"2025-10-04T23:33:20.483Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T23:33:20.484Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:33:20.484Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620800484","module":"BybitClient","timestamp":"2025-10-04T23:33:20.484Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:33:20.485Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214346.58959102\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214346.58959102\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.42375371\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120998.41269627\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4489.556582\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38843.37650922\",\"totalPositionMM\":\"0\",\"usdValue\":\"38864.19655902\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38843.37650922\",\"cumRealisedPnl\":\"-12064.22638078\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759620801228}","module":"BybitClient","timestamp":"2025-10-04T23:33:20.895Z"}
{"level":"info","message":"Balance disponible: $38843.38, Precio: $2.0475","module":"TradingStrategy","timestamp":"2025-10-04T23:33:20.896Z"}
{"level":"info","message":"Balance obtenido - Total: $214346.59, Disponible: $38843.38","module":"BybitClient","timestamp":"2025-10-04T23:33:20.896Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.293Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T23:33:21.295Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620801295","module":"BybitClient","timestamp":"2025-10-04T23:33:21.296Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1942.17","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Position value: $29132.53, Quantity raw: 14228.343044","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Cantidad final calculada: 14228 ASTER (valor: $29131.83)","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14228","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Generando señal de trading: BUY 14228 ASTERUSDT @ 2.0475 (SL: 2.035215, TP: 2.0708415)","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14228 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14228,\"stopLoss\":2.035215,\"takeProfit\":2.0708415,\"timestamp\":1759620801294,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo del 30, el MACD es bullish y el volumen es alto, lo que sugiere una posible tendencia al alza. Además, la predicción de Kalman indica un precio próximo a $2.05 con alta confianza, lo que justifica una posición de compra.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T23:33:21.294Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:33:21.296Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214346.58959102\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214346.58959102\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.42375371\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120998.41269627\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4489.556582\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38843.37650922\",\"totalPositionMM\":\"0\",\"usdValue\":\"38864.19655902\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38843.37650922\",\"cumRealisedPnl\":\"-12064.22638078\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759620802039}","module":"BybitClient","timestamp":"2025-10-04T23:33:21.697Z"}
{"level":"info","message":"Balance obtenido - Total: $214346.59, Disponible: $38843.38","module":"BybitClient","timestamp":"2025-10-04T23:33:21.697Z"}
{"level":"info","message":"Validando posición: Cantidad=14228, Precio=2.04, Valor=$29093.41","module":"RiskManager","timestamp":"2025-10-04T23:33:22.092Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620802092","module":"BybitClient","timestamp":"2025-10-04T23:33:22.092Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:22.092Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"10\",\"autoAddMargin\":0,\"avgPrice\":\"\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"tpslMode\":\"\",\"isReduceOnly\":false,\"riskId\":1,\"trailingStop\":\"\",\"unrealisedPnl\":\"\",\"markPrice\":\"\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"\",\"positionMM\":\"\",\"createdTime\":\"\",\"positionIdx\":0,\"positionIM\":\"\",\"seq\":-1,\"updatedTime\":\"\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"\",\"size\":\"0\",\"positionStatus\":\"\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620802833}","module":"BybitClient","timestamp":"2025-10-04T23:33:22.489Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:33:22.489Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-04T23:33:22.884Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:33:23.281Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:23.281Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-04T23:33:23.687Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3014913032368541}","module":"TradingStrategy","timestamp":"2025-10-04T23:33:23.687Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759620803687","module":"BybitClient","timestamp":"2025-10-04T23:33:23.687Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-04T23:33:23.687Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-04T23:33:23.688Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759620804428}","module":"BybitClient","timestamp":"2025-10-04T23:33:24.084Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:24.085Z"}
{"level":"info","message":"Ejecutando orden: Buy 14228 ASTERUSDT | SL: 2.035215 | TP: 2.0708415","module":"BybitClient","timestamp":"2025-10-04T23:33:24.085Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759620804085","module":"BybitClient","timestamp":"2025-10-04T23:33:24.085Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14228\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.035215\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.0708415\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-04T23:33:24.085Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"ee8a667b-a8e3-4821-8db2-260bfe959aa9\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759620804828}","module":"BybitClient","timestamp":"2025-10-04T23:33:24.483Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14228,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759620804484}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T23:33:24.484Z"}
{"level":"info","message":"Orden ejecutada exitosamente: ee8a667b-a8e3-4821-8db2-260bfe959aa9","module":"BybitClient","timestamp":"2025-10-04T23:33:24.484Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:33:44.965Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:33:45.880Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:33:45.880Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:33:45.880Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:34:24.487Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0690","module":"KalmanFilter","timestamp":"2025-10-04T23:34:24.489Z"}
{"level":"debug","message":"Predicción Kalman: 2.0481621001555834 (Confianza: 0.904)","module":"KalmanFilter","timestamp":"2025-10-04T23:34:24.490Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:34:26.129Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:34:44.964Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:34:46.715Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:34:46.716Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:34:46.716Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:34:56.323Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.04036265972935,"middle":2.0494600000000003,"upper":2.0585573402706507},"ema":{"ema21":2.0491901480337384,"ema50":2.052931382336465,"ema9":2.0485147991280614},"macd":{"histogram":-0.00006873417020281103,"macd":-0.0006873417020281103,"signal":-0.0006186075318252993},"rsi":40.889830508474745,"volume":{"avg":110359.51,"current":164215,"ratio":1.4880004450907767}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band está expandido, lo que sugiere una mayor actividad en el mercado. La predicción de Kalman también indica un aumento en los precios.","symbol":"ASTERUSDT","timestamp":1759620896324}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620896324","module":"BybitClient","timestamp":"2025-10-04T23:34:56.325Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:34:56.325Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759620804827%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9328\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"29077.7636\",\"isReduceOnly\":false,\"positionIMByMp\":\"1953.44444943\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9312\",\"unrealisedPnl\":\"55.4892\",\"markPrice\":\"2.0476\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-15.99276998\",\"positionMM\":\"375.23879865\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1953.44444943\",\"positionMMByMp\":\"376.0322942\",\"seq\":140697266485841,\"updatedTime\":\"1759620804827\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1953.44444943\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.99276998\",\"size\":\"14228\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0352\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620899798}","module":"BybitClient","timestamp":"2025-10-04T23:34:59.460Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14228 ASTERUSDT | PnL: 0.19%","module":"TradingStrategy","timestamp":"2025-10-04T23:34:59.461Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:34:59.461Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:35:00.240Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:35:00.241Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y espe...","module":"OllamaClient","timestamp":"2025-10-04T23:35:22.151Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y esperar más m...","module":"TradingStrategy","timestamp":"2025-10-04T23:35:22.151Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759620922152","module":"BybitClient","timestamp":"2025-10-04T23:35:22.152Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:35:22.151Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:35:22.151Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:35:22.153Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759620804827%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9328\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"29077.7636\",\"isReduceOnly\":false,\"positionIMByMp\":\"1953.44444943\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9312\",\"unrealisedPnl\":\"31.3016\",\"markPrice\":\"2.0459\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-15.99276998\",\"positionMM\":\"375.23879865\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1953.44444943\",\"positionMMByMp\":\"375.68641152\",\"seq\":140697266485841,\"updatedTime\":\"1759620804827\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1953.44444943\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.99276998\",\"size\":\"14228\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0352\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759620923521}","module":"BybitClient","timestamp":"2025-10-04T23:35:23.281Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:35:23.281Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:35:23.281Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:35:23.281Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:35:44.964Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:35:46.550Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:35:46.550Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:35:46.550Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:36:23.283Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0660","module":"KalmanFilter","timestamp":"2025-10-04T23:36:23.291Z"}
{"level":"debug","message":"Predicción Kalman: 2.0462620218089906 (Confianza: 0.907)","module":"KalmanFilter","timestamp":"2025-10-04T23:36:23.292Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:36:24.515Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:36:44.965Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:36:46.615Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:36:46.616Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:36:46.616Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:37:02.615Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0408077706543124,"middle":2.0490399999999998,"upper":2.057272229345687},"ema":{"ema21":2.0481794146884953,"ema50":2.0512770847545703,"ema9":2.047278826845689},"macd":{"histogram":-0.0000924719127139539,"macd":-0.0009247191271395394,"signal":-0.0008322472144255855},"rsi":47.63313609467474,"volume":{"avg":106954.55,"current":15331,"ratio":0.143341260376487}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759621022618}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621022619","module":"BybitClient","timestamp":"2025-10-04T23:37:02.619Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:37:02.618Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:37:02.618Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:37:02.619Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759620804827%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9328\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"29077.7636\",\"isReduceOnly\":false,\"positionIMByMp\":\"1953.44444943\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9312\",\"unrealisedPnl\":\"155.0852\",\"markPrice\":\"2.0546\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-15.99276998\",\"positionMM\":\"375.23879865\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1953.44444943\",\"positionMMByMp\":\"377.456517\",\"seq\":140697266485841,\"updatedTime\":\"1759620804827\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1953.44444943\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.99276998\",\"size\":\"14228\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0352\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621024670}","module":"BybitClient","timestamp":"2025-10-04T23:37:04.322Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14228 ASTERUSDT | PnL: 0.53%","module":"TradingStrategy","timestamp":"2025-10-04T23:37:04.323Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:37:04.323Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621024324","module":"BybitClient","timestamp":"2025-10-04T23:37:04.324Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"2.0484362000000003\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-04T23:37:04.324Z"}
{"level":"info","message":"🎯 Trailing stop ACTIVADO para ASTERUSDT (PnL: 0.53%)","module":"TradingStrategy","timestamp":"2025-10-04T23:37:04.323Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 2.05 (Max alcanzado: 2.05)","module":"TradingStrategy","timestamp":"2025-10-04T23:37:04.323Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759621025064}","module":"BybitClient","timestamp":"2025-10-04T23:37:04.726Z"}
{"level":"info","message":"Stop Loss actualizado para ASTERUSDT: SL=2.0484362000000003","module":"BybitClient","timestamp":"2025-10-04T23:37:04.726Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:37:05.117Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:37:05.118Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.7,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-04T23:37:26.899Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir apr...","module":"TradingStrategy","timestamp":"2025-10-04T23:37:26.901Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621046903","module":"BybitClient","timestamp":"2025-10-04T23:37:26.904Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 70%)","module":"OllamaClient","timestamp":"2025-10-04T23:37:26.901Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:37:26.901Z"}
{"level":"info","message":"⚠️  Estrategia activada: PROFIT_LADDER_30 - PnL 0.53% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-04T23:37:26.902Z"}
{"level":"info","message":"🟢 CERRANDO 25% DE POSICIÓN: PnL 0.53% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-04T23:37:26.903Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:37:26.904Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621025063%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9328\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"29077.7636\",\"isReduceOnly\":false,\"positionIMByMp\":\"1953.44444943\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9312\",\"unrealisedPnl\":\"143.7028\",\"markPrice\":\"2.0538\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-15.99276998\",\"positionMM\":\"375.23879865\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1953.44444943\",\"positionMMByMp\":\"377.29374868\",\"seq\":140697266485841,\"updatedTime\":\"1759621025063\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1953.44444943\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.99276998\",\"size\":\"14228\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0484\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621048363}","module":"BybitClient","timestamp":"2025-10-04T23:37:28.018Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:37:28.019Z"}
{"level":"info","message":"Cerrando 25% de posición Buy ASTERUSDT: 3557 unidades","module":"BybitClient","timestamp":"2025-10-04T23:37:28.019Z"}
{"level":"info","message":"Ejecutando orden: Sell 3557 ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:37:28.019Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621048019","module":"BybitClient","timestamp":"2025-10-04T23:37:28.019Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"3557\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-04T23:37:28.019Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"aa039fdd-5aac-4d9f-8327-e20145c07a7d\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759621048761}","module":"BybitClient","timestamp":"2025-10-04T23:37:28.416Z"}
{"level":"info","message":"💰 25% cerrado. PnL parcial: 38.77 USDT","module":"TradingStrategy","timestamp":"2025-10-04T23:37:28.424Z"}
{"level":"info","message":"Orden ejecutada exitosamente: aa039fdd-5aac-4d9f-8327-e20145c07a7d","module":"BybitClient","timestamp":"2025-10-04T23:37:28.424Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621048424","module":"BybitClient","timestamp":"2025-10-04T23:37:28.424Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:37:28.424Z"}
{"level":"info","message":"✅ Acción ejecutada exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T23:37:28.424Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621048760%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"108.8442\",\"markPrice\":\"2.0539\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"269.11057104\",\"seq\":140697266492588,\"updatedTime\":\"1759621048760\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0484\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621049165}","module":"BybitClient","timestamp":"2025-10-04T23:37:28.820Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:37:28.820Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:37:28.820Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:37:28.820Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:37:44.966Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:37:45.899Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:37:45.899Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:37:45.899Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:38:28.824Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0918","module":"KalmanFilter","timestamp":"2025-10-04T23:38:28.826Z"}
{"level":"debug","message":"Predicción Kalman: 2.0504707318121795 (Confianza: 0.880)","module":"KalmanFilter","timestamp":"2025-10-04T23:38:28.830Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:38:30.532Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:38:44.971Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:38:46.427Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:38:46.429Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:38:46.428Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:39:20.512Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.039373583788824,"middle":2.04798,"upper":2.056586416211176},"ema":{"ema21":2.048576405196484,"ema50":2.050046879539354,"ema9":2.049719198865359},"macd":{"histogram":0.000054967921135995446,"macd":0.0005496792113599547,"signal":0.0004947112902239592},"rsi":51.863857374392275,"volume":{"avg":107444.11,"current":78288,"ratio":0.7286392897665587}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La combinación de un precio actual debajo del cambio 24h (-1.50%), un volumen superior al promedio (0.73x) y una RSI por debajo de 30 (+10) ","symbol":"ASTERUSDT","timestamp":1759621160516}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621160516","module":"BybitClient","timestamp":"2025-10-04T23:39:20.517Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:39:20.515Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:39:20.516Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:39:20.517Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621048760%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"125.9178\",\"markPrice\":\"2.0555\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"269.35472352\",\"seq\":140697266492588,\"updatedTime\":\"1759621048760\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0484\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621161735}","module":"BybitClient","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10671 ASTERUSDT | PnL: 0.58%","module":"TradingStrategy","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621161388","module":"BybitClient","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"2.0493335\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 2.05 (Max alcanzado: 2.06)","module":"TradingStrategy","timestamp":"2025-10-04T23:39:21.388Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759621162132}","module":"BybitClient","timestamp":"2025-10-04T23:39:21.795Z"}
{"level":"info","message":"Stop Loss actualizado para ASTERUSDT: SL=2.0493335","module":"BybitClient","timestamp":"2025-10-04T23:39:21.795Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:39:22.188Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:39:22.189Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:39:44.970Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-04T23:39:45.230Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-04T23:39:45.230Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621185231","module":"BybitClient","timestamp":"2025-10-04T23:39:45.231Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:39:45.230Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:39:45.231Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:39:45.231Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621162132%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"139.7901\",\"markPrice\":\"2.0568\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"269.55309741\",\"seq\":140697266492588,\"updatedTime\":\"1759621162132\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0493\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621186488}","module":"BybitClient","timestamp":"2025-10-04T23:39:46.144Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:39:46.144Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:39:46.144Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:39:46.144Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:39:46.366Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:39:46.367Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:39:46.367Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:40:44.972Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:40:46.147Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1096","module":"KalmanFilter","timestamp":"2025-10-04T23:40:46.147Z"}
{"level":"debug","message":"Predicción Kalman: 2.0542998176348997 (Confianza: 0.875)","module":"KalmanFilter","timestamp":"2025-10-04T23:40:46.147Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:40:46.919Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:40:46.919Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:40:46.919Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:40:46.994Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:41:21.598Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0398730512857983,"middle":2.0504900000000004,"upper":2.0611069487142024},"ema":{"ema21":2.0517253441189425,"ema50":2.050961181472942,"ema9":2.05402138333776},"macd":{"histogram":0.0001983497017286949,"macd":0.0019834970172869504,"signal":0.0017851473155582555},"rsi":61.01190476190467,"volume":{"avg":106643.68,"current":131171,"ratio":1.2299931885321287}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo de 30 y el MACD es bullish, lo que indica una posible tendencia ascendente. Además, el precio actual está por debajo ","symbol":"ASTERUSDT","timestamp":1759621281602}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621281605","module":"BybitClient","timestamp":"2025-10-04T23:41:21.607Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:41:21.601Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:41:21.601Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:41:21.607Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621162132%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"178.2057\",\"markPrice\":\"2.0604\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.10244049\",\"seq\":140697266492588,\"updatedTime\":\"1759621162132\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0493\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621283141}","module":"BybitClient","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10671 ASTERUSDT | PnL: 0.82%","module":"TradingStrategy","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621282790","module":"BybitClient","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"2.0542188\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 2.05 (Max alcanzado: 2.06)","module":"TradingStrategy","timestamp":"2025-10-04T23:41:22.790Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759621283532}","module":"BybitClient","timestamp":"2025-10-04T23:41:23.180Z"}
{"level":"info","message":"Stop Loss actualizado para ASTERUSDT: SL=2.0542188","module":"BybitClient","timestamp":"2025-10-04T23:41:23.180Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:41:23.567Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:41:23.568Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y espe...","module":"OllamaClient","timestamp":"2025-10-04T23:41:44.595Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y esperar a ver...","module":"TradingStrategy","timestamp":"2025-10-04T23:41:44.597Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621304598","module":"BybitClient","timestamp":"2025-10-04T23:41:44.601Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:41:44.597Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:41:44.597Z"}
{"level":"info","message":"⚠️  Estrategia activada: PROFIT_LADDER_60 - PnL 0.82% - scalping: tomar profit parcial","module":"TradingStrategy","timestamp":"2025-10-04T23:41:44.598Z"}
{"level":"info","message":"🟡 CERRANDO 50% DE POSICIÓN: PnL 0.82% - scalping: tomar profit parcial","module":"TradingStrategy","timestamp":"2025-10-04T23:41:44.598Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:41:44.601Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:41:44.972Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621283531%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"202.749\",\"markPrice\":\"2.0627\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.45340968\",\"seq\":140697266492588,\"updatedTime\":\"1759621283531\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0542\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621305800}","module":"BybitClient","timestamp":"2025-10-04T23:41:45.458Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:41:45.459Z"}
{"level":"info","message":"Cerrando 50% de posición Buy ASTERUSDT: 5335.5 unidades","module":"BybitClient","timestamp":"2025-10-04T23:41:45.459Z"}
{"level":"info","message":"Ejecutando orden: Sell 5335.5 ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:41:45.459Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621305459","module":"BybitClient","timestamp":"2025-10-04T23:41:45.459Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"5335.5\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-04T23:41:45.459Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:41:45.832Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:41:45.833Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:41:45.833Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"Qty invalid\",\"result\":{},\"retExtInfo\":{},\"time\":1759621306202}","module":"BybitClient","timestamp":"2025-10-04T23:41:45.850Z"}
{"error":"Error: Error cerrando posición: Error ejecutando trade: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:347:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error ejecutando acción de salida:","module":"TradingStrategy","timestamp":"2025-10-04T23:41:45.890Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: Qty invalid (Code: 10001)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"5335.5","side":"Sell","symbol":"ASTERUSDT","timeInForce":"IOC"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T23:41:45.850Z"}
{"error":"Error: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:411:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:147:24)\n    at async BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:340:14)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-04T23:41:45.870Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:163:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:340:14)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error cerrando posición:","module":"BybitClient","timestamp":"2025-10-04T23:41:45.889Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621305890","module":"BybitClient","timestamp":"2025-10-04T23:41:45.890Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:41:45.890Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621283531%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"202.749\",\"markPrice\":\"2.0627\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.45340968\",\"seq\":140697266492588,\"updatedTime\":\"1759621283531\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0542\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621306633}","module":"BybitClient","timestamp":"2025-10-04T23:41:46.280Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:41:46.281Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:41:46.280Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:41:46.281Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:42:44.975Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:42:46.113Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:42:46.114Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:42:46.113Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:42:46.282Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1140","module":"KalmanFilter","timestamp":"2025-10-04T23:42:46.282Z"}
{"level":"debug","message":"Predicción Kalman: 2.0597034486213963 (Confianza: 0.851)","module":"KalmanFilter","timestamp":"2025-10-04T23:42:46.283Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:42:46.686Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:43:39.288Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.049677934370195,"middle":2.0576849999999998,"upper":2.0656920656298046},"ema":{"ema21":2.057704406329857,"ema50":2.054582595307526,"ema9":2.059989172546412},"macd":{"histogram":0.000254687700285272,"macd":0.002546877002852721,"signal":0.002292189302567449},"rsi":54.75578406169626,"volume":{"avg":99710.7,"current":80766,"ratio":0.8100033396616412}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI < 30 y MACD bullish es muy fuerte, indicando una posible inflexión up en el mercado. Además, la predicción de Kalman es positiva con alta confianza, lo que sugiere una tendencia ascendente. Considerando el leverage alto (10-50x) y el alto volumen, es apropiado tomar posición en este caso.","symbol":"ASTERUSDT","timestamp":1759621419289}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621419289","module":"BybitClient","timestamp":"2025-10-04T23:43:39.292Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:43:39.342Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621283531%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"204.8832\",\"markPrice\":\"2.0629\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.48392874\",\"seq\":140697266492588,\"updatedTime\":\"1759621283531\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0542\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621420817}","module":"BybitClient","timestamp":"2025-10-04T23:43:40.467Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10671 ASTERUSDT | PnL: 0.94%","module":"TradingStrategy","timestamp":"2025-10-04T23:43:40.468Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:43:40.468Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621420469","module":"BybitClient","timestamp":"2025-10-04T23:43:40.469Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"2.0567113\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-04T23:43:40.469Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 2.06 (Max alcanzado: 2.06)","module":"TradingStrategy","timestamp":"2025-10-04T23:43:40.469Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759621421220}","module":"BybitClient","timestamp":"2025-10-04T23:43:40.870Z"}
{"level":"info","message":"Stop Loss actualizado para ASTERUSDT: SL=2.0567113","module":"BybitClient","timestamp":"2025-10-04T23:43:40.870Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:43:41.269Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:43:41.269Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:43:44.972Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:43:45.371Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:43:45.371Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:43:45.371Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y espe...","module":"OllamaClient","timestamp":"2025-10-04T23:44:09.697Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y esperar a ver...","module":"TradingStrategy","timestamp":"2025-10-04T23:44:09.698Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621449699","module":"BybitClient","timestamp":"2025-10-04T23:44:09.699Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:44:09.698Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:44:09.698Z"}
{"level":"info","message":"⚠️  Estrategia activada: PROFIT_LADDER_60 - PnL 0.94% - scalping: tomar profit parcial","module":"TradingStrategy","timestamp":"2025-10-04T23:44:09.698Z"}
{"level":"info","message":"🟡 CERRANDO 50% DE POSICIÓN: PnL 0.94% - scalping: tomar profit parcial","module":"TradingStrategy","timestamp":"2025-10-04T23:44:09.698Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:44:09.699Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621421219%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"212.3529\",\"markPrice\":\"2.0636\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.59074545\",\"seq\":140697266492588,\"updatedTime\":\"1759621421219\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0567\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621451206}","module":"BybitClient","timestamp":"2025-10-04T23:44:10.854Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:44:10.855Z"}
{"level":"info","message":"Cerrando 50% de posición Buy ASTERUSDT: 5335.5 unidades","module":"BybitClient","timestamp":"2025-10-04T23:44:10.855Z"}
{"level":"info","message":"Ejecutando orden: Sell 5335.5 ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:44:10.855Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621450855","module":"BybitClient","timestamp":"2025-10-04T23:44:10.855Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"5335.5\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-04T23:44:10.855Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"Qty invalid\",\"result\":{},\"retExtInfo\":{},\"time\":1759621451616}","module":"BybitClient","timestamp":"2025-10-04T23:44:11.264Z"}
{"error":"Error: Error cerrando posición: Error ejecutando trade: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:347:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error ejecutando acción de salida:","module":"TradingStrategy","timestamp":"2025-10-04T23:44:11.269Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: Qty invalid (Code: 10001)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"5335.5","side":"Sell","symbol":"ASTERUSDT","timeInForce":"IOC"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-04T23:44:11.265Z"}
{"error":"Error: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:411:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:147:24)\n    at async BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:340:14)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-04T23:44:11.268Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:163:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.closePosition (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:340:14)\n    at async TradingStrategy.executeExitAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:550:11)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:360:13)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error cerrando posición:","module":"BybitClient","timestamp":"2025-10-04T23:44:11.269Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621451270","module":"BybitClient","timestamp":"2025-10-04T23:44:11.270Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:44:11.270Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621421219%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0437\",\"liqPrice\":\"1.9315\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0708\",\"positionValue\":\"21808.3227\",\"isReduceOnly\":false,\"positionIMByMp\":\"1465.08333707\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9299\",\"unrealisedPnl\":\"212.3529\",\"markPrice\":\"2.0636\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"16.27048275\",\"positionMM\":\"267.55409899\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1465.08333707\",\"positionMMByMp\":\"270.59074545\",\"seq\":140697266492588,\"updatedTime\":\"1759621421219\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1465.08333707\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"16.27048275\",\"size\":\"10671\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0567\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621452359}","module":"BybitClient","timestamp":"2025-10-04T23:44:12.008Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:44:12.009Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:44:12.009Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:44:12.009Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:44:44.979Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:44:46.206Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:44:46.207Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:44:46.207Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:45:12.012Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0809","module":"KalmanFilter","timestamp":"2025-10-04T23:45:12.013Z"}
{"level":"debug","message":"Predicción Kalman: 2.0630924025797577 (Confianza: 0.862)","module":"KalmanFilter","timestamp":"2025-10-04T23:45:12.014Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:45:13.992Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:45:44.988Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:45:46.121Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:45:46.178Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:45:46.178Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-04T23:45:49.883Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759621549966}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-04T23:45:49.966Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-04T23:45:49.971Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759621555671}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-04T23:45:55.545Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T23:45:55.527Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:45:55.534Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T23:45:55.541Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:45:55.539Z"}
{"component":"TradingStrategy","interval":"1m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"ASTERUSDT","timestamp":1759621555865}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-04T23:45:55.604Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-04T23:45:55.614Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:45:55.609Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:45:55.620Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-04T23:45:55.656Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-04T23:45:55.864Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-04T23:45:55.864Z"}
{"level":"info","message":"Iniciando estrategia de trading para ASTERUSDT (1m)","module":"TradingSystem","timestamp":"2025-10-04T23:45:55.864Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-04T23:45:55.546Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-04T23:45:55.546Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-04T23:45:55.546Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-04T23:45:55.547Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-04T23:45:55.596Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-04T23:45:55.597Z"}
{"level":"info","message":"7 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-04T23:45:55.597Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-04T23:45:55.899Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-04T23:45:56.510Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T23:45:57.740Z"}
{"level":"info","message":"Iniciando recopilación de datos para ASTERUSDT (1m)","module":"DataManager","timestamp":"2025-10-04T23:45:57.741Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 200","module":"BybitClient","timestamp":"2025-10-04T23:45:57.741Z"}
{"level":"info","message":"Recopilando datos históricos para ASTERUSDT...","module":"DataManager","timestamp":"2025-10-04T23:45:57.741Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:45:58.155Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para ASTERUSDT","module":"DataManager","timestamp":"2025-10-04T23:45:58.156Z"}
{"level":"info","message":"Datos suficientes recopilados para ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-04T23:45:58.157Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:45:58.158Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0906","module":"KalmanFilter","timestamp":"2025-10-04T23:45:58.158Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-04T23:45:58.159Z"}
{"level":"info","message":"Velas obtenidas: 200 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:45:58.156Z"}
{"level":"info","message":"Recopilación de datos iniciada para ASTERUSDT","module":"DataManager","timestamp":"2025-10-04T23:45:58.157Z"}
{"level":"debug","message":"Predicción Kalman: 2.0627024186632266 (Confianza: 0.892)","module":"KalmanFilter","timestamp":"2025-10-04T23:45:58.159Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:45:58.554Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:46:25.988Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.0414407068286486,"middle":2.055535,"upper":2.069629293171351},"ema":{"ema21":2.05699281817975,"ema50":2.0558610161762125,"ema9":2.062000242620607},"macd":{"histogram":0.00042654402337056726,"macd":0.004265440233705675,"signal":0.003838896210335108},"rsi":65.36082474226802,"volume":{"avg":114647.88,"current":132763,"ratio":1.1580065850323618}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, MACD es bullish y el precio actual está aumentando con un cambio reciente del 0.62%. Además, la Kalman predice un aumento en el precio con una confianza del 89.2%","symbol":"ASTERUSDT","timestamp":1759621585990}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621585991","module":"BybitClient","timestamp":"2025-10-04T23:46:25.993Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:46:25.994Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621576367%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0644\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"233.57622069\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266507497,\"updatedTime\":\"1759621576367\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621588737}","module":"BybitClient","timestamp":"2025-10-04T23:46:28.381Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:46:28.382Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621588382","module":"BybitClient","timestamp":"2025-10-04T23:46:28.382Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:46:28.382Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621576367%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0646\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"233.57622069\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266507497,\"updatedTime\":\"1759621576367\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621589471}","module":"BybitClient","timestamp":"2025-10-04T23:46:29.114Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-04T23:46:29.114Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:46:29.114Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621589115","module":"BybitClient","timestamp":"2025-10-04T23:46:29.115Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:46:29.115Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214661.6493863\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214661.6493863\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49992.57375284\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121080.80122556\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4490.64997\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"39076.95272991\",\"totalPositionMM\":\"0\",\"usdValue\":\"39097.6244379\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"39076.95272991\",\"cumRealisedPnl\":\"-11830.65016009\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759621590202}","module":"BybitClient","timestamp":"2025-10-04T23:46:29.903Z"}
{"level":"info","message":"Balance disponible: $39076.95, Precio: $2.0685","module":"TradingStrategy","timestamp":"2025-10-04T23:46:29.904Z"}
{"level":"info","message":"Balance obtenido - Total: $214661.65, Disponible: $39076.95","module":"BybitClient","timestamp":"2025-10-04T23:46:29.904Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.722Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-04T23:46:30.724Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621590724","module":"BybitClient","timestamp":"2025-10-04T23:46:30.724Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1953.85","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.722Z"}
{"level":"info","message":"Position value: $29307.71, Quantity raw: 14168.583296","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.722Z"}
{"level":"info","message":"Cantidad final calculada: 14168 ASTER (valor: $29306.51)","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.722Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14168","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"info","message":"Generando señal de trading: BUY 14168 ASTERUSDT @ 2.0685 (SL: 2.0560889999999996, TP: 2.0920809)","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14168 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14168,\"stopLoss\":2.0560889999999996,\"takeProfit\":2.0920809,\"timestamp\":1759621590723,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo del 30, MACD es bullish y el precio actual está aumentando con un cambio reciente del 0.62%. Además, la Kalman predice un aumento en el precio con una confianza del 89.2%\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-04T23:46:30.723Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-04T23:46:30.724Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214661.6493863\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214661.6493863\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49992.57375284\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121080.80122556\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4490.64997\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"39076.95272991\",\"totalPositionMM\":\"0\",\"usdValue\":\"39097.6244379\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"39076.95272991\",\"cumRealisedPnl\":\"-11830.65016009\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759621591810}","module":"BybitClient","timestamp":"2025-10-04T23:46:31.542Z"}
{"level":"info","message":"Balance obtenido - Total: $214661.65, Disponible: $39076.95","module":"BybitClient","timestamp":"2025-10-04T23:46:31.542Z"}
{"level":"info","message":"Validando posición: Cantidad=14168, Precio=2.06, Valor=$29245.59","module":"RiskManager","timestamp":"2025-10-04T23:46:31.941Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621591941","module":"BybitClient","timestamp":"2025-10-04T23:46:31.941Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:46:31.941Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621576367%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0638\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"233.57622069\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266507497,\"updatedTime\":\"1759621576367\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621592699}","module":"BybitClient","timestamp":"2025-10-04T23:46:32.342Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-04T23:46:32.342Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-04T23:46:33.076Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:46:33.896Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:46:33.897Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-04T23:46:34.296Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3016197597095234}","module":"TradingStrategy","timestamp":"2025-10-04T23:46:34.296Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621594297","module":"BybitClient","timestamp":"2025-10-04T23:46:34.297Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-04T23:46:34.296Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-04T23:46:34.297Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759621595055}","module":"BybitClient","timestamp":"2025-10-04T23:46:34.697Z"}
{"level":"warn","message":"Bybit warning (ignorado): leverage not modified (Code: 110043)","module":"BybitClient","timestamp":"2025-10-04T23:46:34.697Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:46:34.697Z"}
{"level":"info","message":"Ejecutando orden: Buy 14168 ASTERUSDT | SL: 2.0560889999999996 | TP: 2.0920809","module":"BybitClient","timestamp":"2025-10-04T23:46:34.697Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621594697","module":"BybitClient","timestamp":"2025-10-04T23:46:34.697Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14168\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0560889999999996\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.0920809\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-04T23:46:34.698Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"5fe680b0-c2b0-40e7-95dc-84fcce9c5e7f\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759621595455}","module":"BybitClient","timestamp":"2025-10-04T23:46:35.097Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14168,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759621595098}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-04T23:46:35.098Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 5fe680b0-c2b0-40e7-95dc-84fcce9c5e7f","module":"BybitClient","timestamp":"2025-10-04T23:46:35.098Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:46:58.158Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:47:00.622Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:47:00.622Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:47:00.622Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:47:35.102Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1077","module":"KalmanFilter","timestamp":"2025-10-04T23:47:35.107Z"}
{"level":"debug","message":"Predicción Kalman: 2.0652952890917287 (Confianza: 0.888)","module":"KalmanFilter","timestamp":"2025-10-04T23:47:35.108Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:47:36.320Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:47:58.158Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:47:59.558Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:47:59.558Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:47:59.558Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:48:02.483Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.042472083962362,"middle":2.05917,"upper":2.075867916037638},"ema":{"ema21":2.0609984082546435,"ema50":2.057955916398738,"ema9":2.065901103501924},"macd":{"histogram":0.0004788902874479197,"macd":0.004788902874479195,"signal":0.004310012587031275},"rsi":72.6315789473685,"volume":{"avg":115565.87,"current":264,"ratio":0.0022844114789253955}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI is overbought and MACD is bullish, indicating a potential buying opportunity. Kalman prediction also suggests a slight increase in price","symbol":"ASTERUSDT","timestamp":1759621682484}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621682485","module":"BybitClient","timestamp":"2025-10-04T23:48:02.485Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:48:02.484Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:48:02.484Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:48:02.485Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"36.8368\",\"markPrice\":\"2.0662\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"378.12564399\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621683245}","module":"BybitClient","timestamp":"2025-10-04T23:48:02.896Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14168 ASTERUSDT | PnL: 0.13%","module":"TradingStrategy","timestamp":"2025-10-04T23:48:02.896Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:48:02.896Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:48:03.630Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:48:03.631Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-04T23:48:25.563Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir apr...","module":"TradingStrategy","timestamp":"2025-10-04T23:48:25.564Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621705565","module":"BybitClient","timestamp":"2025-10-04T23:48:25.566Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:48:25.564Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:48:25.565Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:48:25.566Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"12.7512\",\"markPrice\":\"2.0645\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"377.78121991\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621708014}","module":"BybitClient","timestamp":"2025-10-04T23:48:27.664Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:48:27.664Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:48:27.664Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:48:27.664Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:48:58.158Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:49:00.225Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:49:00.226Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:49:00.226Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:49:27.666Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0771","module":"KalmanFilter","timestamp":"2025-10-04T23:49:27.666Z"}
{"level":"debug","message":"Predicción Kalman: 2.0655794441677147 (Confianza: 0.871)","module":"KalmanFilter","timestamp":"2025-10-04T23:49:27.666Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:49:28.803Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:49:58.157Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:50:00.539Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:50:00.539Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:50:00.539Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:50:02.520Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0617111621181494,"middle":2.066325,"upper":2.0709388378818505},"ema":{"ema21":2.0643977891456244,"ema50":2.0604769596172416,"ema9":2.066215757341536},"macd":{"histogram":0.0002651284883568028,"macd":0.002651284883568028,"signal":0.0023861563952112252},"rsi":50.86206896551714,"volume":{"avg":115786.33,"current":0,"ratio":0}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo de 30 y el MACD es bullish, lo que indica una posible tendencia ascendente. Además, la Kalman predicts an increase wi","symbol":"ASTERUSDT","timestamp":1759621802524}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621802524","module":"BybitClient","timestamp":"2025-10-04T23:50:02.524Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:50:02.520Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:50:02.520Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:50:02.524Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"35.42\",\"markPrice\":\"2.0661\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"378.10538375\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621803290}","module":"BybitClient","timestamp":"2025-10-04T23:50:02.936Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14168 ASTERUSDT | PnL: 0.12%","module":"TradingStrategy","timestamp":"2025-10-04T23:50:02.937Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:50:02.937Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:50:03.343Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:50:03.343Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-04T23:50:22.756Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir apr...","module":"TradingStrategy","timestamp":"2025-10-04T23:50:22.760Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621822760","module":"BybitClient","timestamp":"2025-10-04T23:50:22.761Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:50:22.759Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:50:22.760Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:50:22.761Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"49.588\",\"markPrice\":\"2.0671\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"378.30798615\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621825159}","module":"BybitClient","timestamp":"2025-10-04T23:50:24.805Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:50:24.805Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:50:24.805Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:50:24.805Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:50:58.159Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:50:59.828Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:50:59.828Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:50:59.828Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:51:24.807Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0684","module":"KalmanFilter","timestamp":"2025-10-04T23:51:24.808Z"}
{"level":"debug","message":"Predicción Kalman: 2.065875781284758 (Confianza: 0.862)","module":"KalmanFilter","timestamp":"2025-10-04T23:51:24.808Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:51:26.864Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:51:58.160Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:51:59.657Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:51:59.657Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:51:59.657Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:52:07.326Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0634896078682616,"middle":2.066549999999999,"upper":2.0696103921317364},"ema":{"ema21":2.065596157057092,"ema50":2.0622243441261667,"ema9":2.0662649208473143},"macd":{"histogram":0.00012748845259737953,"macd":0.0012748845259737962,"signal":0.0011473960733764167},"rsi":46.6101694915258,"volume":{"avg":111033.65,"current":48564,"ratio":0.43738092010845364}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La señal de RSI es baja (46.61) y la de MACD es positiva (0.0013) con un signal bullish (0.0011), lo que sugiere una posible tendencia ascen","symbol":"ASTERUSDT","timestamp":1759621927327}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621927328","module":"BybitClient","timestamp":"2025-10-04T23:52:07.328Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:52:07.327Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:52:07.327Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:52:07.328Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"99.176\",\"markPrice\":\"2.0706\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"379.01709455\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621929404}","module":"BybitClient","timestamp":"2025-10-04T23:52:09.048Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14168 ASTERUSDT | PnL: 0.34%","module":"TradingStrategy","timestamp":"2025-10-04T23:52:09.049Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:52:09.049Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:52:09.869Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:52:09.870Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-04T23:52:30.939Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-04T23:52:30.945Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621950947","module":"BybitClient","timestamp":"2025-10-04T23:52:30.950Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:52:30.944Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:52:30.945Z"}
{"level":"info","message":"⚠️  Estrategia activada: PROFIT_LADDER_30 - PnL 0.34% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-04T23:52:30.945Z"}
{"level":"info","message":"🟢 CERRANDO 25% DE POSICIÓN: PnL 0.34% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-04T23:52:30.946Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:52:30.951Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621595454%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9517\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"29237.0848\",\"isReduceOnly\":false,\"positionIMByMp\":\"1964.14764924\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.95\",\"unrealisedPnl\":\"102.0096\",\"markPrice\":\"2.0708\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"217.49582405\",\"positionMM\":\"377.59887776\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1964.14764924\",\"positionMMByMp\":\"379.05761503\",\"seq\":140697266508045,\"updatedTime\":\"1759621595454\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1964.14764924\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-16.08039664\",\"size\":\"14168\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621952450}","module":"BybitClient","timestamp":"2025-10-04T23:52:32.094Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:52:32.095Z"}
{"level":"info","message":"Cerrando 25% de posición Buy ASTERUSDT: 3542 unidades (raw: 3542.0000, stepSize: 1)","module":"BybitClient","timestamp":"2025-10-04T23:52:32.909Z"}
{"level":"info","message":"Ejecutando orden: Sell 3542 ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:52:32.910Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759621952910","module":"BybitClient","timestamp":"2025-10-04T23:52:32.910Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"3542\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-04T23:52:32.910Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"f81dcd97-8ae0-4f63-9296-e212e712dd41\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759621954002}","module":"BybitClient","timestamp":"2025-10-04T23:52:33.730Z"}
{"level":"info","message":"💰 25% cerrado. PnL parcial: 24.79 USDT","module":"TradingStrategy","timestamp":"2025-10-04T23:52:33.731Z"}
{"level":"info","message":"Orden ejecutada exitosamente: f81dcd97-8ae0-4f63-9296-e212e712dd41","module":"BybitClient","timestamp":"2025-10-04T23:52:33.731Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759621953731","module":"BybitClient","timestamp":"2025-10-04T23:52:33.731Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:52:33.731Z"}
{"level":"info","message":"✅ Acción ejecutada exitosamente","module":"TradingStrategy","timestamp":"2025-10-04T23:52:33.731Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"79.695\",\"markPrice\":\"2.0711\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"270.46379681\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759621954497}","module":"BybitClient","timestamp":"2025-10-04T23:52:34.140Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:52:34.141Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:52:34.141Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:52:34.141Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:52:58.160Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:53:00.246Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:53:00.246Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:53:00.246Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:53:34.143Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-04T23:53:34.144Z"}
{"level":"debug","message":"Predicción Kalman: 2.0702793550042746 (Confianza: 0.878)","module":"KalmanFilter","timestamp":"2025-10-04T23:53:34.145Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:53:36.169Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:53:58.161Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:53:59.542Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:53:59.542Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:53:59.542Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:54:09.295Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.062867535140704,"middle":2.067225,"upper":2.071582464859296},"ema":{"ema21":2.0674054604046206,"ema50":2.0642756766177115,"ema9":2.0688754960223825},"macd":{"histogram":0.00015781993245664858,"macd":0.0015781993245664871,"signal":0.0014203793921098386},"rsi":53.43511450381724,"volume":{"avg":95544.5,"current":10097,"ratio":0.10567850582712768}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo de 30 y el MACD está en un signal bullish, lo que sugiere una posible tendencia ascendente. Además, el Kalman predice","symbol":"ASTERUSDT","timestamp":1759622049299}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622049299","module":"BybitClient","timestamp":"2025-10-04T23:54:09.300Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:54:09.299Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:54:09.299Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:54:09.300Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"51.0048\",\"markPrice\":\"2.0684\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"270.05352695\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622050567}","module":"BybitClient","timestamp":"2025-10-04T23:54:10.207Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10626 ASTERUSDT | PnL: 0.23%","module":"TradingStrategy","timestamp":"2025-10-04T23:54:10.208Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:54:10.208Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:54:10.604Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:54:10.604Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-04T23:54:31.208Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-04T23:54:31.209Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622071209","module":"BybitClient","timestamp":"2025-10-04T23:54:31.209Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:54:31.209Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:54:31.209Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:54:31.209Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"37.191\",\"markPrice\":\"2.0671\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"269.85598961\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622072759}","module":"BybitClient","timestamp":"2025-10-04T23:54:32.390Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:54:32.391Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:54:32.391Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:54:32.391Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:54:58.161Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:54:59.238Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:54:59.238Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:54:59.238Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:55:32.393Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0557","module":"KalmanFilter","timestamp":"2025-10-04T23:55:32.394Z"}
{"level":"debug","message":"Predicción Kalman: 2.0689803549998373 (Confianza: 0.879)","module":"KalmanFilter","timestamp":"2025-10-04T23:55:32.395Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:55:33.830Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:55:58.163Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:55:59.505Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:55:59.508Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:55:59.508Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:56:03.128Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.063354176654553,"middle":2.0683949999999998,"upper":2.0734358233454464},"ema":{"ema21":2.0682371647956,"ema50":2.065732048227601,"ema9":2.068629322293061},"macd":{"histogram":0.00007627325346932774,"macd":0.0007627325346932778,"signal":0.0006864592812239501},"rsi":48.45938375350128,"volume":{"avg":93328.42,"current":55322,"ratio":0.5927669192299624}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, MACD es bullish y el volumen es alto, lo que indica una posible recuperación del precio. Además, la predicció","symbol":"ASTERUSDT","timestamp":1759622163129}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622163129","module":"BybitClient","timestamp":"2025-10-04T23:56:03.129Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:56:03.128Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:56:03.128Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:56:03.129Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"6.3756\",\"markPrice\":\"2.0642\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"269.41532939\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622163885}","module":"BybitClient","timestamp":"2025-10-04T23:56:03.515Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10626 ASTERUSDT | PnL: 0.03%","module":"TradingStrategy","timestamp":"2025-10-04T23:56:03.515Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:56:03.515Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:56:03.896Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:56:03.897Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-04T23:56:23.199Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-04T23:56:23.199Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622183200","module":"BybitClient","timestamp":"2025-10-04T23:56:23.200Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:56:23.199Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:56:23.199Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:56:23.200Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"55.2552\",\"markPrice\":\"2.0688\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"270.11430767\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622185006}","module":"BybitClient","timestamp":"2025-10-04T23:56:24.649Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:56:24.652Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:56:24.652Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:56:24.652Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:56:58.163Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:56:59.558Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:56:59.559Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:56:59.559Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:57:24.654Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0759","module":"KalmanFilter","timestamp":"2025-10-04T23:57:24.655Z"}
{"level":"debug","message":"Predicción Kalman: 2.067042869778218 (Confianza: 0.875)","module":"KalmanFilter","timestamp":"2025-10-04T23:57:24.656Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:57:26.697Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:57:58.164Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:57:59.769Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:57:59.770Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:57:59.770Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-04T23:58:06.979Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0629088518370953,"middle":2.06844,"upper":2.0739711481629044},"ema":{"ema21":2.067994930068396,"ema50":2.0664346091261314,"ema9":2.0677184024125603},"macd":{"histogram":-0.0000010622895485035134,"macd":-0.000010622895485035144,"signal":-0.00000956060593653163},"rsi":53.31950207468883,"volume":{"avg":89924.48,"current":117552,"ratio":1.307230244756489}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759622286980}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622286980","module":"BybitClient","timestamp":"2025-10-04T23:58:06.981Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-04T23:58:06.980Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-04T23:58:06.980Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:58:06.981Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"45.6918\",\"markPrice\":\"2.0679\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"269.97755105\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622288989}","module":"BybitClient","timestamp":"2025-10-04T23:58:08.630Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10626 ASTERUSDT | PnL: 0.21%","module":"TradingStrategy","timestamp":"2025-10-04T23:58:08.631Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:58:08.631Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-04T23:58:09.395Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-04T23:58:09.396Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-04T23:58:38.260Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir apr...","module":"TradingStrategy","timestamp":"2025-10-04T23:58:38.261Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622318280","module":"BybitClient","timestamp":"2025-10-04T23:58:38.281Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-04T23:58:38.261Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-04T23:58:38.261Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:58:38.283Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759621954001%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"4.2504\",\"markPrice\":\"2.064\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"241.4421349\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"269.38493903\",\"seq\":140697266517976,\"updatedTime\":\"1759621954001\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"7.86591421\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622319765}","module":"BybitClient","timestamp":"2025-10-04T23:58:39.400Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-04T23:58:39.400Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-04T23:58:39.400Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-04T23:58:39.400Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:58:58.167Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:58:59.278Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:58:59.279Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:58:59.278Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-04T23:59:39.404Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0886","module":"KalmanFilter","timestamp":"2025-10-04T23:59:39.405Z"}
{"level":"debug","message":"Predicción Kalman: 2.0669517837957767 (Confianza: 0.886)","module":"KalmanFilter","timestamp":"2025-10-04T23:59:39.406Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-04T23:59:40.262Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-04T23:59:58.165Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-04T23:59:59.603Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-04T23:59:59.604Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-04T23:59:59.603Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:00:31.898Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.061869388522833,"middle":2.0674300000000003,"upper":2.0729906114771675},"ema":{"ema21":2.0671787189979725,"ema50":2.066229795624429,"ema9":2.0666628067228237},"macd":{"histogram":-0.00003951388354797022,"macd":-0.0003951388354797025,"signal":-0.0003556249519317323},"rsi":39.06250000000061,"volume":{"avg":90528.2,"current":112068,"ratio":1.2379346988010367}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30 y el MACD es bullish, lo que sugiere una posible tendencia ascendente. Además, el Kalman predice un aumento en el precio con alta confianza. Considerando el leverage alto (10-50x) y la volatilidad alta, es recomendable realizar una compra aggressiva.","symbol":"ASTERUSDT","timestamp":1759622431900}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622431900","module":"BybitClient","timestamp":"2025-10-05T00:00:31.901Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:00:31.901Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622400099%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"-39.3162\",\"markPrice\":\"2.0599\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"240.34675369\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"268.76193665\",\"seq\":140697266530160,\"updatedTime\":\"1759622400099\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"6.770533\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622433665}","module":"BybitClient","timestamp":"2025-10-05T00:00:33.303Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10626 ASTERUSDT | PnL: -0.18%","module":"TradingStrategy","timestamp":"2025-10-05T00:00:33.303Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:00:33.303Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:00:33.710Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:00:33.711Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:00:58.167Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:00:59.048Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:00:59.049Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:00:59.048Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:01:04.464Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:01:04.465Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622464466","module":"BybitClient","timestamp":"2025-10-05T00:01:04.467Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:01:04.465Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:01:04.466Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:01:04.467Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622400099%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0636\",\"liqPrice\":\"1.9504\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.092\",\"positionValue\":\"21927.8136\",\"isReduceOnly\":false,\"positionIMByMp\":\"1473.11073693\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9487\",\"unrealisedPnl\":\"-38.2536\",\"markPrice\":\"2.06\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"240.34675369\",\"positionMM\":\"269.32415832\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1473.11073693\",\"positionMMByMp\":\"268.77713183\",\"seq\":140697266530160,\"updatedTime\":\"1759622400099\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1473.11073693\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"6.770533\",\"size\":\"10626\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.056\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622465709}","module":"BybitClient","timestamp":"2025-10-05T00:01:05.420Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:01:05.421Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:01:05.421Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:01:05.421Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:01:58.172Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:01:59.590Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:01:59.590Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:01:59.590Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:02:05.422Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1280","module":"KalmanFilter","timestamp":"2025-10-05T00:02:05.422Z"}
{"level":"debug","message":"Predicción Kalman: 2.06277825548682 (Confianza: 0.860)","module":"KalmanFilter","timestamp":"2025-10-05T00:02:05.423Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:02:06.270Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:02:31.720Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622551722","module":"BybitClient","timestamp":"2025-10-05T00:02:31.722Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.0580840255584363,"middle":2.0647550000000003,"upper":2.0714259744415644},"ema":{"ema21":2.064408721361888,"ema50":2.065396721119342,"ema9":2.0627850529327008},"macd":{"histogram":-0.00014798781718536867,"macd":-0.001479878171853688,"signal":-0.0013318903546683193},"rsi":45.03464203233289,"volume":{"avg":80577.44,"current":54997,"ratio":0.6825359554733931}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está debajo de 30 y MACD es bullish, indicando una posible recuperación del mercado.","symbol":"ASTERUSDT","timestamp":1759622551721}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:31.722Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622539092%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.056\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"140.1391639\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266534573,\"updatedTime\":\"1759622539092\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622552954}","module":"BybitClient","timestamp":"2025-10-05T00:02:32.584Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:02:32.584Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622552584","module":"BybitClient","timestamp":"2025-10-05T00:02:32.584Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:32.584Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622539092%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0559\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"140.1391639\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266534573,\"updatedTime\":\"1759622539092\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622553344}","module":"BybitClient","timestamp":"2025-10-05T00:02:32.985Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:02:32.986Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:02:32.986Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622552986","module":"BybitClient","timestamp":"2025-10-05T00:02:32.986Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:02:32.986Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214569.89673527\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214569.89673527\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49990.07375165\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121084.70324396\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.605523\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38983.51567312\",\"totalPositionMM\":\"0\",\"usdValue\":\"39003.51421666\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38983.51567312\",\"cumRealisedPnl\":\"-11924.08721688\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622553747}","module":"BybitClient","timestamp":"2025-10-05T00:02:33.390Z"}
{"level":"info","message":"Balance disponible: $38983.52, Precio: $2.0572","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.391Z"}
{"level":"info","message":"Balance obtenido - Total: $214569.90, Disponible: $38983.52","module":"BybitClient","timestamp":"2025-10-05T00:02:33.390Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.778Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622553779","module":"BybitClient","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1949.18","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.778Z"}
{"level":"info","message":"Position value: $29237.64, Quantity raw: 14212.345302","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Cantidad final calculada: 14212 ASTER (valor: $29236.93)","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14212","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Generando señal de trading: BUY 14212 ASTERUSDT @ 2.0572 (SL: 2.0448568, TP: 2.08065208)","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14212 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14212,\"stopLoss\":2.0448568,\"takeProfit\":2.08065208,\"timestamp\":1759622553779,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"RSI está debajo de 30 y MACD es bullish, indicando una posible recuperación del mercado.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"low\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:02:33.779Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:02:33.780Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214569.89673527\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214569.89673527\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49990.07375165\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121084.70324396\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.605523\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38983.51567312\",\"totalPositionMM\":\"0\",\"usdValue\":\"39003.51421666\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38983.51567312\",\"cumRealisedPnl\":\"-11924.08721688\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622554542}","module":"BybitClient","timestamp":"2025-10-05T00:02:34.172Z"}
{"level":"info","message":"Balance obtenido - Total: $214569.90, Disponible: $38983.52","module":"BybitClient","timestamp":"2025-10-05T00:02:34.173Z"}
{"level":"info","message":"Validando posición: Cantidad=14212, Precio=2.06, Valor=$29224.14","module":"RiskManager","timestamp":"2025-10-05T00:02:34.611Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622554611","module":"BybitClient","timestamp":"2025-10-05T00:02:34.611Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:34.611Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622539092%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.056\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"140.1391639\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266534573,\"updatedTime\":\"1759622539092\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622555372}","module":"BybitClient","timestamp":"2025-10-05T00:02:35.001Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:02:35.002Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:02:35.388Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:02:35.776Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:35.777Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-05T00:02:36.167Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3012141713997023}","module":"TradingStrategy","timestamp":"2025-10-05T00:02:36.187Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622556187","module":"BybitClient","timestamp":"2025-10-05T00:02:36.188Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:02:36.187Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T00:02:36.188Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759622556949}","module":"BybitClient","timestamp":"2025-10-05T00:02:36.578Z"}
{"level":"warn","message":"Bybit warning (ignorado): leverage not modified (Code: 110043)","module":"BybitClient","timestamp":"2025-10-05T00:02:36.578Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:36.578Z"}
{"level":"info","message":"Ejecutando orden: Buy 14212 ASTERUSDT | SL: 2.0448568 | TP: 2.08065208","module":"BybitClient","timestamp":"2025-10-05T00:02:36.578Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622556578","module":"BybitClient","timestamp":"2025-10-05T00:02:36.578Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14212\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0448568\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.08065208\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:02:36.579Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"68fe4013-bdea-44c0-8a8a-f587392d0626\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759622557338}","module":"BybitClient","timestamp":"2025-10-05T00:02:36.967Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14212,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759622556968}
{"level":"debug","message":"Trades ejecutados hoy: 2/20","module":"RiskManager","timestamp":"2025-10-05T00:02:36.968Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 68fe4013-bdea-44c0-8a8a-f587392d0626","module":"BybitClient","timestamp":"2025-10-05T00:02:36.968Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:02:58.173Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:02:59.068Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:02:59.069Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:02:59.068Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:03:36.970Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:03:36.971Z"}
{"level":"debug","message":"Predicción Kalman: 2.0603659102042284 (Confianza: 0.841)","module":"KalmanFilter","timestamp":"2025-10-05T00:03:36.971Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:03:38.676Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:03:58.173Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:03:59.500Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:03:59.501Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:03:59.501Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:04:20.101Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0520989603535384,"middle":2.0626800000000003,"upper":2.073261039646462},"ema":{"ema21":2.061665096993963,"ema50":2.063996438738642,"ema9":2.058312318145166},"macd":{"histogram":-0.0002898314570499495,"macd":-0.002898314570499494,"signal":-0.0026084831134495444},"rsi":21.658986175115032,"volume":{"avg":86464.31,"current":403458,"ratio":4.666179606360127}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Bollinger Bands are contracting, which suggests high v","symbol":"ASTERUSDT","timestamp":1759622660105}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622660105","module":"BybitClient","timestamp":"2025-10-05T00:04:20.106Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:04:20.104Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:04:20.104Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:20.106Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622573482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.031\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-25.51889262\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266535506,\"updatedTime\":\"1759622573482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622661584}","module":"BybitClient","timestamp":"2025-10-05T00:04:21.213Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:04:21.214Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622661214","module":"BybitClient","timestamp":"2025-10-05T00:04:21.214Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:21.214Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622573482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.031\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-25.51889262\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266535506,\"updatedTime\":\"1759622573482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622661977}","module":"BybitClient","timestamp":"2025-10-05T00:04:21.606Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T00:04:21.606Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:04:21.606Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622661606","module":"BybitClient","timestamp":"2025-10-05T00:04:21.606Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:04:21.606Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214404.04565381\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214404.04565381\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49990.02375162\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121084.56857776\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.371604\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38817.8576166\",\"totalPositionMM\":\"0\",\"usdValue\":\"38838.08172041\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38817.8576166\",\"cumRealisedPnl\":\"-12089.7452734\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622662370}","module":"BybitClient","timestamp":"2025-10-05T00:04:22.001Z"}
{"level":"info","message":"Balance disponible: $38817.86, Precio: $2.0422","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.001Z"}
{"level":"info","message":"Balance obtenido - Total: $214404.05, Disponible: $38817.86","module":"BybitClient","timestamp":"2025-10-05T00:04:22.001Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622662390","module":"BybitClient","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1940.89","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"info","message":"Position value: $29113.39, Quantity raw: 14255.897176","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"info","message":"Cantidad final calculada: 14255 ASTER (valor: $29111.56)","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14255","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"info","message":"Generando señal de trading: BUY 14255 ASTERUSDT @ 2.0422 (SL: 2.0299468, TP: 2.0624177799999996)","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.389Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14255 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14255,\"stopLoss\":2.0299468,\"takeProfit\":2.0624177799999996,\"timestamp\":1759622662390,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Bollinger Bands are contracting, which suggests high v\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:04:22.390Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214404.04565381\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214404.04565381\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49990.02375162\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121084.56857776\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.371604\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38817.8576166\",\"totalPositionMM\":\"0\",\"usdValue\":\"38838.08172041\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38817.8576166\",\"cumRealisedPnl\":\"-12089.7452734\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622663153}","module":"BybitClient","timestamp":"2025-10-05T00:04:22.783Z"}
{"level":"info","message":"Balance obtenido - Total: $214404.05, Disponible: $38817.86","module":"BybitClient","timestamp":"2025-10-05T00:04:22.784Z"}
{"level":"info","message":"Validando posición: Cantidad=14255, Precio=2.03, Valor=$28959.03","module":"RiskManager","timestamp":"2025-10-05T00:04:23.171Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622663171","module":"BybitClient","timestamp":"2025-10-05T00:04:23.171Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:23.172Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622573482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0309\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-25.51889262\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266535506,\"updatedTime\":\"1759622573482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622663935}","module":"BybitClient","timestamp":"2025-10-05T00:04:23.564Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:04:23.564Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:04:23.958Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:04:24.380Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:24.381Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-05T00:04:24.783Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3049939749194785}","module":"TradingStrategy","timestamp":"2025-10-05T00:04:24.783Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622664783","module":"BybitClient","timestamp":"2025-10-05T00:04:24.783Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:04:24.783Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T00:04:24.783Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759622665544}","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"warn","message":"Bybit warning (ignorado): leverage not modified (Code: 110043)","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"info","message":"Ejecutando orden: Buy 14255 ASTERUSDT | SL: 2.0299468 | TP: 2.0624177799999996","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622665173","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14255\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0299468\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.0624177799999996\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:04:25.173Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"68d33220-7ad8-4c2a-8bd4-136dc63e1cc3\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759622665936}","module":"BybitClient","timestamp":"2025-10-05T00:04:25.565Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14255,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759622665565}
{"level":"debug","message":"Trades ejecutados hoy: 3/20","module":"RiskManager","timestamp":"2025-10-05T00:04:25.565Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 68d33220-7ad8-4c2a-8bd4-136dc63e1cc3","module":"BybitClient","timestamp":"2025-10-05T00:04:25.565Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:04:58.172Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:04:59.336Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:04:59.336Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:04:59.336Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:05:25.569Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:05:25.570Z"}
{"level":"debug","message":"Predicción Kalman: 2.050396697960747 (Confianza: 0.875)","module":"KalmanFilter","timestamp":"2025-10-05T00:05:25.570Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:05:26.447Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:05:53.188Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0352048967353613,"middle":2.05542,"upper":2.0756351032646383},"ema":{"ema21":2.0534777255675043,"ema50":2.0594245553841732,"ema9":2.0468566487681716},"macd":{"histogram":-0.0005963828264214039,"macd":-0.005963828264214044,"signal":-0.00536744543779264},"rsi":35.157699443413605,"volume":{"avg":98123.3,"current":453208,"ratio":4.618760274063347}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI está por debajo de 30 y MACD es bullish, indicando una posible inflexión en la tendencia actual.\",\n  \"suggestedLeverage\": 20-30,\n  \"risk","symbol":"ASTERUSDT","timestamp":1759622753195}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622753196","module":"BybitClient","timestamp":"2025-10-05T00:05:53.197Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:05:53.194Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:05:53.194Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:53.197Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622695384%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0319\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-80.16771592\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266538855,\"updatedTime\":\"1759622695384\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622754701}","module":"BybitClient","timestamp":"2025-10-05T00:05:54.328Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:05:54.328Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622754328","module":"BybitClient","timestamp":"2025-10-05T00:05:54.328Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:54.328Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622695384%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0319\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-80.16771592\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266538855,\"updatedTime\":\"1759622695384\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622755097}","module":"BybitClient","timestamp":"2025-10-05T00:05:54.724Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T00:05:54.724Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:05:54.724Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622754726","module":"BybitClient","timestamp":"2025-10-05T00:05:54.726Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:05:54.726Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214320.8684322\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214320.8684322\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.22375362\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121051.1808249\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.206638\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38763.2087933\",\"totalPositionMM\":\"0\",\"usdValue\":\"38784.25721567\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38763.2087933\",\"cumRealisedPnl\":\"-12144.3940967\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622755496}","module":"BybitClient","timestamp":"2025-10-05T00:05:55.134Z"}
{"level":"info","message":"Balance disponible: $38763.21, Precio: $2.0322","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.135Z"}
{"level":"info","message":"Balance obtenido - Total: $214320.87, Disponible: $38763.21","module":"BybitClient","timestamp":"2025-10-05T00:05:55.134Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622755528","module":"BybitClient","timestamp":"2025-10-05T00:05:55.528Z"}
{"level":"info","message":"Riesgo: 4%, Capital a arriesgar: $1550.53","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"Position value: $18606.34, Quantity raw: 9155.762337","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"Cantidad final calculada: 9155 ASTER (valor: $18604.79)","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 12x, Quantity: 9155","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"Generando señal de trading: BUY 9155 ASTERUSDT @ 2.0322 (SL: 2.0200068, TP: 2.0523187800000002)","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 9155 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.527Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.528Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":12,\"quantity\":9155,\"stopLoss\":2.0200068,\"takeProfit\":2.0523187800000002,\"timestamp\":1759622755527,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"RSI está por debajo de 30 y MACD es bullish, indicando una posible inflexión en la tendencia actual.\\\",\\n  \\\"suggestedLeverage\\\": 20-30,\\n  \\\"risk\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.528Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:05:55.528Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:05:55.528Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214320.8684322\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214320.8684322\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.22375362\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121051.1808249\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4491.206638\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38763.2087933\",\"totalPositionMM\":\"0\",\"usdValue\":\"38784.25721567\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38763.2087933\",\"cumRealisedPnl\":\"-12144.3940967\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622756297}","module":"BybitClient","timestamp":"2025-10-05T00:05:55.924Z"}
{"level":"info","message":"Balance obtenido - Total: $214320.87, Disponible: $38763.21","module":"BybitClient","timestamp":"2025-10-05T00:05:55.925Z"}
{"level":"info","message":"Validando posición: Cantidad=9155, Precio=2.03, Valor=$18591.06","module":"RiskManager","timestamp":"2025-10-05T00:05:56.321Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622756321","module":"BybitClient","timestamp":"2025-10-05T00:05:56.322Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:56.322Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622695384%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0305\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-80.16771592\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266538855,\"updatedTime\":\"1759622695384\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622757091}","module":"BybitClient","timestamp":"2025-10-05T00:05:56.718Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:05:56.718Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:05:57.111Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:05:57.506Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:57.507Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.26","module":"RiskManager","timestamp":"2025-10-05T00:05:57.898Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.2608003332603218}","module":"TradingStrategy","timestamp":"2025-10-05T00:05:57.899Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622757908","module":"BybitClient","timestamp":"2025-10-05T00:05:57.908Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:05:57.908Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"12\",\"sellLeverage\":\"12\"}","module":"BybitClient","timestamp":"2025-10-05T00:05:57.908Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:05:58.173Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759622758676}","module":"BybitClient","timestamp":"2025-10-05T00:05:58.304Z"}
{"level":"info","message":"Leverage establecido a 12x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:58.304Z"}
{"level":"info","message":"Ejecutando orden: Buy 9155 ASTERUSDT | SL: 2.0200068 | TP: 2.0523187800000002","module":"BybitClient","timestamp":"2025-10-05T00:05:58.304Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622758304","module":"BybitClient","timestamp":"2025-10-05T00:05:58.304Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"9155\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0200068\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.0523187800000002\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:05:58.304Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"4887d12d-41c9-4140-ae91-598be11ae27e\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759622759072}","module":"BybitClient","timestamp":"2025-10-05T00:05:58.699Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":9155,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759622758700}
{"level":"debug","message":"Trades ejecutados hoy: 4/20","module":"RiskManager","timestamp":"2025-10-05T00:05:58.700Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 4887d12d-41c9-4140-ae91-598be11ae27e","module":"BybitClient","timestamp":"2025-10-05T00:05:58.700Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:05:59.340Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:05:59.340Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:05:59.340Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:06:58.173Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:06:58.701Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:06:58.702Z"}
{"level":"debug","message":"Predicción Kalman: 2.044873867514962 (Confianza: 0.851)","module":"KalmanFilter","timestamp":"2025-10-05T00:06:58.702Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:06:59.908Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:06:59.909Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:06:59.909Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:06:59.912Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:07:47.925Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.0266520201812983,"middle":2.05004,"upper":2.073427979818702},"ema":{"ema21":2.0483422914210156,"ema50":2.0560471545489496,"ema9":2.0410714266682697},"macd":{"histogram":-0.0006955049267679311,"macd":-0.006955049267679314,"signal":-0.006259544340911383},"rsi":38.73605947955387,"volume":{"avg":106737.11,"current":258093,"ratio":2.4180249961798665}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo de 30 y el MACD es bullish, lo que sugiere una posible tendencia ascendente. Además, el Kalman predice un aumento en el precio con alta confianza. Considerando el alto volumen y el leverage alto, es apropiado tomar una posición de compra con una confianza del 85%","symbol":"ASTERUSDT","timestamp":1759622868559}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622868560","module":"BybitClient","timestamp":"2025-10-05T00:07:48.560Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:48.561Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622790482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0181\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-204.0195313\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266541486,\"updatedTime\":\"1759622790482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622870041}","module":"BybitClient","timestamp":"2025-10-05T00:07:49.667Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:07:49.714Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622869714","module":"BybitClient","timestamp":"2025-10-05T00:07:49.714Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:49.714Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622790482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0181\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-204.0195313\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266541486,\"updatedTime\":\"1759622790482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622870486}","module":"BybitClient","timestamp":"2025-10-05T00:07:50.106Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.106Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:07:50.106Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622870106","module":"BybitClient","timestamp":"2025-10-05T00:07:50.106Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:07:50.107Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214180.70463021\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214180.70463021\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.97375493\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121032.20995646\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4488.903048\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38639.35697792\",\"totalPositionMM\":\"0\",\"usdValue\":\"38662.61787082\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38639.35697792\",\"cumRealisedPnl\":\"-12268.24591208\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622870879}","module":"BybitClient","timestamp":"2025-10-05T00:07:50.501Z"}
{"level":"info","message":"Balance disponible: $38639.36, Precio: $2.0209","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.501Z"}
{"level":"info","message":"Balance obtenido - Total: $214180.70, Disponible: $38639.36","module":"BybitClient","timestamp":"2025-10-05T00:07:50.501Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.891Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622870893","module":"BybitClient","timestamp":"2025-10-05T00:07:50.893Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2189.56","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Position value: $37222.58, Quantity raw: 18418.813675","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Cantidad final calculada: 18418 ASTER (valor: $37220.94)","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 18418","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Generando señal de trading: BUY 18418 ASTERUSDT @ 2.0209 (SL: 2.0087746, TP: 2.04393826)","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 18418 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":18418,\"stopLoss\":2.0087746,\"takeProfit\":2.04393826,\"timestamp\":1759622870892,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo de 30 y el MACD es bullish, lo que sugiere una posible tendencia ascendente. Además, el Kalman predice un aumento en el precio con alta confianza. Considerando el alto volumen y el leverage alto, es apropiado tomar una posición de compra con una confianza del 85%\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:07:50.892Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:07:50.893Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214180.70463021\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214180.70463021\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.97375493\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121032.20995646\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4488.903048\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38639.35697792\",\"totalPositionMM\":\"0\",\"usdValue\":\"38662.61787082\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38639.35697792\",\"cumRealisedPnl\":\"-12268.24591208\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759622871666}","module":"BybitClient","timestamp":"2025-10-05T00:07:51.287Z"}
{"level":"info","message":"Balance obtenido - Total: $214180.70, Disponible: $38639.36","module":"BybitClient","timestamp":"2025-10-05T00:07:51.372Z"}
{"level":"info","message":"Validando posición: Cantidad=18418, Precio=2.02, Valor=$37173.05","module":"RiskManager","timestamp":"2025-10-05T00:07:51.765Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759622871765","module":"BybitClient","timestamp":"2025-10-05T00:07:51.765Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:51.765Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622790482%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0179\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-204.0195313\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266541486,\"updatedTime\":\"1759622790482\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759622872537}","module":"BybitClient","timestamp":"2025-10-05T00:07:52.157Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:07:52.157Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:07:52.552Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:07:52.952Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:52.952Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.32","module":"RiskManager","timestamp":"2025-10-05T00:07:53.341Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.31780696500890987}","module":"TradingStrategy","timestamp":"2025-10-05T00:07:53.341Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622873355","module":"BybitClient","timestamp":"2025-10-05T00:07:53.355Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:07:53.354Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"17\",\"sellLeverage\":\"17\"}","module":"BybitClient","timestamp":"2025-10-05T00:07:53.355Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759622874127}","module":"BybitClient","timestamp":"2025-10-05T00:07:53.755Z"}
{"level":"info","message":"Leverage establecido a 17x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:53.755Z"}
{"level":"info","message":"Ejecutando orden: Buy 18418 ASTERUSDT | SL: 2.0087746 | TP: 2.04393826","module":"BybitClient","timestamp":"2025-10-05T00:07:53.767Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759622873767","module":"BybitClient","timestamp":"2025-10-05T00:07:53.767Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"18418\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0087746\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.04393826\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:07:53.767Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"7d21240f-afc4-460e-a701-c15205d6ec9e\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759622874539}","module":"BybitClient","timestamp":"2025-10-05T00:07:54.159Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":18418,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759622874159}
{"level":"debug","message":"Trades ejecutados hoy: 5/20","module":"RiskManager","timestamp":"2025-10-05T00:07:54.159Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 7d21240f-afc4-460e-a701-c15205d6ec9e","module":"BybitClient","timestamp":"2025-10-05T00:07:54.159Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:07:58.173Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:07:58.564Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:07:58.564Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:07:58.564Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:08:54.162Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:08:54.164Z"}
{"level":"debug","message":"Predicción Kalman: 2.033805554968641 (Confianza: 0.851)","module":"KalmanFilter","timestamp":"2025-10-05T00:08:54.165Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:08:55.553Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:08:58.174Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:08:58.580Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:08:58.580Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:08:58.580Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-05T00:09:39.586Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759622979592}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-05T00:09:39.594Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-05T00:09:39.598Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759623005795}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-05T00:10:05.777Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:10:05.775Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T00:10:05.767Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T00:10:05.776Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:10:05.776Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T00:10:05.787Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T00:10:05.792Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:10:05.792Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:10:05.792Z"}
{"component":"TradingStrategy","interval":"1m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"ASTERUSDT","timestamp":1759623005796}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:10:05.795Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-05T00:10:05.795Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-05T00:10:05.795Z"}
{"level":"info","message":"Iniciando estrategia de trading para ASTERUSDT (1m)","module":"TradingSystem","timestamp":"2025-10-05T00:10:05.795Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-05T00:10:05.778Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-05T00:10:05.778Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-05T00:10:05.778Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-05T00:10:05.778Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-05T00:10:05.785Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-05T00:10:05.785Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data_1m","module":"MCPServer","timestamp":"2025-10-05T00:10:05.785Z"}
{"level":"debug","message":"Herramienta registrada: analyze_candle_pattern","module":"MCPServer","timestamp":"2025-10-05T00:10:05.785Z"}
{"level":"debug","message":"Herramienta registrada: detect_micro_trend","module":"MCPServer","timestamp":"2025-10-05T00:10:05.786Z"}
{"level":"debug","message":"Herramienta registrada: analyze_order_book","module":"MCPServer","timestamp":"2025-10-05T00:10:05.786Z"}
{"level":"info","message":"11 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-05T00:10:05.786Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-05T00:10:05.840Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-05T00:10:06.491Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-05T00:10:07.669Z"}
{"level":"info","message":"Iniciando recopilación de datos para ASTERUSDT (1m)","module":"DataManager","timestamp":"2025-10-05T00:10:07.669Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 200","module":"BybitClient","timestamp":"2025-10-05T00:10:07.674Z"}
{"level":"info","message":"Recopilando datos históricos para ASTERUSDT...","module":"DataManager","timestamp":"2025-10-05T00:10:07.669Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:10:08.258Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para ASTERUSDT","module":"DataManager","timestamp":"2025-10-05T00:10:08.259Z"}
{"level":"info","message":"Datos suficientes recopilados para ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:10:08.259Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:10:08.260Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:10:08.261Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-05T00:10:08.261Z"}
{"level":"info","message":"Velas obtenidas: 200 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:10:08.259Z"}
{"level":"info","message":"Recopilación de datos iniciada para ASTERUSDT","module":"DataManager","timestamp":"2025-10-05T00:10:08.259Z"}
{"level":"debug","message":"Predicción Kalman: 2.0323673635334587 (Confianza: 0.814)","module":"KalmanFilter","timestamp":"2025-10-05T00:10:08.261Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:10:08.675Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:10:57.566Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.004572222955844,"middle":2.047695,"upper":2.090817777044156},"ema":{"ema21":2.04014086598516,"ema50":2.0491620207112424,"ema9":2.0261440844154657},"macd":{"histogram":-0.001213497832282506,"macd":-0.012134978322825063,"signal":-0.010921480490542557},"rsi":5.454545454545894,"volume":{"avg":129192.94,"current":38973,"ratio":0.30166509098717004}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La señal de RSI es un buy con un valor de 5.45, indicando que el precio actual está bajo y puede haber una oportunidad de compra. Además, la","symbol":"ASTERUSDT","timestamp":1759623057568}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623057574","module":"BybitClient","timestamp":"2025-10-05T00:10:57.576Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:10:57.567Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:10:57.567Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:10:57.576Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622995423%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0172\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-335.10439717\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266547069,\"updatedTime\":\"1759622995423\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623059101}","module":"BybitClient","timestamp":"2025-10-05T00:10:58.731Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:10:58.731Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623058732","module":"BybitClient","timestamp":"2025-10-05T00:10:58.732Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:10:58.732Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622995423%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0172\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-335.10439717\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266547069,\"updatedTime\":\"1759622995423\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623059840}","module":"BybitClient","timestamp":"2025-10-05T00:10:59.544Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T00:10:59.545Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:10:59.544Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623059545","module":"BybitClient","timestamp":"2025-10-05T00:10:59.545Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:10:59.545Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214018.65506915\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214018.65506915\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49993.87375345\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121009.11419154\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4485.445297\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38508.27211205\",\"totalPositionMM\":\"0\",\"usdValue\":\"38530.22182715\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38508.27211205\",\"cumRealisedPnl\":\"-12399.33077795\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759623060655}","module":"BybitClient","timestamp":"2025-10-05T00:11:00.286Z"}
{"level":"info","message":"Balance disponible: $38508.27, Precio: $2.0152","module":"TradingStrategy","timestamp":"2025-10-05T00:11:00.286Z"}
{"level":"info","message":"Balance obtenido - Total: $214018.66, Disponible: $38508.27","module":"BybitClient","timestamp":"2025-10-05T00:11:00.286Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.020Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623061022","module":"BybitClient","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1925.41","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"Position value: $28881.20, Quantity raw: 14331.681264","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"Cantidad final calculada: 14331 ASTER (valor: $28879.83)","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14331","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"Generando señal de trading: BUY 14331 ASTERUSDT @ 2.0152 (SL: 2.0031088, TP: 2.03515048)","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14331 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.021Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14331,\"stopLoss\":2.0031088,\"takeProfit\":2.03515048,\"timestamp\":1759623061021,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"La señal de RSI es un buy con un valor de 5.45, indicando que el precio actual está bajo y puede haber una oportunidad de compra. Además, la\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:11:01.022Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"214018.65506915\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"214018.65506915\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49993.87375345\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121009.11419154\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4485.445297\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38508.27211205\",\"totalPositionMM\":\"0\",\"usdValue\":\"38530.22182715\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38508.27211205\",\"cumRealisedPnl\":\"-12399.33077795\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759623061802}","module":"BybitClient","timestamp":"2025-10-05T00:11:01.432Z"}
{"level":"info","message":"Balance obtenido - Total: $214018.66, Disponible: $38508.27","module":"BybitClient","timestamp":"2025-10-05T00:11:01.433Z"}
{"level":"info","message":"Validando posición: Cantidad=14331, Precio=2.02, Valor=$28931.42","module":"RiskManager","timestamp":"2025-10-05T00:11:01.839Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623061839","module":"BybitClient","timestamp":"2025-10-05T00:11:01.840Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:11:01.840Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759622995423%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0177\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-335.10439717\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266547069,\"updatedTime\":\"1759622995423\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623062947}","module":"BybitClient","timestamp":"2025-10-05T00:11:02.615Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:11:02.615Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:11:03.021Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:11:03.429Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:11:03.429Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.31","module":"RiskManager","timestamp":"2025-10-05T00:11:03.834Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.30637443437007617}","module":"TradingStrategy","timestamp":"2025-10-05T00:11:03.835Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759623063835","module":"BybitClient","timestamp":"2025-10-05T00:11:03.835Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:11:03.835Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T00:11:03.835Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759623064941}","module":"BybitClient","timestamp":"2025-10-05T00:11:04.570Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:11:04.581Z"}
{"level":"info","message":"Ejecutando orden: Buy 14331 ASTERUSDT | SL: 2.0031088 | TP: 2.03515048","module":"BybitClient","timestamp":"2025-10-05T00:11:04.582Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759623064582","module":"BybitClient","timestamp":"2025-10-05T00:11:04.582Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14331\",\"timeInForce\":\"IOC\",\"stopLoss\":\"2.0031088\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.03515048\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:11:04.582Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"2ae62dea-8604-4c51-98e4-d202e21eb05b\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759623065360}","module":"BybitClient","timestamp":"2025-10-05T00:11:04.989Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14331,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759623064989}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-05T00:11:04.990Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 2ae62dea-8604-4c51-98e4-d202e21eb05b","module":"BybitClient","timestamp":"2025-10-05T00:11:04.989Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:11:08.260Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:11:08.666Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:11:08.667Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:11:08.667Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:12:05.053Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1811","module":"KalmanFilter","timestamp":"2025-10-05T00:12:05.091Z"}
{"level":"debug","message":"Predicción Kalman: 2.0271882763676974 (Confianza: 0.799)","module":"KalmanFilter","timestamp":"2025-10-05T00:12:05.094Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:12:06.341Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:12:08.261Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:12:08.665Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:12:08.666Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:12:08.666Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:13:08.262Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:13:09.650Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:13:09.651Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:13:09.650Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:13:10.227Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":1.9933040094003522,"middle":2.034845,"upper":2.0763859905996473},"ema":{"ema21":2.0313450055621334,"ema50":2.0434554319133444,"ema9":2.020078957582702},"macd":{"histogram":-0.0011647742080479698,"macd":-0.011647742080479695,"signal":-0.010482967872431725},"rsi":18.138801261829954,"volume":{"avg":123890.55,"current":19221,"ratio":0.1551450050064351}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI está en el rango más bajo (18.14) y MACD está en un signal bullish (-0.0105). Además, el cambio reciente fue de -0.06% y el volumen es s","symbol":"ASTERUSDT","timestamp":1759623190235}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623190237","module":"BybitClient","timestamp":"2025-10-05T00:13:10.242Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:13:10.234Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:13:10.234Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:13:10.243Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"11.4648\",\"markPrice\":\"2.0207\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.46846823\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623191020}","module":"BybitClient","timestamp":"2025-10-05T00:13:10.640Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.04%","module":"TradingStrategy","timestamp":"2025-10-05T00:13:10.646Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:13:10.646Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:13:11.052Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:13:11.072Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.79,\n  \"reasoning\": \"La tendencia actual es bearish, pero no hay señales de reversión fuerte. Mantener posición...","module":"OllamaClient","timestamp":"2025-10-05T00:13:52.258Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es bearish, pero no hay señales de reversión fuerte. Mantener posición y esperar...","module":"TradingStrategy","timestamp":"2025-10-05T00:13:52.260Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623232360","module":"BybitClient","timestamp":"2025-10-05T00:13:52.366Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 79%)","module":"OllamaClient","timestamp":"2025-10-05T00:13:52.260Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:13:52.461Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:13:52.261Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-7.1655\",\"markPrice\":\"2.0194\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.20205494\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623233689}","module":"BybitClient","timestamp":"2025-10-05T00:13:53.304Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:13:53.305Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:13:53.305Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:13:53.305Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:14:08.267Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:14:09.148Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:14:09.155Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:14:09.150Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:14:53.316Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0661","module":"KalmanFilter","timestamp":"2025-10-05T00:14:53.330Z"}
{"level":"debug","message":"Predicción Kalman: 2.0205505539601205 (Confianza: 0.837)","module":"KalmanFilter","timestamp":"2025-10-05T00:14:53.331Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:14:54.718Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:15:08.266Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:15:09.124Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:15:09.124Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:15:09.124Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:15:53.456Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.0128059734778394,"middle":2.01816,"upper":2.0235140265221605},"ema":{"ema21":2.0220973277971277,"ema50":2.032296254264208,"ema9":2.0197074350679975},"macd":{"histogram":-0.00042061777063939765,"macd":-0.0042061777063939765,"signal":-0.003785559935754579},"rsi":53.284671532846616,"volume":{"avg":126524.06,"current":17591,"ratio":0.13903284482018677}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI < 30 y MACD bullish es muy fuerte y sugiere una posible inversión en el mercado. Además, la predicción de Kalman también indica un aumento en el precio del activo. Considerando el leverage alto (10-50x) y el nivel de confianza alto (83.7%), es apropiado tomar una posición de compra con una confianza moderada (medium).","symbol":"ASTERUSDT","timestamp":1759623353459}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623353460","module":"BybitClient","timestamp":"2025-10-05T00:15:53.473Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:15:53.474Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-18.6303\",\"markPrice\":\"2.0186\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.0381083\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623354728}","module":"BybitClient","timestamp":"2025-10-05T00:15:54.350Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: -0.06%","module":"TradingStrategy","timestamp":"2025-10-05T00:15:54.353Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:15:54.352Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:15:54.744Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:15:54.744Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:16:08.267Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:16:09.154Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:16:09.161Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:16:09.161Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-05T00:16:28.252Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir exp...","module":"TradingStrategy","timestamp":"2025-10-05T00:16:28.254Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623388254","module":"BybitClient","timestamp":"2025-10-05T00:16:28.255Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:16:28.254Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:16:28.254Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:16:28.255Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"28.662\",\"markPrice\":\"2.0219\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.71438819\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623389756}","module":"BybitClient","timestamp":"2025-10-05T00:16:29.379Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:16:29.379Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:16:29.379Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:16:29.379Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:17:08.266Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:17:09.145Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:17:09.147Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:17:09.145Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:17:29.382Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0816","module":"KalmanFilter","timestamp":"2025-10-05T00:17:29.384Z"}
{"level":"debug","message":"Predicción Kalman: 2.0213233450933514 (Confianza: 0.832)","module":"KalmanFilter","timestamp":"2025-10-05T00:17:29.385Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:17:30.270Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:18:08.266Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:18:08.294Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.016480617696934,"middle":2.0203049999999996,"upper":2.024129382303065},"ema":{"ema21":2.0209911433437298,"ema50":2.026923540909092,"ema9":2.0209530211588844},"macd":{"histogram":-0.0000920642618238432,"macd":-0.000920642618238432,"signal":-0.0008285783564145888},"rsi":53.5714285714289,"volume":{"avg":126484.18,"current":11887,"ratio":0.09398013253515183}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI is below 30 and MACD is bullish, indicating a potential buying opportunity. The Kalman prediction also suggests a slight upward trend, w","symbol":"ASTERUSDT","timestamp":1759623488430}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623488431","module":"BybitClient","timestamp":"2025-10-05T00:18:08.431Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:18:08.297Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:18:08.430Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:18:08.431Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"32.9613\",\"markPrice\":\"2.0222\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.77586818\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623489780}","module":"BybitClient","timestamp":"2025-10-05T00:18:09.390Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.11%","module":"TradingStrategy","timestamp":"2025-10-05T00:18:09.391Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:18:09.391Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:18:09.393Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:18:09.394Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:18:09.393Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:18:09.780Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:18:09.794Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:18:39.245Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:18:39.256Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623519405","module":"BybitClient","timestamp":"2025-10-05T00:18:39.407Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:18:39.247Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:18:39.404Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:18:39.407Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"1.4331\",\"markPrice\":\"2.02\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.32501492\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623520652}","module":"BybitClient","timestamp":"2025-10-05T00:18:40.270Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:18:40.270Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:18:40.270Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:18:40.271Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:19:08.268Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:19:09.141Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:19:09.161Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:19:09.143Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:19:40.278Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0632","module":"KalmanFilter","timestamp":"2025-10-05T00:19:40.279Z"}
{"level":"debug","message":"Predicción Kalman: 2.0217594223870705 (Confianza: 0.850)","module":"KalmanFilter","timestamp":"2025-10-05T00:19:40.279Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:19:42.152Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:20:08.268Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:20:09.133Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:20:09.133Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:20:09.133Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:20:25.295Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.017570730412009,"middle":2.0211300000000003,"upper":2.0246892695879914},"ema":{"ema21":2.0214191557846717,"ema50":2.0249905112645417,"ema9":2.0216566450294944},"macd":{"histogram":-0.000012363865035913685,"macd":-0.0001236386503591369,"signal":-0.00011127478532322322},"rsi":53.26633165829161,"volume":{"avg":120653.6,"current":5385,"ratio":0.0446319048913584}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759623625298}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623625298","module":"BybitClient","timestamp":"2025-10-05T00:20:25.299Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:20:25.297Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:20:25.297Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:20:25.299Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-68.7888\",\"markPrice\":\"2.0151\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"372.32084175\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623626560}","module":"BybitClient","timestamp":"2025-10-05T00:20:26.174Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: -0.24%","module":"TradingStrategy","timestamp":"2025-10-05T00:20:26.175Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:20:26.175Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:20:26.569Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:20:26.569Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:20:56.931Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:20:56.932Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623656933","module":"BybitClient","timestamp":"2025-10-05T00:20:56.933Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:20:56.932Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:20:56.933Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:20:56.932Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-100.317\",\"markPrice\":\"2.0129\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"371.86998849\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623658189}","module":"BybitClient","timestamp":"2025-10-05T00:20:57.805Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:20:57.806Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:20:57.805Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:20:57.806Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:21:08.268Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:21:09.408Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:21:09.409Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:21:09.408Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:21:57.809Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0712","module":"KalmanFilter","timestamp":"2025-10-05T00:21:57.811Z"}
{"level":"debug","message":"Predicción Kalman: 2.0165683570785804 (Confianza: 0.847)","module":"KalmanFilter","timestamp":"2025-10-05T00:21:57.812Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:21:58.963Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:22:08.268Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:22:09.167Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:22:09.168Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:22:09.167Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:22:44.714Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0132296961291827,"middle":2.0199350000000003,"upper":2.026640303870818},"ema":{"ema21":2.0191375343384115,"ema50":2.0228613333563974,"ema9":2.0175066537912425},"macd":{"histogram":-0.00015065794464410578,"macd":-0.0015065794464410587,"signal":-0.001355921501796953},"rsi":38.25503355704689,"volume":{"avg":115816.44,"current":7034,"ratio":0.06073403741299594}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo de 30 y el MACD es bullish, señalando una posible recuperación del mercado. Además, la Kalman predice un aumento en e","symbol":"ASTERUSDT","timestamp":1759623764760}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623764844","module":"BybitClient","timestamp":"2025-10-05T00:22:44.844Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:22:44.754Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:22:44.760Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:22:44.845Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-63.0564\",\"markPrice\":\"2.0155\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"372.40281507\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623766361}","module":"BybitClient","timestamp":"2025-10-05T00:22:45.970Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: -0.22%","module":"TradingStrategy","timestamp":"2025-10-05T00:22:45.972Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:22:45.972Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:22:46.369Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:22:46.370Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:23:08.276Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:23:09.150Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:23:09.151Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:23:09.150Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para s...","module":"OllamaClient","timestamp":"2025-10-05T00:23:18.253Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para seguir apr...","module":"TradingStrategy","timestamp":"2025-10-05T00:23:18.255Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623798256","module":"BybitClient","timestamp":"2025-10-05T00:23:18.256Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:23:18.255Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:23:18.255Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:23:18.272Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-47.2923\",\"markPrice\":\"2.0166\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"372.6282417\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623799521}","module":"BybitClient","timestamp":"2025-10-05T00:23:19.134Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:23:19.134Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:23:19.134Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:23:19.135Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:24:08.304Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:24:09.650Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:24:09.723Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:24:09.723Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:24:19.137Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0661","module":"KalmanFilter","timestamp":"2025-10-05T00:24:19.138Z"}
{"level":"debug","message":"Predicción Kalman: 2.0145786433506823 (Confianza: 0.861)","module":"KalmanFilter","timestamp":"2025-10-05T00:24:19.139Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:24:19.990Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:25:05.449Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0095737660447974,"middle":2.0158550000000006,"upper":2.022136233955204},"ema":{"ema21":2.0158923071348016,"ema50":2.0195324421498664,"ema9":2.014697970630335},"macd":{"histogram":-0.00014455278281997317,"macd":-0.001445527828199733,"signal":-0.0013009750453797599},"rsi":42.20779220779207,"volume":{"avg":115835.53,"current":5341,"ratio":0.046108478115479766}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n\"decision\": \"BUY\",\n\"confidence\": 0.8,\n\"reasoning\": \"RSI is below 30 and MACD is bullish, indicating a potential buying opportunity. Additionally, the Kalman prediction of a price increase with high ","symbol":"ASTERUSDT","timestamp":1759623905453}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623905454","module":"BybitClient","timestamp":"2025-10-05T00:25:05.456Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:25:05.453Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:25:05.453Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:25:05.457Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-44.4261\",\"markPrice\":\"2.0168\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"372.66922836\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623906710}","module":"BybitClient","timestamp":"2025-10-05T00:25:06.320Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: -0.15%","module":"TradingStrategy","timestamp":"2025-10-05T00:25:06.321Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:25:06.321Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:25:06.719Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:25:06.719Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:25:08.268Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:25:08.662Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:25:08.668Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:25:08.667Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:25:32.209Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:25:32.286Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759623932286","module":"BybitClient","timestamp":"2025-10-05T00:25:32.287Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:25:32.223Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:25:32.286Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:25:32.338Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-31.5282\",\"markPrice\":\"2.0177\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"372.85366833\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759623933884}","module":"BybitClient","timestamp":"2025-10-05T00:25:33.499Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:25:33.500Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:25:33.500Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:25:33.500Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:26:08.267Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:26:09.155Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:26:09.155Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:26:09.155Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:26:33.501Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0678","module":"KalmanFilter","timestamp":"2025-10-05T00:26:33.501Z"}
{"level":"debug","message":"Predicción Kalman: 2.015907646763802 (Confianza: 0.863)","module":"KalmanFilter","timestamp":"2025-10-05T00:26:33.505Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:26:34.679Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:27:05.792Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.0097635311865845,"middle":2.01493,"upper":2.0200964688134158},"ema":{"ema21":2.0156248460865065,"ema50":2.018308797327138,"ema9":2.015393268455587},"macd":{"histogram":-0.00005229656485408182,"macd":-0.0005229656485408185,"signal":-0.0004706690836867367},"rsi":50.976909413854465,"volume":{"avg":114281.42,"current":13006,"ratio":0.11380677628961909}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759624025826}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624025827","module":"BybitClient","timestamp":"2025-10-05T00:27:05.827Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:27:05.821Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:27:05.826Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:27:05.827Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"0\",\"markPrice\":\"2.0199\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.30452159\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624027385}","module":"BybitClient","timestamp":"2025-10-05T00:27:06.998Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.00%","module":"TradingStrategy","timestamp":"2025-10-05T00:27:06.999Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:27:06.999Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:27:07.734Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:27:07.734Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:27:08.269Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:27:09.005Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:27:09.006Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:27:09.006Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:27:29.230Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:27:29.233Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624049233","module":"BybitClient","timestamp":"2025-10-05T00:27:29.234Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:27:29.236Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:27:29.233Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:27:29.233Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"5.7324\",\"markPrice\":\"2.0203\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.38649491\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624050478}","module":"BybitClient","timestamp":"2025-10-05T00:27:30.086Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:27:30.087Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:27:30.087Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:27:30.087Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:28:08.270Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:28:09.138Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:28:09.138Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:28:09.138Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:28:30.090Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0617","module":"KalmanFilter","timestamp":"2025-10-05T00:28:30.091Z"}
{"level":"debug","message":"Predicción Kalman: 2.018325775183825 (Confianza: 0.902)","module":"KalmanFilter","timestamp":"2025-10-05T00:28:30.091Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:28:31.208Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:29:08.275Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:29:09.147Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:29:09.147Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:29:09.147Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:29:13.015Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":2.010913744823744,"middle":2.0168,"upper":2.022686255176256},"ema":{"ema21":2.0172990338718173,"ema50":2.018120970209908,"ema9":2.018217229020541},"macd":{"histogram":0.00006955495493090604,"macd":0.0006955495493090602,"signal":0.0006259945943781542},"rsi":60.25917926565873,"volume":{"avg":112548.35,"current":5449,"ratio":0.04841474797276015}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La combinación de un precio actual por debajo del cambio reciente y un RSI por debajo de 30, junto con el MACD en señal bullish y un Bolling","symbol":"ASTERUSDT","timestamp":1759624153017}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624153018","module":"BybitClient","timestamp":"2025-10-05T00:29:13.019Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:29:13.017Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:29:13.017Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:29:13.019Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"30.0951\",\"markPrice\":\"2.022\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.73488152\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624153807}","module":"BybitClient","timestamp":"2025-10-05T00:29:13.417Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.10%","module":"TradingStrategy","timestamp":"2025-10-05T00:29:13.419Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:29:13.418Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:29:13.817Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:29:13.817Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:29:35.758Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:29:35.761Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624175761","module":"BybitClient","timestamp":"2025-10-05T00:29:35.762Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:29:35.760Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:29:35.761Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:29:35.763Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"27.2289\",\"markPrice\":\"2.0218\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.69389486\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624177023}","module":"BybitClient","timestamp":"2025-10-05T00:29:36.632Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:29:36.634Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:29:36.634Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:29:36.635Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:30:08.273Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:30:09.399Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:30:09.403Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:30:09.402Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:30:36.636Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0857","module":"KalmanFilter","timestamp":"2025-10-05T00:30:36.638Z"}
{"level":"debug","message":"Predicción Kalman: 2.0190227014063966 (Confianza: 0.789)","module":"KalmanFilter","timestamp":"2025-10-05T00:30:36.638Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:30:37.795Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:31:08.274Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:31:09.171Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:31:09.172Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:31:09.172Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:31:15.883Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.0139949387650424,"middle":2.01869,"upper":2.0233850612349573},"ema":{"ema21":2.0185432244237793,"ema50":2.0179126903061633,"ema9":2.019241697302593},"macd":{"histogram":0.00007664237015019275,"macd":0.0007664237015019282,"signal":0.0006897813313517354},"rsi":49.7826086956522,"volume":{"avg":90079.34,"current":12475,"ratio":0.1384890253414379}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI < 30 y MACD bullish es muy fuerte, indicando un posible inicio de una tendencia ascendente. Además, la predicción de Kalman también apoya esta idea con una confianza del 78.9%. Sugiero comprar con un leverage alto (10-50x) para aprovechar al máximo la oportunidad de ganancia.","symbol":"ASTERUSDT","timestamp":1759624275884}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624275884","module":"BybitClient","timestamp":"2025-10-05T00:31:15.884Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:31:15.885Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"22.9296\",\"markPrice\":\"2.0215\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.63241487\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624277199}","module":"BybitClient","timestamp":"2025-10-05T00:31:16.811Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.08%","module":"TradingStrategy","timestamp":"2025-10-05T00:31:16.812Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:31:16.812Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:31:17.224Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:31:17.224Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.789,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y es...","module":"OllamaClient","timestamp":"2025-10-05T00:31:43.356Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición y esperar a ver...","module":"TradingStrategy","timestamp":"2025-10-05T00:31:43.367Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624303368","module":"BybitClient","timestamp":"2025-10-05T00:31:43.369Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 79%)","module":"OllamaClient","timestamp":"2025-10-05T00:31:43.366Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:31:43.369Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:31:43.367Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-11.4648\",\"markPrice\":\"2.0191\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.14057495\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624304947}","module":"BybitClient","timestamp":"2025-10-05T00:31:44.560Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:31:44.560Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:31:44.560Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:31:44.560Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:32:08.279Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:32:09.236Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:32:09.237Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:32:09.237Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:32:44.580Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0744","module":"KalmanFilter","timestamp":"2025-10-05T00:32:44.591Z"}
{"level":"debug","message":"Predicción Kalman: 2.02003236776883 (Confianza: 0.799)","module":"KalmanFilter","timestamp":"2025-10-05T00:32:44.592Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:32:45.983Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:33:08.303Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:33:09.851Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:33:09.862Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:33:09.861Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:33:45.666Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.015907319439303,"middle":2.0194900000000002,"upper":2.0230726805606976},"ema":{"ema21":2.0193982413705056,"ema50":2.018479282211905,"ema9":2.0200447527918244},"macd":{"histogram":0.00007037127006017665,"macd":0.0007037127006017663,"signal":0.0006333414305415896},"rsi":51.1111111111105,"volume":{"avg":80995.53,"current":3962,"ratio":0.04891627970086744}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI < 30 y MACD bullish es muy fuerte y sugiere una posible tendencia ascendente. Además, la predicción de Kalman también indica un aumento en el precio. Considerando que el volumen es bajo y no hay señales de alta volatilidad, es apropiado tomar una posición corta con un alto nivel de leverage (10-50x) para maximizar los beneficios.","symbol":"ASTERUSDT","timestamp":1759624425672}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624425674","module":"BybitClient","timestamp":"2025-10-05T00:33:45.682Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:33:45.683Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"28.662\",\"markPrice\":\"2.0219\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"373.71438819\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624427321}","module":"BybitClient","timestamp":"2025-10-05T00:33:46.929Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: 0.10%","module":"TradingStrategy","timestamp":"2025-10-05T00:33:46.930Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:33:46.929Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:33:47.335Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:33:47.336Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:34:08.296Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:34:09.781Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:34:09.797Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:34:09.783Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.79,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para ...","module":"OllamaClient","timestamp":"2025-10-05T00:34:22.230Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:34:22.231Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624462232","module":"BybitClient","timestamp":"2025-10-05T00:34:22.235Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 79%)","module":"OllamaClient","timestamp":"2025-10-05T00:34:22.231Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:34:22.231Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:34:22.235Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-121.8135\",\"markPrice\":\"2.0114\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"371.56258854\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624463860}","module":"BybitClient","timestamp":"2025-10-05T00:34:23.469Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:34:23.471Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:34:23.470Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:34:23.471Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:35:08.292Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:35:09.182Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:35:09.182Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:35:09.182Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:35:23.484Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1247","module":"KalmanFilter","timestamp":"2025-10-05T00:35:23.486Z"}
{"level":"debug","message":"Predicción Kalman: 2.0142209026149125 (Confianza: 0.793)","module":"KalmanFilter","timestamp":"2025-10-05T00:35:23.487Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:35:24.459Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:36:04.568Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.009920346461941,"middle":2.0176049999999996,"upper":2.0252896535380582},"ema":{"ema21":2.016499355108436,"ema50":2.0176020845011946,"ema9":2.0142893693918524},"macd":{"histogram":-0.0001736647899063914,"macd":-0.0017366478990639145,"signal":-0.001562983109157523},"rsi":38.92617449664421,"volume":{"avg":80264.03,"current":19336,"ratio":0.24090492341338954}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is below 30 and MACD is bearish, indicating a potential sell signal. However, the Bollinger Bands are expanding, which could indicate an increase in volatility and potential for a bounce. The Kalman prediction also suggests a slight upward trend, with high confidence. Given these factors, I recommend a buying position with a leverage of 20-30x","symbol":"ASTERUSDT","timestamp":1759624564571}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624564572","module":"BybitClient","timestamp":"2025-10-05T00:36:04.572Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:04.572Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759623065360%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"2.0199\",\"liqPrice\":\"1.9103\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0351\",\"positionValue\":\"28947.1869\",\"isReduceOnly\":false,\"positionIMByMp\":\"1944.67230542\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.9087\",\"unrealisedPnl\":\"-184.8699\",\"markPrice\":\"2.007\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-351.02534997\",\"positionMM\":\"373.3045216\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1944.67230542\",\"positionMMByMp\":\"370.66088202\",\"seq\":140697266549181,\"updatedTime\":\"1759623065360\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1944.67230542\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.9209528\",\"size\":\"14331\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"2.0031\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624566448}","module":"BybitClient","timestamp":"2025-10-05T00:36:06.055Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14331 ASTERUSDT | PnL: -0.64%","module":"TradingStrategy","timestamp":"2025-10-05T00:36:06.056Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:36:06.056Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:36:06.466Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:36:06.466Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:36:08.292Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:36:09.024Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:36:09.025Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:09.025Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.79,\n  \"reasoning\": \"La posición actual tiene un PnL del -184.87 USDT (-0.639%), que es dentro de los límites a...","module":"OllamaClient","timestamp":"2025-10-05T00:36:41.492Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene un PnL del -184.87 USDT (-0.639%), que es dentro de los límites aceptables ...","module":"TradingStrategy","timestamp":"2025-10-05T00:36:42.826Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624602827","module":"BybitClient","timestamp":"2025-10-05T00:36:42.828Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 79%)","module":"OllamaClient","timestamp":"2025-10-05T00:36:42.826Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:36:42.827Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:42.828Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624583832%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0017\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-611.87161971\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266590853,\"updatedTime\":\"1759624583832\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624604355}","module":"BybitClient","timestamp":"2025-10-05T00:36:43.956Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:36:43.957Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:36:43.957Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624603957","module":"BybitClient","timestamp":"2025-10-05T00:36:43.957Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:36:43.964Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213833.05632523\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213833.05632523\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.32375462\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121088.37202353\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4492.808041\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38231.50488951\",\"totalPositionMM\":\"0\",\"usdValue\":\"38255.55250608\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38231.50488951\",\"cumRealisedPnl\":\"-12676.09800049\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624604763}","module":"BybitClient","timestamp":"2025-10-05T00:36:44.373Z"}
{"level":"info","message":"Balance disponible: $38231.50, Precio: $2.0081","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.374Z"}
{"level":"info","message":"Balance obtenido - Total: $213833.06, Disponible: $38231.50","module":"BybitClient","timestamp":"2025-10-05T00:36:44.373Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624604771","module":"BybitClient","timestamp":"2025-10-05T00:36:44.771Z"}
{"level":"info","message":"Riesgo: 4.333333333333333%, Capital a arriesgar: $1656.70","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Position value: $21537.08, Quantity raw: 10725.103873","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Cantidad final calculada: 10725 ASTER (valor: $21536.87)","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 13x, Quantity: 10725","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Generando señal de trading: BUY 10725 ASTERUSDT @ 2.0081 (SL: 1.9960514000000003, TP: 2.03099234)","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 10725 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":13,\"quantity\":10725,\"stopLoss\":1.9960514000000003,\"takeProfit\":2.03099234,\"timestamp\":1759624604770,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"RSI is below 30 and MACD is bearish, indicating a potential sell signal. However, the Bollinger Bands are expanding, which could indicate an increase in volatility and potential for a bounce. The Kalman prediction also suggests a slight upward trend, with high confidence. Given these factors, I recommend a buying position with a leverage of 20-30x\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:36:44.770Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:36:44.772Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213833.05632523\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213833.05632523\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.32375462\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121088.37202353\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4492.808041\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38231.50488951\",\"totalPositionMM\":\"0\",\"usdValue\":\"38255.55250608\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38231.50488951\",\"cumRealisedPnl\":\"-12676.09800049\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624605570}","module":"BybitClient","timestamp":"2025-10-05T00:36:45.173Z"}
{"level":"info","message":"Balance obtenido - Total: $213833.06, Disponible: $38231.50","module":"BybitClient","timestamp":"2025-10-05T00:36:45.176Z"}
{"level":"info","message":"Validando posición: Cantidad=10725, Precio=2.00, Valor=$21463.94","module":"RiskManager","timestamp":"2025-10-05T00:36:45.573Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624605573","module":"BybitClient","timestamp":"2025-10-05T00:36:45.573Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:45.573Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624583832%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"2.0014\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-611.87161971\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266590853,\"updatedTime\":\"1759624583832\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624606373}","module":"BybitClient","timestamp":"2025-10-05T00:36:46.052Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:36:46.053Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:36:46.462Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:36:46.862Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:46.863Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.29","module":"RiskManager","timestamp":"2025-10-05T00:36:47.258Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.29416781967154576}","module":"TradingStrategy","timestamp":"2025-10-05T00:36:47.270Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624607270","module":"BybitClient","timestamp":"2025-10-05T00:36:47.270Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:36:47.270Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"13\",\"sellLeverage\":\"13\"}","module":"BybitClient","timestamp":"2025-10-05T00:36:47.270Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759624608066}","module":"BybitClient","timestamp":"2025-10-05T00:36:47.667Z"}
{"level":"info","message":"Leverage establecido a 13x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:36:47.667Z"}
{"level":"info","message":"Ejecutando orden: Buy 10725 ASTERUSDT | SL: 1.9960514000000003 | TP: 2.03099234","module":"BybitClient","timestamp":"2025-10-05T00:36:47.667Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624607667","module":"BybitClient","timestamp":"2025-10-05T00:36:47.667Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"10725\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9960514000000003\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.03099234\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:36:47.668Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"1f2dda62-c72c-40c4-b199-d652ff7079eb\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759624608465}","module":"BybitClient","timestamp":"2025-10-05T00:36:48.069Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":10725,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759624608071}
{"level":"debug","message":"Trades ejecutados hoy: 2/20","module":"RiskManager","timestamp":"2025-10-05T00:36:48.072Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 1f2dda62-c72c-40c4-b199-d652ff7079eb","module":"BybitClient","timestamp":"2025-10-05T00:36:48.071Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:37:08.293Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:37:09.125Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:37:09.127Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:37:09.125Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:37:48.073Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:37:48.075Z"}
{"level":"debug","message":"Predicción Kalman: 2.010527234481437 (Confianza: 0.808)","module":"KalmanFilter","timestamp":"2025-10-05T00:37:48.075Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:37:48.917Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:38:08.295Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:38:09.453Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:38:09.518Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:09.517Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:38:46.668Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":2.002464487935373,"middle":2.0128150000000002,"upper":2.0231655120646277},"ema":{"ema21":2.0119615797406616,"ema50":2.014875438760143,"ema9":2.008780760974529},"macd":{"histogram":-0.0003013607341882719,"macd":-0.003013607341882718,"signal":-0.002712246607694446},"rsi":32.32323232323262,"volume":{"avg":89495.55,"current":41672,"ratio":0.4656320900871607}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band está en un rango amplio, lo que sugiere una mayor volatilidad y un mayor margen de error. Considerando la posición actual del mercado con un cambio récent de -6.65% y un volume de 299264750, es probable que el precio continúe subiendo. Utilizaremos un leverage alto (10-50x) para aprovechar esta oportunidad.","symbol":"ASTERUSDT","timestamp":1759624726691}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624726691","module":"BybitClient","timestamp":"2025-10-05T00:38:46.692Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:46.696Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624638982%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9773\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-719.12633872\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266592340,\"updatedTime\":\"1759624638982\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624728230}","module":"BybitClient","timestamp":"2025-10-05T00:38:47.832Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:38:47.833Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624727833","module":"BybitClient","timestamp":"2025-10-05T00:38:47.833Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:47.833Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624638982%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9773\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-719.12633872\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266592340,\"updatedTime\":\"1759624638982\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624728630}","module":"BybitClient","timestamp":"2025-10-05T00:38:48.228Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:38:48.228Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:38:48.228Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624728228","module":"BybitClient","timestamp":"2025-10-05T00:38:48.228Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:38:48.228Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213728.05407987\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213728.05407987\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.77375483\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121089.90660043\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4492.724034\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38124.2501705\",\"totalPositionMM\":\"0\",\"usdValue\":\"38148.6496906\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38124.2501705\",\"cumRealisedPnl\":\"-12783.3527195\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624729025}","module":"BybitClient","timestamp":"2025-10-05T00:38:48.631Z"}
{"level":"info","message":"Balance disponible: $38124.25, Precio: $1.9861","module":"TradingStrategy","timestamp":"2025-10-05T00:38:48.633Z"}
{"level":"info","message":"Balance obtenido - Total: $213728.05, Disponible: $38124.25","module":"BybitClient","timestamp":"2025-10-05T00:38:48.633Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.035Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624729045","module":"BybitClient","timestamp":"2025-10-05T00:38:49.045Z"}
{"level":"info","message":"Riesgo: 4.333333333333333%, Capital a arriesgar: $1652.05","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"Position value: $21476.66, Quantity raw: 10813.484180","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"Cantidad final calculada: 10813 ASTER (valor: $21475.70)","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 13x, Quantity: 10813","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"Generando señal de trading: BUY 10813 ASTERUSDT @ 1.9861 (SL: 1.9741834, TP: 2.00874154)","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 10813 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.036Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":13,\"quantity\":10813,\"stopLoss\":1.9741834,\"takeProfit\":2.00874154,\"timestamp\":1759624729036,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band está en un rango amplio, lo que sugiere una mayor volatilidad y un mayor margen de error. Considerando la posición actual del mercado con un cambio récent de -6.65% y un volume de 299264750, es probable que el precio continúe subiendo. Utilizaremos un leverage alto (10-50x) para aprovechar esta oportunidad.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.040Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:38:49.040Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:38:49.045Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213728.05407987\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213728.05407987\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.77375483\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121089.90660043\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4492.724034\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38124.2501705\",\"totalPositionMM\":\"0\",\"usdValue\":\"38148.6496906\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38124.2501705\",\"cumRealisedPnl\":\"-12783.3527195\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624729842}","module":"BybitClient","timestamp":"2025-10-05T00:38:49.463Z"}
{"level":"info","message":"Balance obtenido - Total: $213728.05, Disponible: $38124.25","module":"BybitClient","timestamp":"2025-10-05T00:38:49.475Z"}
{"level":"info","message":"Validando posición: Cantidad=10813, Precio=1.98, Valor=$21366.49","module":"RiskManager","timestamp":"2025-10-05T00:38:49.871Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624729871","module":"BybitClient","timestamp":"2025-10-05T00:38:49.871Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:49.872Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624638982%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9758\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-719.12633872\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266592340,\"updatedTime\":\"1759624638982\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624730668}","module":"BybitClient","timestamp":"2025-10-05T00:38:50.268Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:38:50.269Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:38:50.664Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:38:51.060Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:51.060Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.30","module":"RiskManager","timestamp":"2025-10-05T00:38:51.452Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.2975532341647652}","module":"TradingStrategy","timestamp":"2025-10-05T00:38:51.452Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624731452","module":"BybitClient","timestamp":"2025-10-05T00:38:51.452Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:38:51.452Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"13\",\"sellLeverage\":\"13\"}","module":"BybitClient","timestamp":"2025-10-05T00:38:51.453Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759624732249}","module":"BybitClient","timestamp":"2025-10-05T00:38:51.848Z"}
{"level":"warn","message":"Bybit warning (ignorado): leverage not modified (Code: 110043)","module":"BybitClient","timestamp":"2025-10-05T00:38:51.848Z"}
{"level":"info","message":"Leverage establecido a 13x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:38:51.848Z"}
{"level":"info","message":"Ejecutando orden: Buy 10813 ASTERUSDT | SL: 1.9741834 | TP: 2.00874154","module":"BybitClient","timestamp":"2025-10-05T00:38:51.848Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624731848","module":"BybitClient","timestamp":"2025-10-05T00:38:51.849Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"10813\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9741834\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"2.00874154\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:38:51.849Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"5ca128cf-2996-4485-9ea2-22848e56920f\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759624732644}","module":"BybitClient","timestamp":"2025-10-05T00:38:52.264Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":10813,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759624732266}
{"level":"debug","message":"Trades ejecutados hoy: 3/20","module":"RiskManager","timestamp":"2025-10-05T00:38:52.266Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 5ca128cf-2996-4485-9ea2-22848e56920f","module":"BybitClient","timestamp":"2025-10-05T00:38:52.266Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:39:08.295Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:39:09.147Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:39:09.148Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:39:09.147Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:39:52.268Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:39:52.269Z"}
{"level":"debug","message":"Predicción Kalman: 1.995932245625818 (Confianza: 0.857)","module":"KalmanFilter","timestamp":"2025-10-05T00:39:52.269Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:39:53.374Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:40:08.296Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:40:09.415Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:40:09.415Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:40:09.415Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:40:32.243Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9775675021354635,"middle":2.002445,"upper":2.027322497864536},"ema":{"ema21":1.9999981911254818,"ema50":2.00802654126048,"ema9":1.9914413520610967},"macd":{"histogram":-0.0007863665741454362,"macd":-0.007863665741454362,"signal":-0.007077299167308926},"rsi":32.839962997224845,"volume":{"avg":148831.84,"current":34957,"ratio":0.23487581689509449}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is below 30 and MACD is bearish, indicating a potential buying opportunity. Additionally, the Kalman prediction for a price increase with high confidence suggests that now is a good time to buy. With leverage of 10-50x, we can take advantage of this opportunity and potentially profit from it.","symbol":"ASTERUSDT","timestamp":1759624832244}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624832571","module":"BybitClient","timestamp":"2025-10-05T00:40:32.572Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:40:32.572Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624732644%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"1.9769\",\"liqPrice\":\"1.848\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0087\",\"positionValue\":\"21376.2197\",\"isReduceOnly\":false,\"positionIMByMp\":\"1655.17736483\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8462\",\"unrealisedPnl\":\"-10.813\",\"markPrice\":\"1.9759\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-730.88325956\",\"positionMM\":\"261.03264846\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1655.17736483\",\"positionMMByMp\":\"260.87802255\",\"seq\":140697266595063,\"updatedTime\":\"1759624732644\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1655.17736483\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-11.75692084\",\"size\":\"10813\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9741\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624833840}","module":"BybitClient","timestamp":"2025-10-05T00:40:33.431Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 10813 ASTERUSDT | PnL: -0.05%","module":"TradingStrategy","timestamp":"2025-10-05T00:40:33.432Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:40:33.432Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:40:33.814Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:40:33.814Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:41:08.298Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:41:09.475Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:41:10.029Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:41:10.029Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es bearish, pero el precio no ha alcanzado un nivel crítico para una re...","module":"OllamaClient","timestamp":"2025-10-05T00:41:16.982Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es bearish, pero el precio no ha alcanzado un nivel crítico para una reversión. ...","module":"TradingStrategy","timestamp":"2025-10-05T00:41:16.985Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624876985","module":"BybitClient","timestamp":"2025-10-05T00:41:16.986Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:41:16.984Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:41:16.985Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:41:16.987Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624732644%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"1.9769\",\"liqPrice\":\"1.848\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"2.0087\",\"positionValue\":\"21376.2197\",\"isReduceOnly\":false,\"positionIMByMp\":\"1655.17736483\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8462\",\"unrealisedPnl\":\"-12.9756\",\"markPrice\":\"1.9757\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-730.88325956\",\"positionMM\":\"261.03264846\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1655.17736483\",\"positionMMByMp\":\"260.84709737\",\"seq\":140697266595063,\"updatedTime\":\"1759624732644\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1655.17736483\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-11.75692084\",\"size\":\"10813\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9741\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624878911}","module":"BybitClient","timestamp":"2025-10-05T00:41:18.527Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:41:18.603Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:41:18.603Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:41:18.603Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:42:08.299Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:42:09.462Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:42:09.462Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:42:09.462Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:42:18.605Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:42:18.606Z"}
{"level":"debug","message":"Predicción Kalman: 1.9781262374165933 (Confianza: 0.854)","module":"KalmanFilter","timestamp":"2025-10-05T00:42:18.607Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:42:19.503Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:42:56.702Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9556825443211672,"middle":1.9816999999999996,"upper":2.007717455678832},"ema":{"ema21":1.9810279345469235,"ema50":1.9939166610697159,"ema9":1.9718877995891722},"macd":{"histogram":-0.0009501546030649781,"macd":-0.009501546030649788,"signal":-0.00855139142758481},"rsi":21.511627906976685,"volume":{"avg":230830.29,"current":601392,"ratio":2.6053426523876047}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction of a price increase with high confidence suggests that this is a strong buying opportunity. With high leverage (10-50x), we can take advantage of this signal and potentially profit from it.","symbol":"ASTERUSDT","timestamp":1759624976704}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624977044","module":"BybitClient","timestamp":"2025-10-05T00:42:57.054Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:42:57.118Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624901312%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9571\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624901312\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624978662}","module":"BybitClient","timestamp":"2025-10-05T00:42:58.266Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:42:58.267Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624978267","module":"BybitClient","timestamp":"2025-10-05T00:42:58.267Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:42:58.267Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624901312%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9571\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624901312\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624979068}","module":"BybitClient","timestamp":"2025-10-05T00:42:58.661Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:42:58.662Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:42:58.662Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624978663","module":"BybitClient","timestamp":"2025-10-05T00:42:58.663Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:42:58.663Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213614.0106868\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213614.0106868\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.72375386\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121044.65275139\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4487.879565\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38063.99234913\",\"totalPositionMM\":\"0\",\"usdValue\":\"38086.75461655\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38063.99234913\",\"cumRealisedPnl\":\"-12843.61054087\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624979464}","module":"BybitClient","timestamp":"2025-10-05T00:42:59.060Z"}
{"level":"info","message":"Balance disponible: $38063.99, Precio: $1.9533","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.061Z"}
{"level":"info","message":"Balance obtenido - Total: $213614.01, Disponible: $38063.99","module":"BybitClient","timestamp":"2025-10-05T00:42:59.061Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.453Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624979455","module":"BybitClient","timestamp":"2025-10-05T00:42:59.455Z"}
{"level":"info","message":"Riesgo: 6.666666666666667%, Capital a arriesgar: $2537.60","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Position value: $50751.99, Quantity raw: 25982.690728","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Cantidad final calculada: 25982 ASTER (valor: $50750.64)","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 20x, Quantity: 25982","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Generando señal de trading: BUY 25982 ASTERUSDT @ 1.9533 (SL: 1.9415802, TP: 1.97556762)","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 25982 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":20,\"quantity\":25982,\"stopLoss\":1.9415802,\"takeProfit\":1.97556762,\"timestamp\":1759624979454,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"RSI is oversold and MACD is bearish, indicating a potential bottom. Additionally, the Kalman prediction of a price increase with high confidence suggests that this is a strong buying opportunity. With high leverage (10-50x), we can take advantage of this signal and potentially profit from it.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:42:59.454Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:42:59.455Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213614.0106868\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213614.0106868\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49994.72375386\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121044.65275139\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4487.879565\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38063.99234913\",\"totalPositionMM\":\"0\",\"usdValue\":\"38086.75461655\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38063.99234913\",\"cumRealisedPnl\":\"-12843.61054087\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759624980256}","module":"BybitClient","timestamp":"2025-10-05T00:42:59.851Z"}
{"level":"info","message":"Balance obtenido - Total: $213614.01, Disponible: $38063.99","module":"BybitClient","timestamp":"2025-10-05T00:42:59.886Z"}
{"level":"info","message":"Validando posición: Cantidad=25982, Precio=1.96, Valor=$50883.15","module":"RiskManager","timestamp":"2025-10-05T00:43:00.279Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759624980279","module":"BybitClient","timestamp":"2025-10-05T00:43:00.279Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:43:00.280Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624901312%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"13\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9573\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624901312\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759624981081}","module":"BybitClient","timestamp":"2025-10-05T00:43:00.675Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:43:00.675Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:43:01.068Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:43:01.461Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:43:01.461Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.34","module":"RiskManager","timestamp":"2025-10-05T00:43:01.858Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3402792877306379}","module":"TradingStrategy","timestamp":"2025-10-05T00:43:01.858Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624981859","module":"BybitClient","timestamp":"2025-10-05T00:43:01.859Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:43:01.858Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"20\",\"sellLeverage\":\"20\"}","module":"BybitClient","timestamp":"2025-10-05T00:43:01.859Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759624982660}","module":"BybitClient","timestamp":"2025-10-05T00:43:02.254Z"}
{"level":"info","message":"Leverage establecido a 20x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:43:02.306Z"}
{"level":"info","message":"Ejecutando orden: Buy 25982 ASTERUSDT | SL: 1.9415802 | TP: 1.97556762","module":"BybitClient","timestamp":"2025-10-05T00:43:02.306Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759624982306","module":"BybitClient","timestamp":"2025-10-05T00:43:02.306Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"25982\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9415802\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.97556762\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:43:02.306Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"The number of contracts exceeds maximum limit allowed: too large, order_qty:2598200000000 > max_qty:2500000000000\",\"result\":{},\"retExtInfo\":{},\"time\":1759624983109}","module":"BybitClient","timestamp":"2025-10-05T00:43:02.702Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: The number of contracts exceeds maximum limit allowed: too large, order_qty:2598200000000 > max_qty:2500000000000 (Code: 10001)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:203:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:246:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-05T00:43:02.788Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: The number of contracts exceeds maximum limit allowed: too large, order_qty:2598200000000 > max_qty:2500000000000 (Code: 10001)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"25982","side":"Buy","slTriggerBy":"LastPrice","stopLoss":"1.9415802","symbol":"ASTERUSDT","takeProfit":"1.97556762","timeInForce":"IOC","tpTriggerBy":"LastPrice"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-05T00:43:02.709Z"}
{"error":"Error: Error API Bybit: The number of contracts exceeds maximum limit allowed: too large, order_qty:2598200000000 > max_qty:2500000000000 (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:464:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:187:24)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:246:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-05T00:43:02.776Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:43:08.299Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:43:09.159Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:43:09.161Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:43:09.161Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:44:02.792Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:44:02.794Z"}
{"level":"debug","message":"Predicción Kalman: 1.9728618295713205 (Confianza: 0.843)","module":"KalmanFilter","timestamp":"2025-10-05T00:44:02.800Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:44:03.912Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:44:08.300Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:44:08.703Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:44:08.705Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:08.705Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:44:48.426Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":1.952548310432949,"middle":1.9755949999999998,"upper":1.9986416895670505},"ema":{"ema21":1.9753915208025477,"ema50":1.9889767434764265,"ema9":1.967226434169327},"macd":{"histogram":-0.0008982699045236402,"macd":-0.008982699045236409,"signal":-0.008084429140712768},"rsi":33.56807511737087,"volume":{"avg":255297.65,"current":136702,"ratio":0.535461254735404}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759625088428}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625088429","module":"BybitClient","timestamp":"2025-10-05T00:44:48.429Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:44:48.428Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:44:48.428Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:48.429Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624982659%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9636\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624982659\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625089958}","module":"BybitClient","timestamp":"2025-10-05T00:44:49.559Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:44:49.559Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625089559","module":"BybitClient","timestamp":"2025-10-05T00:44:49.559Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:49.559Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624982659%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9636\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624982659\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625090359}","module":"BybitClient","timestamp":"2025-10-05T00:44:49.952Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T00:44:49.952Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:44:49.952Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625089952","module":"BybitClient","timestamp":"2025-10-05T00:44:49.952Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:44:49.952Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213579.45346905\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213579.45346905\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49998.12375547\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121008.51901035\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4484.419335\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38063.99234913\",\"totalPositionMM\":\"0\",\"usdValue\":\"38088.39136822\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38063.99234913\",\"cumRealisedPnl\":\"-12843.61054087\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625090752}","module":"BybitClient","timestamp":"2025-10-05T00:44:50.348Z"}
{"level":"info","message":"Balance disponible: $38063.99, Precio: $1.9602","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.350Z"}
{"level":"info","message":"Balance obtenido - Total: $213579.45, Disponible: $38063.99","module":"BybitClient","timestamp":"2025-10-05T00:44:50.350Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.743Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625090747","module":"BybitClient","timestamp":"2025-10-05T00:44:50.747Z"}
{"level":"info","message":"Riesgo: 2.6666666666666665%, Capital a arriesgar: $1015.04","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.743Z"}
{"level":"info","message":"Position value: $8120.32, Quantity raw: 4142.596861","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"Cantidad final calculada: 4142 ASTER (valor: $8119.15)","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 8x, Quantity: 4142","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"Generando señal de trading: BUY 4142 ASTERUSDT @ 1.9602 (SL: 1.9484388, TP: 1.97960598)","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 4142 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":8,\"quantity\":4142,\"stopLoss\":1.9484388,\"takeProfit\":1.97960598,\"timestamp\":1759625090745,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.745Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:44:50.747Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:44:50.747Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213579.45346905\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213579.45346905\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49998.12375547\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121008.51901035\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4484.419335\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"38063.99234913\",\"totalPositionMM\":\"0\",\"usdValue\":\"38088.39136822\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"38063.99234913\",\"cumRealisedPnl\":\"-12843.61054087\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625091549}","module":"BybitClient","timestamp":"2025-10-05T00:44:51.149Z"}
{"level":"info","message":"Balance obtenido - Total: $213579.45, Disponible: $38063.99","module":"BybitClient","timestamp":"2025-10-05T00:44:51.152Z"}
{"level":"info","message":"Validando posición: Cantidad=4142, Precio=1.96, Valor=$8134.47","module":"RiskManager","timestamp":"2025-10-05T00:44:51.545Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625091561","module":"BybitClient","timestamp":"2025-10-05T00:44:51.561Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:51.561Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759624982659%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9639\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-779.38416009\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266599553,\"updatedTime\":\"1759624982659\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625092361}","module":"BybitClient","timestamp":"2025-10-05T00:44:51.955Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:44:51.955Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:44:52.346Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:44:52.737Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:52.737Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.14","module":"RiskManager","timestamp":"2025-10-05T00:44:53.126Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.14383323453993782}","module":"TradingStrategy","timestamp":"2025-10-05T00:44:53.127Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625093127","module":"BybitClient","timestamp":"2025-10-05T00:44:53.127Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:44:53.127Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"8\",\"sellLeverage\":\"8\"}","module":"BybitClient","timestamp":"2025-10-05T00:44:53.127Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759625093926}","module":"BybitClient","timestamp":"2025-10-05T00:44:53.532Z"}
{"level":"info","message":"Leverage establecido a 8x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:44:53.618Z"}
{"level":"info","message":"Ejecutando orden: Buy 4142 ASTERUSDT | SL: 1.9484388 | TP: 1.97960598","module":"BybitClient","timestamp":"2025-10-05T00:44:53.619Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625093619","module":"BybitClient","timestamp":"2025-10-05T00:44:53.619Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"4142\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9484388\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.97960598\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:44:53.619Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"6707415b-7d1f-4c09-99fd-5960796f1327\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759625094419}","module":"BybitClient","timestamp":"2025-10-05T00:44:54.013Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":4142,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759625094241}
{"level":"debug","message":"Trades ejecutados hoy: 4/20","module":"RiskManager","timestamp":"2025-10-05T00:44:54.241Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 6707415b-7d1f-4c09-99fd-5960796f1327","module":"BybitClient","timestamp":"2025-10-05T00:44:54.241Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:45:08.301Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:45:09.155Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:45:09.158Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:45:09.155Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:45:54.242Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:45:54.244Z"}
{"level":"debug","message":"Predicción Kalman: 1.9683350521825014 (Confianza: 0.833)","module":"KalmanFilter","timestamp":"2025-10-05T00:45:54.244Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:45:55.337Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:46:08.301Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:46:09.495Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:46:09.496Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:46:09.495Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:46:42.184Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9507665117778108,"middle":1.9661449999999996,"upper":1.9815234882221884},"ema":{"ema21":1.9681002044863136,"ema50":1.9805382591337932,"ema9":1.9639858287744558},"macd":{"histogram":-0.0005778826741319239,"macd":-0.005778826741319243,"signal":-0.005200944067187319},"rsi":42.90780141843972,"volume":{"avg":312096.16,"current":83068,"ratio":0.26616155738667213}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band está en un área inferior, lo que sugiere una posibilidad de movimiento hacia arriba. La predicción de Kalman también indica una posibilidad de subida con alta confianza. Considerando todo esto, es recomendable tomar una posición de compra con un alto nivel de leverage","symbol":"ASTERUSDT","timestamp":1759625202185}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625202186","module":"BybitClient","timestamp":"2025-10-05T00:46:42.187Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:46:42.187Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625094418%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"8\",\"autoAddMargin\":0,\"avgPrice\":\"1.9638\",\"liqPrice\":\"1.7388\",\"riskLimitValue\":\"10000\",\"takeProfit\":\"1.9796\",\"positionValue\":\"8134.0596\",\"isReduceOnly\":false,\"positionIMByMp\":\"1020.67196619\",\"tpslMode\":\"Full\",\"riskId\":2,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.7363\",\"unrealisedPnl\":\"-6.213\",\"markPrice\":\"1.9623\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-783.85789287\",\"positionMM\":\"88.70257775\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1020.67196619\",\"positionMMByMp\":\"88.63361344\",\"seq\":140697266605199,\"updatedTime\":\"1759625094418\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1020.67196619\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-4.47373278\",\"size\":\"4142\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9484\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625203462}","module":"BybitClient","timestamp":"2025-10-05T00:46:43.053Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 4142 ASTERUSDT | PnL: -0.08%","module":"TradingStrategy","timestamp":"2025-10-05T00:46:43.054Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:46:43.053Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:46:43.445Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:46:43.446Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:47:08.315Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:47:09.162Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:47:09.166Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:47:09.162Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:47:17.485Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:47:17.497Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625237507","module":"BybitClient","timestamp":"2025-10-05T00:47:17.523Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:47:17.496Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:47:17.497Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:47:17.524Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625094418%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"8\",\"autoAddMargin\":0,\"avgPrice\":\"1.9638\",\"liqPrice\":\"1.7388\",\"riskLimitValue\":\"10000\",\"takeProfit\":\"1.9796\",\"positionValue\":\"8134.0596\",\"isReduceOnly\":false,\"positionIMByMp\":\"1020.67196619\",\"tpslMode\":\"Full\",\"riskId\":2,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.7363\",\"unrealisedPnl\":\"-12.426\",\"markPrice\":\"1.9608\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-783.85789287\",\"positionMM\":\"88.70257775\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1020.67196619\",\"positionMMByMp\":\"88.56464914\",\"seq\":140697266605199,\"updatedTime\":\"1759625094418\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1020.67196619\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-4.47373278\",\"size\":\"4142\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9484\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625239458}","module":"BybitClient","timestamp":"2025-10-05T00:47:19.071Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:47:19.080Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:47:19.079Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:47:19.080Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:48:08.312Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:48:09.566Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:48:09.583Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:48:09.566Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:48:19.092Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:48:19.094Z"}
{"level":"debug","message":"Predicción Kalman: 1.9581275714722801 (Confianza: 0.864)","module":"KalmanFilter","timestamp":"2025-10-05T00:48:19.111Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:48:20.100Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:49:08.327Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:49:09.572Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:49:09.631Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:09.630Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:49:42.735Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9449623518964054,"middle":1.9613150000000001,"upper":1.9776676481035949},"ema":{"ema21":1.9607184528338748,"ema50":1.9712264913100586,"ema9":1.954971235452841},"macd":{"histogram":-0.000555365001035057,"macd":-0.005553650010350575,"signal":-0.004998285009315518},"rsi":36.7977528089888,"volume":{"avg":381345.32,"current":187234,"ratio":0.4909828184072116}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30, indicando una posible oscilación hacia abajo. Además, el MACD es negativo y está aumentando, lo que sugiere una posible inversión. La Kalman predice un aumento en el precio con una confianza del 86.4%, lo que justifica la decisión de invertir. Utilizar un leverage alto (10-50x) para maximizar los beneficios.","symbol":"ASTERUSDT","timestamp":1759625382789}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625382800","module":"BybitClient","timestamp":"2025-10-05T00:49:42.816Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:42.817Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625250492%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"8\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9284\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625250492\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625384465}","module":"BybitClient","timestamp":"2025-10-05T00:49:44.061Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:49:44.062Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625384062","module":"BybitClient","timestamp":"2025-10-05T00:49:44.062Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:44.062Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625250492%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"8\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9284\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625250492\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625384875}","module":"BybitClient","timestamp":"2025-10-05T00:49:44.473Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:49:44.475Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:49:44.474Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625384475","module":"BybitClient","timestamp":"2025-10-05T00:49:44.475Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:49:44.475Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213490.03934568\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213490.03934568\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.67375431\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120999.43788675\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4480.915745\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37991.29316631\",\"totalPositionMM\":\"0\",\"usdValue\":\"38014.01195962\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37991.29316631\",\"cumRealisedPnl\":\"-12916.30972369\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625385617}","module":"BybitClient","timestamp":"2025-10-05T00:49:45.219Z"}
{"level":"info","message":"Balance disponible: $37991.29, Precio: $1.9384","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.221Z"}
{"level":"info","message":"Balance obtenido - Total: $213490.04, Disponible: $37991.29","module":"BybitClient","timestamp":"2025-10-05T00:49:45.221Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625385635","module":"BybitClient","timestamp":"2025-10-05T00:49:45.635Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1899.56","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"info","message":"Position value: $28493.47, Quantity raw: 14699.478887","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"info","message":"Cantidad final calculada: 14699 ASTER (valor: $28492.54)","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14699","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"info","message":"Generando señal de trading: BUY 14699 ASTERUSDT @ 1.9384 (SL: 1.9267695999999999, TP: 1.96049776)","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.633Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14699 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.634Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.634Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14699,\"stopLoss\":1.9267695999999999,\"takeProfit\":1.96049776,\"timestamp\":1759625385633,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo del 30, indicando una posible oscilación hacia abajo. Además, el MACD es negativo y está aumentando, lo que sugiere una posible inversión. La Kalman predice un aumento en el precio con una confianza del 86.4%, lo que justifica la decisión de invertir. Utilizar un leverage alto (10-50x) para maximizar los beneficios.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.634Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:49:45.634Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:49:45.635Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213490.03934568\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213490.03934568\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49995.67375431\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120999.43788675\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4480.915745\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37991.29316631\",\"totalPositionMM\":\"0\",\"usdValue\":\"38014.01195962\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37991.29316631\",\"cumRealisedPnl\":\"-12916.30972369\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625386450}","module":"BybitClient","timestamp":"2025-10-05T00:49:46.048Z"}
{"level":"info","message":"Balance obtenido - Total: $213490.04, Disponible: $37991.29","module":"BybitClient","timestamp":"2025-10-05T00:49:46.059Z"}
{"level":"info","message":"Validando posición: Cantidad=14699, Precio=1.92, Valor=$28282.35","module":"RiskManager","timestamp":"2025-10-05T00:49:46.468Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625386468","module":"BybitClient","timestamp":"2025-10-05T00:49:46.468Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:46.468Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625250492%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"8\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9233\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625250492\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625387282}","module":"BybitClient","timestamp":"2025-10-05T00:49:46.895Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:49:46.895Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:49:47.314Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:49:48.064Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:48.068Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.31","module":"RiskManager","timestamp":"2025-10-05T00:49:48.834Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3135866973092483}","module":"TradingStrategy","timestamp":"2025-10-05T00:49:48.834Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625388834","module":"BybitClient","timestamp":"2025-10-05T00:49:48.834Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:49:48.834Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T00:49:48.834Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759625389647}","module":"BybitClient","timestamp":"2025-10-05T00:49:49.243Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:49:49.244Z"}
{"level":"info","message":"Ejecutando orden: Buy 14699 ASTERUSDT | SL: 1.9267695999999999 | TP: 1.96049776","module":"BybitClient","timestamp":"2025-10-05T00:49:49.244Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625389244","module":"BybitClient","timestamp":"2025-10-05T00:49:49.244Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14699\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9267695999999999\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.96049776\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:49:49.244Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"StopLoss:192670000 set for Buy position should lower than base_price:192050000??LastPrice\",\"result\":{},\"retExtInfo\":{},\"time\":1759625390387}","module":"BybitClient","timestamp":"2025-10-05T00:49:49.984Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: StopLoss:192670000 set for Buy position should lower than base_price:192050000??LastPrice (Code: 10001)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:203:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:246:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-05T00:49:50.004Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: StopLoss:192670000 set for Buy position should lower than base_price:192050000??LastPrice (Code: 10001)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"14699","side":"Buy","slTriggerBy":"LastPrice","stopLoss":"1.9267695999999999","symbol":"ASTERUSDT","takeProfit":"1.96049776","timeInForce":"IOC","tpTriggerBy":"LastPrice"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-05T00:49:50.000Z"}
{"error":"Error: Error API Bybit: StopLoss:192670000 set for Buy position should lower than base_price:192050000??LastPrice (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:464:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:187:24)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:246:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-05T00:49:50.004Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:50:08.305Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:50:09.206Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:50:09.207Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:50:09.206Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:50:50.033Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:50:50.054Z"}
{"level":"debug","message":"Predicción Kalman: 1.9410267278648308 (Confianza: 0.867)","module":"KalmanFilter","timestamp":"2025-10-05T00:50:50.057Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:50:51.253Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:51:08.307Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:51:09.872Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:51:09.873Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:09.872Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:51:41.921Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9164993490036482,"middle":1.9499099999999996,"upper":1.983320650996351},"ema":{"ema21":1.9464123110749443,"ema50":1.9607341084254013,"ema9":1.9357762641391159},"macd":{"histogram":-0.001015242705602092,"macd":-0.01015242705602093,"signal":-0.009137184350418838},"rsi":37.831733483907406,"volume":{"avg":474997.14,"current":154021,"ratio":0.3242566892086971}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La señal de RSI < 30 y MACD bullish es muy fuerte, Además el cambio reciente de -2.42% es un buen indicio de que el mercado está bajo y puede haber una oportunidad de comprar en este momento.","symbol":"ASTERUSDT","timestamp":1759625502039}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625502042","module":"BybitClient","timestamp":"2025-10-05T00:51:42.045Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:42.045Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625389646%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9305\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625389646\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625503432}","module":"BybitClient","timestamp":"2025-10-05T00:51:43.042Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:51:43.044Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625503055","module":"BybitClient","timestamp":"2025-10-05T00:51:43.072Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:43.072Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625389646%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9305\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625389646\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625503918}","module":"BybitClient","timestamp":"2025-10-05T00:51:43.517Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T00:51:43.839Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:51:43.518Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625503841","module":"BybitClient","timestamp":"2025-10-05T00:51:43.841Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:51:43.841Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213471.69238993\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213471.69238993\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49992.87375298\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120988.77627686\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4478.043939\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37991.29316631\",\"totalPositionMM\":\"0\",\"usdValue\":\"38011.99842108\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37991.29316631\",\"cumRealisedPnl\":\"-12916.30972369\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625504987}","module":"BybitClient","timestamp":"2025-10-05T00:51:44.595Z"}
{"level":"info","message":"Balance disponible: $37991.29, Precio: $1.9286","module":"TradingStrategy","timestamp":"2025-10-05T00:51:44.679Z"}
{"level":"info","message":"Balance obtenido - Total: $213471.69, Disponible: $37991.29","module":"BybitClient","timestamp":"2025-10-05T00:51:44.601Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:51:45.438Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625506360","module":"BybitClient","timestamp":"2025-10-05T00:51:46.361Z"}
{"level":"info","message":"Riesgo: 5.666666666666667%, Capital a arriesgar: $2152.84","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.331Z"}
{"level":"info","message":"Position value: $36598.28, Quantity raw: 18976.604316","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.358Z"}
{"level":"info","message":"Cantidad final calculada: 18976 ASTER (valor: $36597.11)","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.358Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 17x, Quantity: 18976","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"info","message":"Generando señal de trading: BUY 18976 ASTERUSDT @ 1.9286 (SL: 1.9170284000000002, TP: 1.95058604)","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 18976 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":17,\"quantity\":18976,\"stopLoss\":1.9170284000000002,\"takeProfit\":1.95058604,\"timestamp\":1759625506359,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La señal de RSI < 30 y MACD bullish es muy fuerte, Además el cambio reciente de -2.42% es un buen indicio de que el mercado está bajo y puede haber una oportunidad de comprar en este momento.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:51:46.359Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:51:46.361Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213471.69238993\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213471.69238993\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49992.87375298\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120988.77627686\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4478.043939\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37991.29316631\",\"totalPositionMM\":\"0\",\"usdValue\":\"38011.99842108\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37991.29316631\",\"cumRealisedPnl\":\"-12916.30972369\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625507181}","module":"BybitClient","timestamp":"2025-10-05T00:51:46.775Z"}
{"level":"info","message":"Balance obtenido - Total: $213471.69, Disponible: $37991.29","module":"BybitClient","timestamp":"2025-10-05T00:51:46.775Z"}
{"level":"info","message":"Validando posición: Cantidad=18976, Precio=1.93, Valor=$36631.27","module":"RiskManager","timestamp":"2025-10-05T00:51:47.181Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625507181","module":"BybitClient","timestamp":"2025-10-05T00:51:47.181Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:47.181Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625389646%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9297\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-852.08334291\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266609622,\"updatedTime\":\"1759625389646\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625508041}","module":"BybitClient","timestamp":"2025-10-05T00:51:47.736Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:51:47.736Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:51:48.547Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:51:48.955Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:48.956Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.33","module":"RiskManager","timestamp":"2025-10-05T00:51:49.419Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.32589013025725916}","module":"TradingStrategy","timestamp":"2025-10-05T00:51:49.618Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625509618","module":"BybitClient","timestamp":"2025-10-05T00:51:49.619Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:51:49.618Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"17\",\"sellLeverage\":\"17\"}","module":"BybitClient","timestamp":"2025-10-05T00:51:49.619Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759625510435}","module":"BybitClient","timestamp":"2025-10-05T00:51:50.034Z"}
{"level":"info","message":"Leverage establecido a 17x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:51:50.035Z"}
{"level":"info","message":"Ejecutando orden: Buy 18976 ASTERUSDT | SL: 1.9170284000000002 | TP: 1.95058604","module":"BybitClient","timestamp":"2025-10-05T00:51:50.035Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625510035","module":"BybitClient","timestamp":"2025-10-05T00:51:50.035Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"18976\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9170284000000002\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.95058604\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:51:50.036Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"4493e786-02b2-47fa-859e-42b2db682b3b\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759625510850}","module":"BybitClient","timestamp":"2025-10-05T00:51:50.450Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":18976,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759625510450}
{"level":"debug","message":"Trades ejecutados hoy: 5/20","module":"RiskManager","timestamp":"2025-10-05T00:51:50.451Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 4493e786-02b2-47fa-859e-42b2db682b3b","module":"BybitClient","timestamp":"2025-10-05T00:51:50.450Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:52:08.306Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:52:09.765Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:52:09.766Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:52:09.766Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:52:50.456Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1070","module":"KalmanFilter","timestamp":"2025-10-05T00:52:50.463Z"}
{"level":"debug","message":"Predicción Kalman: 1.9324513202417033 (Confianza: 0.883)","module":"KalmanFilter","timestamp":"2025-10-05T00:52:50.464Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:52:51.585Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:53:08.308Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:53:09.193Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:53:09.194Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:53:09.193Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:53:41.256Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9085518600865674,"middle":1.935465,"upper":1.9623781399134326},"ema":{"ema21":1.9363870842790483,"ema50":1.950661450646396,"ema9":1.9307569605984498},"macd":{"histogram":-0.0007217241544223317,"macd":-0.007217241544223318,"signal":-0.006495517389800987},"rsi":38.48484848484852,"volume":{"avg":556503.56,"current":37499,"ratio":0.06738321673988931}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo de 30 y el MACD es bullish, lo que sugiere una posible recuperación del mercado. Además, el Kalman predice un aumento en el precio con alta confianza. Considerando el leverage alto (10-50x) y la volatilidad alta, es recomendable realizar una operación de compra con una confianza del 88.3%","symbol":"ASTERUSDT","timestamp":1759625621257}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625621258","module":"BybitClient","timestamp":"2025-10-05T00:53:41.258Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:53:41.258Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625510849%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"1.9298\",\"liqPrice\":\"1.8418\",\"riskLimitValue\":\"40000\",\"takeProfit\":\"1.9505\",\"positionValue\":\"36619.8848\",\"isReduceOnly\":false,\"positionIMByMp\":\"2173.0671755\",\"tpslMode\":\"Full\",\"riskId\":5,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8403\",\"unrealisedPnl\":\"-92.9824\",\"markPrice\":\"1.9249\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-872.22427955\",\"positionMM\":\"503.00835953\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"2173.0671755\",\"positionMMByMp\":\"501.45555344\",\"seq\":140697266617154,\"updatedTime\":\"1759625510849\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2173.0671755\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.14093664\",\"size\":\"18976\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.917\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625622843}","module":"BybitClient","timestamp":"2025-10-05T00:53:42.432Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 18976 ASTERUSDT | PnL: -0.25%","module":"TradingStrategy","timestamp":"2025-10-05T00:53:42.433Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:53:42.433Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:53:42.866Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:53:42.899Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:54:08.309Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:54:09.476Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:54:09.478Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:54:09.477Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para a...","module":"OllamaClient","timestamp":"2025-10-05T00:54:13.481Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La tendencia actual es favorable y no hay señales de reversión. Mantener la posición para aprovechar...","module":"TradingStrategy","timestamp":"2025-10-05T00:54:13.506Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625653506","module":"BybitClient","timestamp":"2025-10-05T00:54:13.507Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:54:13.504Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:54:13.506Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:54:13.508Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625510849%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"1.9298\",\"liqPrice\":\"1.8418\",\"riskLimitValue\":\"40000\",\"takeProfit\":\"1.9505\",\"positionValue\":\"36619.8848\",\"isReduceOnly\":false,\"positionIMByMp\":\"2173.0671755\",\"tpslMode\":\"Full\",\"riskId\":5,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8403\",\"unrealisedPnl\":\"-111.9584\",\"markPrice\":\"1.9239\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-872.22427955\",\"positionMM\":\"503.00835953\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"2173.0671755\",\"positionMMByMp\":\"501.13865424\",\"seq\":140697266617154,\"updatedTime\":\"1759625510849\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2173.0671755\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-20.14093664\",\"size\":\"18976\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.917\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625654462}","module":"BybitClient","timestamp":"2025-10-05T00:54:14.041Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:54:14.042Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:54:14.042Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:54:14.042Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:55:08.309Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:55:09.728Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:55:09.729Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:55:09.729Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:55:14.046Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-05T00:55:14.048Z"}
{"level":"debug","message":"Predicción Kalman: 1.927086662044527 (Confianza: 0.902)","module":"KalmanFilter","timestamp":"2025-10-05T00:55:14.049Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:55:14.452Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-05T00:55:24.364Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759625724379}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-05T00:55:24.380Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-05T00:55:24.387Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759625740942}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-05T00:55:40.910Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T00:55:40.868Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:55:40.902Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T00:55:40.908Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:55:40.908Z"}
{"component":"TradingStrategy","interval":"1m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"ASTERUSDT","timestamp":1759625740945}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T00:55:40.924Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"ASTERUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T00:55:40.937Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:55:40.932Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:55:40.942Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T00:55:40.940Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-05T00:55:40.942Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-05T00:55:40.942Z"}
{"level":"info","message":"Iniciando estrategia de trading para ASTERUSDT (1m)","module":"TradingSystem","timestamp":"2025-10-05T00:55:40.945Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-05T00:55:40.910Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-05T00:55:40.911Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-05T00:55:40.911Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-05T00:55:40.911Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-05T00:55:40.912Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-05T00:55:40.912Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data_1m","module":"MCPServer","timestamp":"2025-10-05T00:55:40.913Z"}
{"level":"debug","message":"Herramienta registrada: analyze_candle_pattern","module":"MCPServer","timestamp":"2025-10-05T00:55:40.913Z"}
{"level":"debug","message":"Herramienta registrada: detect_micro_trend","module":"MCPServer","timestamp":"2025-10-05T00:55:40.914Z"}
{"level":"debug","message":"Herramienta registrada: analyze_order_book","module":"MCPServer","timestamp":"2025-10-05T00:55:40.915Z"}
{"level":"info","message":"11 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-05T00:55:40.915Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-05T00:55:40.976Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-05T00:55:41.430Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-05T00:55:42.590Z"}
{"level":"info","message":"Iniciando recopilación de datos para ASTERUSDT (1m)","module":"DataManager","timestamp":"2025-10-05T00:55:42.590Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 200","module":"BybitClient","timestamp":"2025-10-05T00:55:42.608Z"}
{"level":"info","message":"Recopilando datos históricos para ASTERUSDT...","module":"DataManager","timestamp":"2025-10-05T00:55:42.591Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:55:43.088Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para ASTERUSDT","module":"DataManager","timestamp":"2025-10-05T00:55:43.089Z"}
{"level":"info","message":"Datos suficientes recopilados para ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:55:43.090Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:55:43.091Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1815","module":"KalmanFilter","timestamp":"2025-10-05T00:55:43.092Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-05T00:55:43.093Z"}
{"level":"info","message":"Velas obtenidas: 200 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:55:43.089Z"}
{"level":"info","message":"Recopilación de datos iniciada para ASTERUSDT","module":"DataManager","timestamp":"2025-10-05T00:55:43.089Z"}
{"level":"debug","message":"Predicción Kalman: 1.9460434338763375 (Confianza: 0.863)","module":"KalmanFilter","timestamp":"2025-10-05T00:55:43.093Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:55:43.486Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:56:43.092Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:56:44.259Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:56:44.260Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:44.259Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:56:44.608Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":1.9037297496978465,"middle":1.9532699999999998,"upper":2.002810250302153},"ema":{"ema21":1.9530115822592302,"ema50":1.9841611378134538,"ema9":1.9326242871570163},"macd":{"histogram":-0.002207119393269185,"macd":-0.022071193932691857,"signal":-0.019864074539422672},"rsi":28.056112224448896,"volume":{"avg":256308.76,"current":1167571,"ratio":4.555330063631067}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La señal de RSI es una oversold con un cambio reciente del -2.32%, lo que sugiere un posible aliento en el precio. Además, el indicador MACD","symbol":"ASTERUSDT","timestamp":1759625805019}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625805315","module":"BybitClient","timestamp":"2025-10-05T00:56:45.317Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:56:44.615Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:56:44.616Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:45.318Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625734152%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9134\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1146.50376307\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266623207,\"updatedTime\":\"1759625734152\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625806133}","module":"BybitClient","timestamp":"2025-10-05T00:56:45.731Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:56:45.731Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625805731","module":"BybitClient","timestamp":"2025-10-05T00:56:45.732Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:45.732Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625734152%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9131\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1146.50376307\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266623207,\"updatedTime\":\"1759625734152\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625806546}","module":"BybitClient","timestamp":"2025-10-05T00:56:46.132Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.141Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:56:46.140Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625806142","module":"BybitClient","timestamp":"2025-10-05T00:56:46.142Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:56:46.142Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213092.44834047\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213092.44834047\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49993.42375324\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120906.34046348\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4474.361857\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37696.87274615\",\"totalPositionMM\":\"0\",\"usdValue\":\"37718.32226674\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37696.87274615\",\"cumRealisedPnl\":\"-13210.73014385\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625806959}","module":"BybitClient","timestamp":"2025-10-05T00:56:46.548Z"}
{"level":"info","message":"Balance disponible: $37696.87, Precio: $1.9119","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.550Z"}
{"level":"info","message":"Balance obtenido - Total: $213092.45, Disponible: $37696.87","module":"BybitClient","timestamp":"2025-10-05T00:56:46.549Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.952Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-05T00:56:46.962Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625806971","module":"BybitClient","timestamp":"2025-10-05T00:56:46.972Z"}
{"level":"info","message":"Riesgo: 5.333333333333333%, Capital a arriesgar: $2010.50","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"Position value: $32168.00, Quantity raw: 16825.146753","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"Cantidad final calculada: 16825 ASTER (valor: $32167.72)","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 16x, Quantity: 16825","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"Generando señal de trading: BUY 16825 ASTERUSDT @ 1.9119 (SL: 1.9004286, TP: 1.93082781)","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 16825 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.953Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":16,\"quantity\":16825,\"stopLoss\":1.9004286,\"takeProfit\":1.93082781,\"timestamp\":1759625806953,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"La señal de RSI es una oversold con un cambio reciente del -2.32%, lo que sugiere un posible aliento en el precio. Además, el indicador MACD\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.961Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T00:56:46.961Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T00:56:46.982Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213092.44834047\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213092.44834047\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49993.42375324\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120906.34046348\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4474.361857\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37696.87274615\",\"totalPositionMM\":\"0\",\"usdValue\":\"37718.32226674\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37696.87274615\",\"cumRealisedPnl\":\"-13210.73014385\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759625807863}","module":"BybitClient","timestamp":"2025-10-05T00:56:47.450Z"}
{"level":"info","message":"Balance obtenido - Total: $213092.45, Disponible: $37696.87","module":"BybitClient","timestamp":"2025-10-05T00:56:47.455Z"}
{"level":"info","message":"Validando posición: Cantidad=16825, Precio=1.91, Valor=$32198.00","module":"RiskManager","timestamp":"2025-10-05T00:56:47.851Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625807851","module":"BybitClient","timestamp":"2025-10-05T00:56:47.851Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:47.851Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625734152%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9131\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1146.50376307\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266623207,\"updatedTime\":\"1759625734152\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625808663}","module":"BybitClient","timestamp":"2025-10-05T00:56:48.248Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T00:56:48.248Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T00:56:48.647Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:56:49.044Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:49.044Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.32","module":"RiskManager","timestamp":"2025-10-05T00:56:49.439Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.32024505524848684}","module":"TradingStrategy","timestamp":"2025-10-05T00:56:49.440Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625809440","module":"BybitClient","timestamp":"2025-10-05T00:56:49.440Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T00:56:49.440Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"16\",\"sellLeverage\":\"16\"}","module":"BybitClient","timestamp":"2025-10-05T00:56:49.440Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759625810253}","module":"BybitClient","timestamp":"2025-10-05T00:56:49.846Z"}
{"level":"info","message":"Leverage establecido a 16x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:56:49.851Z"}
{"level":"info","message":"Ejecutando orden: Buy 16825 ASTERUSDT | SL: 1.9004286 | TP: 1.93082781","module":"BybitClient","timestamp":"2025-10-05T00:56:49.881Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625809882","module":"BybitClient","timestamp":"2025-10-05T00:56:49.882Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"16825\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9004286\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.93082781\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T00:56:49.882Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"59b777d6-c42f-4686-9502-6eed1cbbeed5\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759625810694}","module":"BybitClient","timestamp":"2025-10-05T00:56:50.279Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":16825,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759625810316}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-05T00:56:50.316Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 59b777d6-c42f-4686-9502-6eed1cbbeed5","module":"BybitClient","timestamp":"2025-10-05T00:56:50.316Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:57:43.091Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:57:44.268Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:57:44.275Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:57:44.274Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T00:57:50.320Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T00:57:50.326Z"}
{"level":"debug","message":"Predicción Kalman: 1.9315497968117399 (Confianza: 0.853)","module":"KalmanFilter","timestamp":"2025-10-05T00:57:50.327Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T00:57:51.187Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T00:58:42.850Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":1.9039129266556454,"middle":1.9266549999999998,"upper":1.9493970733443542},"ema":{"ema21":1.9327887959397203,"ema50":1.9633971215398727,"ema9":1.9204003798365805},"macd":{"histogram":-0.001581713754954417,"macd":-0.01581713754954417,"signal":-0.014235423794589752},"rsi":42.77456647398842,"volume":{"avg":302440.4,"current":295972,"ratio":0.9786126456650632}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, indicando una posible oportunidad de compra. Además, el MACD está en un signal bullish y el Bollinger Band es","symbol":"ASTERUSDT","timestamp":1759625922852}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625922852","module":"BybitClient","timestamp":"2025-10-05T00:58:42.854Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T00:58:42.852Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T00:58:42.852Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:58:42.854Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:58:43.091Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625810693%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"1.9159\",\"liqPrice\":\"1.8206\",\"riskLimitValue\":\"40000\",\"takeProfit\":\"1.9308\",\"positionValue\":\"32235.0175\",\"isReduceOnly\":false,\"positionIMByMp\":\"2031.30993583\",\"tpslMode\":\"Full\",\"riskId\":5,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.819\",\"unrealisedPnl\":\"111.045\",\"markPrice\":\"1.9225\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1164.2330227\",\"positionMM\":\"427.44613433\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"2031.30993583\",\"positionMMByMp\":\"429.30058582\",\"seq\":140697266625316,\"updatedTime\":\"1759625810693\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2031.30993583\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-17.72925963\",\"size\":\"16825\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9004\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625924378}","module":"BybitClient","timestamp":"2025-10-05T00:58:43.956Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 16825 ASTERUSDT | PnL: 0.34%","module":"TradingStrategy","timestamp":"2025-10-05T00:58:43.967Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:58:43.967Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:58:43.970Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:58:43.971Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:58:43.970Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T00:58:44.355Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T00:58:44.357Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.34% y no hay señales claras de reversión. La te...","module":"OllamaClient","timestamp":"2025-10-05T00:59:37.231Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una ganancia del 0.34% y no hay señales claras de reversión. La tendencia e...","module":"TradingStrategy","timestamp":"2025-10-05T00:59:37.237Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625978192","module":"BybitClient","timestamp":"2025-10-05T00:59:38.194Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T00:59:37.237Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T00:59:37.237Z"}
{"level":"info","message":"⚠️  Estrategia activada: PROFIT_LADDER_30 - PnL 0.34% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-05T00:59:37.250Z"}
{"level":"info","message":"🟢 CERRANDO 25% DE POSICIÓN: PnL 0.34% - scalping: asegurar ganancia mínima","module":"TradingStrategy","timestamp":"2025-10-05T00:59:38.190Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:59:38.194Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625810693%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"1.9159\",\"liqPrice\":\"1.8206\",\"riskLimitValue\":\"40000\",\"takeProfit\":\"1.9308\",\"positionValue\":\"32235.0175\",\"isReduceOnly\":false,\"positionIMByMp\":\"2031.30993583\",\"tpslMode\":\"Full\",\"riskId\":5,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.819\",\"unrealisedPnl\":\"48.7925\",\"markPrice\":\"1.9188\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1164.2330227\",\"positionMM\":\"427.44613433\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"2031.30993583\",\"positionMMByMp\":\"428.26096907\",\"seq\":140697266625316,\"updatedTime\":\"1759625810693\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"2031.30993583\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-17.72925963\",\"size\":\"16825\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9004\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625980104}","module":"BybitClient","timestamp":"2025-10-05T00:59:39.689Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:59:39.690Z"}
{"level":"info","message":"Cerrando 25% de posición Buy ASTERUSDT: 4206 unidades (raw: 4206.2500, stepSize: 1)","module":"BybitClient","timestamp":"2025-10-05T00:59:40.101Z"}
{"level":"info","message":"Ejecutando orden: Sell 4206 ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:59:40.166Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759625980167","module":"BybitClient","timestamp":"2025-10-05T00:59:40.167Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"4206\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-05T00:59:40.174Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"41e1d00c-f136-4f62-8193-fa0c0adde264\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759625981008}","module":"BybitClient","timestamp":"2025-10-05T00:59:40.592Z"}
{"level":"info","message":"💰 25% cerrado. PnL parcial: 27.76 USDT","module":"TradingStrategy","timestamp":"2025-10-05T00:59:40.593Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 41e1d00c-f136-4f62-8193-fa0c0adde264","module":"BybitClient","timestamp":"2025-10-05T00:59:40.593Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759625980593","module":"BybitClient","timestamp":"2025-10-05T00:59:40.594Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:59:40.594Z"}
{"level":"info","message":"✅ Acción ejecutada exitosamente","module":"TradingStrategy","timestamp":"2025-10-05T00:59:40.593Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625981007%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"1.9159\",\"liqPrice\":\"1.8192\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"1.9308\",\"positionValue\":\"24176.7421\",\"isReduceOnly\":false,\"positionIMByMp\":\"1523.51263478\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8178\",\"unrealisedPnl\":\"30.2856\",\"markPrice\":\"1.9183\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1159.8373321\",\"positionMM\":\"302.69366556\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1523.51263478\",\"positionMMByMp\":\"303.12674963\",\"seq\":140697266629979,\"updatedTime\":\"1759625981007\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1523.51263478\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-13.33356903\",\"size\":\"12619\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9004\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759625981751}","module":"BybitClient","timestamp":"2025-10-05T00:59:41.338Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T00:59:41.339Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T00:59:41.339Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T00:59:41.339Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T00:59:43.092Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T00:59:43.832Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T00:59:43.833Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T00:59:43.832Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:00:41.349Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1741","module":"KalmanFilter","timestamp":"2025-10-05T01:00:41.357Z"}
{"level":"debug","message":"Predicción Kalman: 1.9246051388368002 (Confianza: 0.857)","module":"KalmanFilter","timestamp":"2025-10-05T01:00:41.358Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:00:42.719Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:00:43.092Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:00:43.482Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:00:43.484Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:00:43.483Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:01:29.056Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.906105983119917,"middle":1.9198499999999996,"upper":1.9335940168800823},"ema":{"ema21":1.924092290986006,"ema50":1.9486902646536286,"ema9":1.9190644616910957},"macd":{"histogram":-0.0008378906580987387,"macd":-0.008378906580987389,"signal":-0.00754101592288865},"rsi":46.46716541978388,"volume":{"avg":356587.91,"current":155944,"ratio":0.437322734806124}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is below 30 and MACD is bullish, indicating a potential buying opportunity. Additionally, the Kalman prediction for a price increase with high confidence suggests that this may be a good time to buy. With leverage of 10-50x, we can take advantage of this opportunity and potentially maximize our profits.","symbol":"ASTERUSDT","timestamp":1759626089060}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626089061","module":"BybitClient","timestamp":"2025-10-05T01:01:29.061Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:01:29.062Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759625981007%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"1.9159\",\"liqPrice\":\"1.8192\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"1.9308\",\"positionValue\":\"24176.7421\",\"isReduceOnly\":false,\"positionIMByMp\":\"1523.51263478\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8178\",\"unrealisedPnl\":\"135.0233\",\"markPrice\":\"1.9266\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1159.8373321\",\"positionMM\":\"302.69366556\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1523.51263478\",\"positionMMByMp\":\"304.62449874\",\"seq\":140697266629979,\"updatedTime\":\"1759625981007\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1523.51263478\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-13.33356903\",\"size\":\"12619\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.9004\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626090613}","module":"BybitClient","timestamp":"2025-10-05T01:01:30.223Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 12619 ASTERUSDT | PnL: 0.56%","module":"TradingStrategy","timestamp":"2025-10-05T01:01:30.330Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:01:30.325Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626090331","module":"BybitClient","timestamp":"2025-10-05T01:01:30.332Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"1.9208202\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-05T01:01:30.332Z"}
{"level":"info","message":"🎯 Trailing stop ACTIVADO para ASTERUSDT (PnL: 0.56%)","module":"TradingStrategy","timestamp":"2025-10-05T01:01:30.331Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 1.92 (Max alcanzado: 1.93)","module":"TradingStrategy","timestamp":"2025-10-05T01:01:30.331Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759626091162}","module":"BybitClient","timestamp":"2025-10-05T01:01:30.740Z"}
{"level":"info","message":"Stop Loss actualizado para ASTERUSDT: SL=1.9208202","module":"BybitClient","timestamp":"2025-10-05T01:01:30.764Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:01:31.271Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:01:31.367Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:01:43.097Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:01:44.025Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:01:44.025Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:01:44.025Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:02:43.104Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:02:44.306Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:02:44.307Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:02:44.306Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.56%, con un RSI en el rango alto (46.47), un MA...","module":"OllamaClient","timestamp":"2025-10-05T01:02:50.917Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una ganancia del 0.56%, con un RSI en el rango alto (46.47), un MACD histog...","module":"TradingStrategy","timestamp":"2025-10-05T01:02:50.920Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626170921","module":"BybitClient","timestamp":"2025-10-05T01:02:50.923Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:02:50.919Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:02:50.920Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:02:50.923Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626103622%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9201\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1111.33544846\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266633480,\"updatedTime\":\"1759626103622\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626172471}","module":"BybitClient","timestamp":"2025-10-05T01:02:52.050Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T01:02:52.061Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:02:52.061Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626172061","module":"BybitClient","timestamp":"2025-10-05T01:02:52.061Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:02:52.061Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213127.7713249\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213127.7713249\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49999.42375609\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120897.80031497\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4474.546347\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37732.04106076\",\"totalPositionMM\":\"0\",\"usdValue\":\"37756.00090683\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37732.04106076\",\"cumRealisedPnl\":\"-13175.56182924\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626173214}","module":"BybitClient","timestamp":"2025-10-05T01:02:52.800Z"}
{"level":"info","message":"Balance disponible: $37732.04, Precio: $1.926","module":"TradingStrategy","timestamp":"2025-10-05T01:02:52.893Z"}
{"level":"info","message":"Balance obtenido - Total: $213127.77, Disponible: $37732.04","module":"BybitClient","timestamp":"2025-10-05T01:02:52.893Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.625Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626173632","module":"BybitClient","timestamp":"2025-10-05T01:02:53.632Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1886.60","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.625Z"}
{"level":"info","message":"Position value: $28299.03, Quantity raw: 14693.162407","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.625Z"}
{"level":"info","message":"Cantidad final calculada: 14693 ASTER (valor: $28298.72)","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.625Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14693","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.628Z"}
{"level":"info","message":"Generando señal de trading: BUY 14693 ASTERUSDT @ 1.926 (SL: 1.914444, TP: 1.9479563999999998)","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.629Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14693 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.629Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.629Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14693,\"stopLoss\":1.914444,\"takeProfit\":1.9479563999999998,\"timestamp\":1759626173629,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"RSI is below 30 and MACD is bullish, indicating a potential buying opportunity. Additionally, the Kalman prediction for a price increase with high confidence suggests that this may be a good time to buy. With leverage of 10-50x, we can take advantage of this opportunity and potentially maximize our profits.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.629Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T01:02:53.631Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:02:53.632Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213127.7713249\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213127.7713249\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49999.42375609\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120897.80031497\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4474.546347\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37732.04106076\",\"totalPositionMM\":\"0\",\"usdValue\":\"37756.00090683\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37732.04106076\",\"cumRealisedPnl\":\"-13175.56182924\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626174457}","module":"BybitClient","timestamp":"2025-10-05T01:02:54.039Z"}
{"level":"info","message":"Balance obtenido - Total: $213127.77, Disponible: $37732.04","module":"BybitClient","timestamp":"2025-10-05T01:02:54.039Z"}
{"level":"info","message":"Validando posición: Cantidad=14693, Precio=1.92, Valor=$28198.81","module":"RiskManager","timestamp":"2025-10-05T01:02:54.444Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626174444","module":"BybitClient","timestamp":"2025-10-05T01:02:54.444Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:02:54.444Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626103622%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"16\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9192\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1111.33544846\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266633480,\"updatedTime\":\"1759626103622\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626175270}","module":"BybitClient","timestamp":"2025-10-05T01:02:54.848Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:02:54.849Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T01:02:55.250Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:02:55.654Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:02:55.654Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.31","module":"RiskManager","timestamp":"2025-10-05T01:02:56.055Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3138880811415666}","module":"TradingStrategy","timestamp":"2025-10-05T01:02:56.056Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626176056","module":"BybitClient","timestamp":"2025-10-05T01:02:56.056Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T01:02:56.056Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T01:02:56.056Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759626177207}","module":"BybitClient","timestamp":"2025-10-05T01:02:56.791Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:02:56.791Z"}
{"level":"info","message":"Ejecutando orden: Buy 14693 ASTERUSDT | SL: 1.914444 | TP: 1.9479563999999998","module":"BybitClient","timestamp":"2025-10-05T01:02:56.792Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626176792","module":"BybitClient","timestamp":"2025-10-05T01:02:56.792Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14693\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.914444\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.9479563999999998\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T01:02:56.792Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"0bd22123-8724-4f96-a123-12b6ea367d8c\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759626177616}","module":"BybitClient","timestamp":"2025-10-05T01:02:57.196Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14693,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759626177196}
{"level":"debug","message":"Trades ejecutados hoy: 2/20","module":"RiskManager","timestamp":"2025-10-05T01:02:57.196Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 0bd22123-8724-4f96-a123-12b6ea367d8c","module":"BybitClient","timestamp":"2025-10-05T01:02:57.196Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:03:43.132Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:03:44.585Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:03:44.588Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:03:44.586Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:03:57.199Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0766","module":"KalmanFilter","timestamp":"2025-10-05T01:03:57.201Z"}
{"level":"debug","message":"Predicción Kalman: 1.9194693771448643 (Confianza: 0.896)","module":"KalmanFilter","timestamp":"2025-10-05T01:03:57.202Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:03:58.424Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:04:43.123Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:04:44.532Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:04:44.535Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:04:44.534Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:05:10.821Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9129085084607191,"middle":1.9213149999999999,"upper":1.9297214915392806},"ema":{"ema21":1.9213043665357306,"ema50":1.9336834994021697,"ema9":1.9196523621436716},"macd":{"histogram":-0.00022762314976505467,"macd":-0.0022762314976505493,"signal":-0.0020486083478854947},"rsi":47.07446808510638,"volume":{"avg":407164.32,"current":386511,"ratio":0.9492752213651726}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo del 30 y el MACD está en un signal bullish, lo que indica una posible tendencia ascendente. Además, el precio actual está por debajo de la línea de soporte del Bollinger Band Superior, lo que puede indicar un posible rebuque. Considerando todo esto, es probable que el precio siga subiendo en los próximos horas o intradías.","symbol":"ASTERUSDT","timestamp":1759626310894}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626310898","module":"BybitClient","timestamp":"2025-10-05T01:05:10.935Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:10.943Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626210632%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9154\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1251.02415035\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266636356,\"updatedTime\":\"1759626210632\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626312597}","module":"BybitClient","timestamp":"2025-10-05T01:05:12.267Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:05:12.279Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626312279","module":"BybitClient","timestamp":"2025-10-05T01:05:12.284Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:12.378Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626210632%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9154\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1251.02415035\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266636356,\"updatedTime\":\"1759626210632\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626313201}","module":"BybitClient","timestamp":"2025-10-05T01:05:12.776Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T01:05:12.777Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:05:12.777Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626312777","module":"BybitClient","timestamp":"2025-10-05T01:05:12.777Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:05:12.778Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213001.62868437\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213001.62868437\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49999.37375607\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120908.84409621\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4476.924183\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37592.35235887\",\"totalPositionMM\":\"0\",\"usdValue\":\"37616.48664908\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37592.35235887\",\"cumRealisedPnl\":\"-13315.25053113\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626313599}","module":"BybitClient","timestamp":"2025-10-05T01:05:13.196Z"}
{"level":"info","message":"Balance disponible: $37592.35, Precio: $1.9112","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.210Z"}
{"level":"info","message":"Balance obtenido - Total: $213001.63, Disponible: $37592.35","module":"BybitClient","timestamp":"2025-10-05T01:05:13.196Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.614Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626313618","module":"BybitClient","timestamp":"2025-10-05T01:05:13.618Z"}
{"level":"info","message":"Riesgo: 5%, Capital a arriesgar: $1879.62","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.614Z"}
{"level":"info","message":"Position value: $28194.26, Quantity raw: 14752.126554","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.614Z"}
{"level":"info","message":"Cantidad final calculada: 14752 ASTER (valor: $28194.02)","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.614Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 15x, Quantity: 14752","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.615Z"}
{"level":"info","message":"Generando señal de trading: BUY 14752 ASTERUSDT @ 1.9112 (SL: 1.8997328, TP: 1.93298768)","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.615Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 14752 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.615Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.615Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":15,\"quantity\":14752,\"stopLoss\":1.8997328,\"takeProfit\":1.93298768,\"timestamp\":1759626313615,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"La RSI está por debajo del 30 y el MACD está en un signal bullish, lo que indica una posible tendencia ascendente. Además, el precio actual está por debajo de la línea de soporte del Bollinger Band Superior, lo que puede indicar un posible rebuque. Considerando todo esto, es probable que el precio siga subiendo en los próximos horas o intradías.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"medium\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.615Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T01:05:13.616Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:05:13.618Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213001.62868437\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213001.62868437\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49999.37375607\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120908.84409621\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4476.924183\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37592.35235887\",\"totalPositionMM\":\"0\",\"usdValue\":\"37616.48664908\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37592.35235887\",\"cumRealisedPnl\":\"-13315.25053113\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626314439}","module":"BybitClient","timestamp":"2025-10-05T01:05:14.015Z"}
{"level":"info","message":"Balance obtenido - Total: $213001.63, Disponible: $37592.35","module":"BybitClient","timestamp":"2025-10-05T01:05:14.029Z"}
{"level":"info","message":"Validando posición: Cantidad=14752, Precio=1.92, Valor=$28255.98","module":"RiskManager","timestamp":"2025-10-05T01:05:14.421Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626314422","module":"BybitClient","timestamp":"2025-10-05T01:05:14.422Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:14.422Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626210632%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9154\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1251.02415035\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266636356,\"updatedTime\":\"1759626210632\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626315241}","module":"BybitClient","timestamp":"2025-10-05T01:05:14.816Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:05:14.816Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T01:05:15.235Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:05:15.637Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:15.637Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.31","module":"RiskManager","timestamp":"2025-10-05T01:05:16.029Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.31389329723207515}","module":"TradingStrategy","timestamp":"2025-10-05T01:05:16.029Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626316030","module":"BybitClient","timestamp":"2025-10-05T01:05:16.031Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T01:05:16.030Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"15\",\"sellLeverage\":\"15\"}","module":"BybitClient","timestamp":"2025-10-05T01:05:16.032Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":110043,\"retMsg\":\"leverage not modified\",\"result\":{},\"retExtInfo\":{},\"time\":1759626316851}","module":"BybitClient","timestamp":"2025-10-05T01:05:16.425Z"}
{"level":"warn","message":"Bybit warning (ignorado): leverage not modified (Code: 110043)","module":"BybitClient","timestamp":"2025-10-05T01:05:16.426Z"}
{"level":"info","message":"Leverage establecido a 15x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:16.426Z"}
{"level":"info","message":"Ejecutando orden: Buy 14752 ASTERUSDT | SL: 1.8997328 | TP: 1.93298768","module":"BybitClient","timestamp":"2025-10-05T01:05:16.431Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626316431","module":"BybitClient","timestamp":"2025-10-05T01:05:16.431Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"14752\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.8997328\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.93298768\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T01:05:16.431Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"c1bc552c-3b43-4ffd-99a5-96ebb5bdd4d3\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759626317251}","module":"BybitClient","timestamp":"2025-10-05T01:05:16.834Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":14752,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759626316835}
{"level":"debug","message":"Trades ejecutados hoy: 3/20","module":"RiskManager","timestamp":"2025-10-05T01:05:16.835Z"}
{"level":"info","message":"Orden ejecutada exitosamente: c1bc552c-3b43-4ffd-99a5-96ebb5bdd4d3","module":"BybitClient","timestamp":"2025-10-05T01:05:16.834Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:05:43.123Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:05:43.986Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:05:43.986Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:05:43.986Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:06:16.845Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0638","module":"KalmanFilter","timestamp":"2025-10-05T01:06:16.847Z"}
{"level":"debug","message":"Predicción Kalman: 1.917035240183316 (Confianza: 0.877)","module":"KalmanFilter","timestamp":"2025-10-05T01:06:16.848Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:06:18.248Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:06:43.124Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:06:44.632Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:06:44.633Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:06:44.632Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:07:04.002Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":1.9104803878688317,"middle":1.9196649999999997,"upper":1.9288496121311678},"ema":{"ema21":1.919150242587686,"ema50":1.9277395741827297,"ema9":1.9177580181334972},"macd":{"histogram":-0.0001873054270555175,"macd":-0.0018730542705551745,"signal":-0.001685748843499657},"rsi":49.937106918239,"volume":{"avg":414879.81,"current":213197,"ratio":0.5138765369180053}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"La RSI está por debajo de 30 y el MACD es bullish, lo que sugiere una posible oportunidad de compra. Además, la Kalman predice un aumento en el precio con alta confianza. Considerando el leverage alto (10-50x) y la volatilidad alta, es recomendable tomar una posición de compra aguda.","symbol":"ASTERUSDT","timestamp":1759626424005}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626424007","module":"BybitClient","timestamp":"2025-10-05T01:07:04.007Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:07:04.007Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626317251%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"1.9153\",\"liqPrice\":\"1.8113\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"1.9329\",\"positionValue\":\"28254.5056\",\"isReduceOnly\":false,\"positionIMByMp\":\"1898.13796876\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8098\",\"unrealisedPnl\":\"-17.7024\",\"markPrice\":\"1.9141\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1266.56412843\",\"positionMM\":\"363.04359799\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1898.13796876\",\"positionMMByMp\":\"362.79045366\",\"seq\":140697266639229,\"updatedTime\":\"1759626317251\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1898.13796876\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.53997808\",\"size\":\"14752\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.8997\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626425712}","module":"BybitClient","timestamp":"2025-10-05T01:07:05.294Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 14752 ASTERUSDT | PnL: -0.06%","module":"TradingStrategy","timestamp":"2025-10-05T01:07:05.333Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:07:05.333Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626425334","module":"BybitClient","timestamp":"2025-10-05T01:07:05.334Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"stopLoss\":\"1.9208202\",\"slTriggerBy\":\"LastPrice\",\"positionIdx\":0}","module":"BybitClient","timestamp":"2025-10-05T01:07:05.334Z"}
{"level":"info","message":"📈 Actualizando trailing SL: 1.92 (Max alcanzado: 1.93)","module":"TradingStrategy","timestamp":"2025-10-05T01:07:05.333Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"StopLoss:192080000 set for Buy position should lower than base_price:191670000??LastPrice\",\"result\":{},\"retExtInfo\":{},\"time\":1759626426167}","module":"BybitClient","timestamp":"2025-10-05T01:07:05.749Z"}
{"error":"Error: Error actualizando SL para ASTERUSDT\n    at BybitClient.updatePositionStopLoss (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:359:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.updateTrailingStop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:400:13)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:311:9)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error actualizando trailing stop:","module":"TradingStrategy","timestamp":"2025-10-05T01:07:05.912Z"}
{"error":{"endpoint":"/v5/position/trading-stop","error":"Error API Bybit: StopLoss:192080000 set for Buy position should lower than base_price:191670000??LastPrice (Code: 10001)","method":"POST","params":{"category":"linear","positionIdx":0,"slTriggerBy":"LastPrice","stopLoss":"1.9208202","symbol":"ASTERUSDT"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-05T01:07:05.769Z"}
{"error":"Error: Error API Bybit: StopLoss:192080000 set for Buy position should lower than base_price:191670000??LastPrice (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:464:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.updatePositionStopLoss (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:354:7)\n    at async TradingStrategy.updateTrailingStop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:400:13)\n    at async TradingStrategy.manageExistingPositions (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:311:9)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:90:9)","level":"error","message":"Error actualizando stop loss:","module":"BybitClient","timestamp":"2025-10-05T01:07:05.829Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición ASTERUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:07:06.325Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:07:06.325Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:07:43.150Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:07:44.624Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:07:44.625Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:07:44.625Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual está ganando dinero, pero hay señales de reversión débiles (MACD bajista...","module":"OllamaClient","timestamp":"2025-10-05T01:08:00.419Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual está ganando dinero, pero hay señales de reversión débiles (MACD bajista, EMA9 cr...","module":"TradingStrategy","timestamp":"2025-10-05T01:08:00.420Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626480421","module":"BybitClient","timestamp":"2025-10-05T01:08:00.421Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:08:00.420Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:08:00.421Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:08:00.422Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626317251%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"1.9153\",\"liqPrice\":\"1.8113\",\"riskLimitValue\":\"30000\",\"takeProfit\":\"1.9329\",\"positionValue\":\"28254.5056\",\"isReduceOnly\":false,\"positionIMByMp\":\"1898.13796876\",\"tpslMode\":\"Full\",\"riskId\":4,\"trailingStop\":\"0\",\"liqPriceByMp\":\"1.8098\",\"unrealisedPnl\":\"163.7472\",\"markPrice\":\"1.9264\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-1266.56412843\",\"positionMM\":\"363.04359799\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"1898.13796876\",\"positionMMByMp\":\"365.38518294\",\"seq\":140697266639229,\"updatedTime\":\"1759626317251\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1898.13796876\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-15.53997808\",\"size\":\"14752\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"1.8997\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626481718}","module":"BybitClient","timestamp":"2025-10-05T01:08:01.301Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T01:08:01.302Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:08:01.302Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:08:01.302Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:08:43.162Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:08:44.090Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:08:44.091Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:08:44.090Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:09:01.310Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0673","module":"KalmanFilter","timestamp":"2025-10-05T01:09:01.312Z"}
{"level":"debug","message":"Predicción Kalman: 1.9231860520233879 (Confianza: 0.873)","module":"KalmanFilter","timestamp":"2025-10-05T01:09:01.313Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:09:02.804Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:09:43.152Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:09:44.315Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:09:44.317Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:09:44.315Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:09:51.235Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":1.9074923262551038,"middle":1.9184100000000002,"upper":1.9293276737448966},"ema":{"ema21":1.9198773962014117,"ema50":1.9238475428616042,"ema9":1.9221220572759534},"macd":{"histogram":0.00012121463263847776,"macd":0.0012121463263847776,"signal":0.0010909316937462998},"rsi":58.96226415094346,"volume":{"avg":424277.52,"current":683037,"ratio":1.6098826070257033}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La RSI está por debajo del 30, MACD es bullish y el volumen es alto, lo que sugiere una posible oportunidad de compra. Además, la predicción","symbol":"ASTERUSDT","timestamp":1759626592007}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626592012","module":"BybitClient","timestamp":"2025-10-05T01:09:52.016Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:09:52.016Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:09:51.259Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:09:51.267Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626498402%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.926\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1012.29098539\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266644122,\"updatedTime\":\"1759626498402\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626593715}","module":"BybitClient","timestamp":"2025-10-05T01:09:53.833Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:09:53.948Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626593953","module":"BybitClient","timestamp":"2025-10-05T01:09:53.954Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:09:53.954Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626498402%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.9259\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1012.29098539\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266644122,\"updatedTime\":\"1759626498402\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626594801}","module":"BybitClient","timestamp":"2025-10-05T01:09:54.384Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T01:09:54.460Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:09:54.385Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626594482","module":"BybitClient","timestamp":"2025-10-05T01:09:54.517Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:09:54.603Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213331.1808036\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213331.1808036\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.67375478\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120997.04529201\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4482.504818\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37831.08552383\",\"totalPositionMM\":\"0\",\"usdValue\":\"37854.95693879\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37831.08552383\",\"cumRealisedPnl\":\"-13076.51736617\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626595442}","module":"BybitClient","timestamp":"2025-10-05T01:09:55.026Z"}
{"level":"info","message":"Balance disponible: $37831.09, Precio: $1.9318","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.027Z"}
{"level":"info","message":"Balance obtenido - Total: $213331.18, Disponible: $37831.09","module":"BybitClient","timestamp":"2025-10-05T01:09:55.027Z"}
{"level":"debug","message":"Símbolo info - Min: 1, Step: 1","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626595886","module":"BybitClient","timestamp":"2025-10-05T01:09:55.887Z"}
{"level":"info","message":"Riesgo: 3.3333333333333335%, Capital a arriesgar: $1261.04","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"Position value: $12610.36, Quantity raw: 6527.778156","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"Cantidad final calculada: 6527 ASTER (valor: $12608.86)","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 10x, Quantity: 6527","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"Generando señal de trading: BUY 6527 ASTERUSDT @ 1.9318 (SL: 1.9202092, TP: 1.95092482)","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 6527 ASTERUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.792Z"}
{"level":"info","message":"Señal: {\"symbol\":\"ASTERUSDT\",\"action\":\"BUY\",\"leverage\":10,\"quantity\":6527,\"stopLoss\":1.9202092,\"takeProfit\":1.95092482,\"timestamp\":1759626595792,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n  \\\"decision\\\": \\\"BUY\\\",\\n  \\\"confidence\\\": 0.8,\\n  \\\"reasoning\\\": \\\"La RSI está por debajo del 30, MACD es bullish y el volumen es alto, lo que sugiere una posible oportunidad de compra. Además, la predicción\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.817Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T01:09:55.883Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:09:55.887Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213331.1808036\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213331.1808036\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.67375478\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"120997.04529201\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4482.504818\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37831.08552383\",\"totalPositionMM\":\"0\",\"usdValue\":\"37854.95693879\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37831.08552383\",\"cumRealisedPnl\":\"-13076.51736617\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626598352}","module":"BybitClient","timestamp":"2025-10-05T01:09:57.933Z"}
{"level":"info","message":"Balance obtenido - Total: $213331.18, Disponible: $37831.09","module":"BybitClient","timestamp":"2025-10-05T01:09:57.935Z"}
{"level":"info","message":"Validando posición: Cantidad=6527, Precio=1.93, Valor=$12566.43","module":"RiskManager","timestamp":"2025-10-05T01:09:58.435Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626598435","module":"BybitClient","timestamp":"2025-10-05T01:09:58.435Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:09:58.436Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"ASTERUSDT%2C1759626498402%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"ASTERUSDT\",\"leverage\":\"15\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"5000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"1.925\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-1012.29098539\",\"positionMM\":\"0\",\"createdTime\":\"1759620804427\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266644122,\"updatedTime\":\"1759626498402\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626599600}","module":"BybitClient","timestamp":"2025-10-05T01:09:59.179Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:09:59.179Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T01:09:59.609Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:10:00.354Z"}
{"level":"info","message":"Velas obtenidas: 20 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:10:00.355Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.20","module":"RiskManager","timestamp":"2025-10-05T01:10:00.768Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.2015386933799099}","module":"TradingStrategy","timestamp":"2025-10-05T01:10:00.768Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626600769","module":"BybitClient","timestamp":"2025-10-05T01:10:00.769Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T01:10:00.769Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"buyLeverage\":\"10\",\"sellLeverage\":\"10\"}","module":"BybitClient","timestamp":"2025-10-05T01:10:00.769Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759626601937}","module":"BybitClient","timestamp":"2025-10-05T01:10:01.517Z"}
{"level":"info","message":"Leverage establecido a 10x para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:10:01.517Z"}
{"level":"info","message":"Ejecutando orden: Buy 6527 ASTERUSDT | SL: 1.9202092 | TP: 1.95092482","module":"BybitClient","timestamp":"2025-10-05T01:10:01.517Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626601517","module":"BybitClient","timestamp":"2025-10-05T01:10:01.517Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"ASTERUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"6527\",\"timeInForce\":\"IOC\",\"stopLoss\":\"1.9202092\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"1.95092482\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T01:10:01.518Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"5768e285-d9b4-4b25-93e5-5273913919ba\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759626602684}","module":"BybitClient","timestamp":"2025-10-05T01:10:02.263Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":6527,"side":"BUY","symbol":"ASTERUSDT","timestamp":1759626602264}
{"level":"debug","message":"Trades ejecutados hoy: 4/20","module":"RiskManager","timestamp":"2025-10-05T01:10:02.264Z"}
{"level":"info","message":"Orden ejecutada exitosamente: 5768e285-d9b4-4b25-93e5-5273913919ba","module":"BybitClient","timestamp":"2025-10-05T01:10:02.263Z"}
{"level":"debug","message":"Obteniendo velas para ASTERUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:10:43.152Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:10:44.543Z"}
{"level":"debug","message":"Buffer actualizado para ASTERUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:10:44.544Z"}
{"level":"info","message":"Velas obtenidas: 5 para ASTERUSDT","module":"BybitClient","timestamp":"2025-10-05T01:10:44.543Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:11:02.269Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0644","module":"KalmanFilter","timestamp":"2025-10-05T01:11:02.273Z"}
{"level":"debug","message":"Predicción Kalman: 1.925974411347859 (Confianza: 0.884)","module":"KalmanFilter","timestamp":"2025-10-05T01:11:02.274Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:11:03.183Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-05T01:11:31.955Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759626691965}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-05T01:11:31.966Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-05T01:11:31.974Z"}
{"component":"TradingSystem","level":"info","message":"SYSTEM_TRADINGSYSTEM_START","module":"TradingSystem","status":"start","timestamp":1759626755163}
{"level":"debug","message":"Herramienta registrada: get_market_data","module":"MCPServer","timestamp":"2025-10-05T01:12:35.148Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T01:12:35.135Z"}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T01:12:34.926Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T01:12:35.146Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T01:12:35.139Z"}
{"component":"TradingStrategy","interval":"1m","level":"info","message":"SYSTEM_TRADINGSTRATEGY_START","module":"TradingStrategy","status":"start","symbol":"BTCUSDT","timestamp":1759626755164}
{"level":"info","message":"Cliente Ollama inicializado: http://localhost:11434 - llama2:7b-chat (timeout: 120000ms)","module":"OllamaClient","timestamp":"2025-10-05T01:12:35.153Z"}
{"enablePaperTrading":false,"level":"info","maxDailyTrades":20,"maxLeverage":50,"maxPositionSize":10000000,"message":"Risk Manager inicializado con configuración:","module":"RiskManager","riskPercentage":1,"stopLossPercentage":2,"symbol":"BTCUSDT","takeProfitPercentage":4,"timestamp":"2025-10-05T01:12:35.156Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T01:12:35.156Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T01:12:35.158Z"}
{"level":"info","message":"Cliente Bybit inicializado - Testnet: true","module":"BybitClient","timestamp":"2025-10-05T01:12:35.163Z"}
{"level":"info","message":"Variables de entorno validadas correctamente","module":"TradingSystem","timestamp":"2025-10-05T01:12:35.164Z"}
{"level":"info","message":"Iniciando servidor MCP...","module":"TradingSystem","timestamp":"2025-10-05T01:12:35.164Z"}
{"level":"info","message":"Iniciando estrategia de trading para BTCUSDT (1m)","module":"TradingSystem","timestamp":"2025-10-05T01:12:35.164Z"}
{"level":"debug","message":"Herramienta registrada: analyze_technical","module":"MCPServer","timestamp":"2025-10-05T01:12:35.149Z"}
{"level":"debug","message":"Herramienta registrada: kalman_predict","module":"MCPServer","timestamp":"2025-10-05T01:12:35.149Z"}
{"level":"debug","message":"Herramienta registrada: ai_analysis","module":"MCPServer","timestamp":"2025-10-05T01:12:35.149Z"}
{"level":"debug","message":"Herramienta registrada: execute_trade","module":"MCPServer","timestamp":"2025-10-05T01:12:35.149Z"}
{"level":"debug","message":"Herramienta registrada: get_positions","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"debug","message":"Herramienta registrada: close_position","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"debug","message":"Herramienta registrada: get_market_data_1m","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"debug","message":"Herramienta registrada: analyze_candle_pattern","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"debug","message":"Herramienta registrada: detect_micro_trend","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"debug","message":"Herramienta registrada: analyze_order_book","module":"MCPServer","timestamp":"2025-10-05T01:12:35.150Z"}
{"level":"info","message":"11 herramientas MCP registradas","module":"MCPServer","timestamp":"2025-10-05T01:12:35.151Z"}
{"level":"info","message":"Servidor MCP iniciado en puerto 3001","module":"MCPServer","timestamp":"2025-10-05T01:12:35.189Z"}
{"level":"info","message":"Health check de Ollama exitoso","module":"OllamaClient","timestamp":"2025-10-05T01:12:37.472Z"}
{"level":"info","message":"Health check completado exitosamente","module":"TradingStrategy","timestamp":"2025-10-05T01:12:38.923Z"}
{"level":"info","message":"Iniciando recopilación de datos para BTCUSDT (1m)","module":"DataManager","timestamp":"2025-10-05T01:12:38.948Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 200","module":"BybitClient","timestamp":"2025-10-05T01:12:38.969Z"}
{"level":"info","message":"Recopilando datos históricos para BTCUSDT...","module":"DataManager","timestamp":"2025-10-05T01:12:38.968Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:12:39.566Z"}
{"level":"info","message":"Datos históricos recopilados: 200 velas para BTCUSDT","module":"DataManager","timestamp":"2025-10-05T01:12:39.572Z"}
{"level":"info","message":"Datos suficientes recopilados para BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:12:39.573Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:12:39.575Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1783","module":"KalmanFilter","timestamp":"2025-10-05T01:12:39.576Z"}
{"level":"info","message":"Sistema de trading iniciado exitosamente","module":"TradingSystem","timestamp":"2025-10-05T01:12:39.577Z"}
{"level":"info","message":"Velas obtenidas: 200 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:12:39.572Z"}
{"level":"info","message":"Recopilación de datos iniciada para BTCUSDT","module":"DataManager","timestamp":"2025-10-05T01:12:39.572Z"}
{"level":"debug","message":"Predicción Kalman: 122221.84167659408 (Confianza: 0.808)","module":"KalmanFilter","timestamp":"2025-10-05T01:12:39.577Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:12:40.317Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:13:39.602Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:13:40.875Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:13:40.876Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:13:40.876Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:14:03.176Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122067.79560015004,"middle":122172.29,"upper":122276.78439984994},"ema":{"ema21":122202.56104978004,"ema50":122219.2678066346,"ema9":122221.72061106209},"macd":{"histogram":0.9358207010940536,"macd":9.358207010940532,"signal":8.422386309846479},"rsi":83.56382978723067,"volume":{"avg":12.408389999999999,"current":6.055,"ratio":0.4879762805650048}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está sobrecompra (83.56) y MACD es bullish (0.935821). Además, el precio actual está por encima del Bollinger superior (122276.78) y el EMA9 cruza por encima de la EMA21. La Kalman predice una subida con confianza del 80.8%. Si detectas señales bajistas claras, sugeriré un SHORT, pero por ahora, la dirección actual es LONG.","symbol":"BTCUSDT","timestamp":1759626843179}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626843184","module":"BybitClient","timestamp":"2025-10-05T01:14:03.188Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:03.189Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759620729849%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122269.75\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759620729849\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626844993}","module":"BybitClient","timestamp":"2025-10-05T01:14:04.574Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:14:04.575Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626844577","module":"BybitClient","timestamp":"2025-10-05T01:14:04.578Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:04.578Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759620729849%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122269.71\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759620729849\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626845411}","module":"BybitClient","timestamp":"2025-10-05T01:14:04.990Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.8","module":"TradingStrategy","timestamp":"2025-10-05T01:14:04.990Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:14:04.990Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626844991","module":"BybitClient","timestamp":"2025-10-05T01:14:04.991Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:14:04.991Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213314.5964592\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213314.5964592\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.87375488\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121022.04318678\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4483.881119\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37787.91643535\",\"totalPositionMM\":\"0\",\"usdValue\":\"37811.79839853\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37787.91643535\",\"cumRealisedPnl\":\"-13119.68645465\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626845823}","module":"BybitClient","timestamp":"2025-10-05T01:14:05.393Z"}
{"level":"info","message":"Balance disponible: $37787.92, Precio: $122239.9","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.394Z"}
{"level":"info","message":"Balance obtenido - Total: $213314.60, Disponible: $37787.92","module":"BybitClient","timestamp":"2025-10-05T01:14:05.393Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.800Z"}
{"level":"info","message":"Contador diario de trades reseteado","module":"RiskManager","timestamp":"2025-10-05T01:14:05.802Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626845802","module":"BybitClient","timestamp":"2025-10-05T01:14:05.803Z"}
{"level":"info","message":"Riesgo: 6.666666666666667%, Capital a arriesgar: $2519.19","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.800Z"}
{"level":"info","message":"Position value: $50383.89, Quantity raw: 0.412172","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.800Z"}
{"level":"info","message":"Cantidad final calculada: 0.41200000000000003 BTC (valor: $50362.84)","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.800Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 20x, Quantity: 0.41200000000000003","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.801Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.41200000000000003 BTCUSDT @ 122239.9 (SL: 121506.46059999999, TP: 123633.43486)","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.801Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.41200000000000003 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.801Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.801Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":20,\"quantity\":0.41200000000000003,\"stopLoss\":121506.46059999999,\"takeProfit\":123633.43486,\"timestamp\":1759626845801,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.8,\"reasoning\":\"RSI está sobrecompra (83.56) y MACD es bullish (0.935821). Además, el precio actual está por encima del Bollinger superior (122276.78) y el EMA9 cruza por encima de la EMA21. La Kalman predice una subida con confianza del 80.8%. Si detectas señales bajistas claras, sugeriré un SHORT, pero por ahora, la dirección actual es LONG.\",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"bullish\",\"riskLevel\":\"low\",\"suggestedLeverage\":10}}","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.801Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T01:14:05.802Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:14:05.803Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213314.5964592\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213314.5964592\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49996.87375488\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121022.04318678\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4483.881119\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37787.91643535\",\"totalPositionMM\":\"0\",\"usdValue\":\"37811.79839853\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37787.91643535\",\"cumRealisedPnl\":\"-13119.68645465\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626846634}","module":"BybitClient","timestamp":"2025-10-05T01:14:06.203Z"}
{"level":"info","message":"Balance obtenido - Total: $213314.60, Disponible: $37787.92","module":"BybitClient","timestamp":"2025-10-05T01:14:06.440Z"}
{"level":"info","message":"Validando posición: Cantidad=0.41200000000000003, Precio=122268.90, Valor=$50374.79","module":"RiskManager","timestamp":"2025-10-05T01:14:06.844Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626846845","module":"BybitClient","timestamp":"2025-10-05T01:14:06.845Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:06.845Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759620729849%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"17\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122269.58\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759620729849\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626847676}","module":"BybitClient","timestamp":"2025-10-05T01:14:07.253Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:14:07.346Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T01:14:07.752Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:14:08.158Z"}
{"level":"info","message":"Velas obtenidas: 20 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:08.159Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.32","module":"RiskManager","timestamp":"2025-10-05T01:14:08.590Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.3212044075608327}","module":"TradingStrategy","timestamp":"2025-10-05T01:14:08.590Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626848591","module":"BybitClient","timestamp":"2025-10-05T01:14:08.591Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T01:14:08.590Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"20\",\"sellLeverage\":\"20\"}","module":"BybitClient","timestamp":"2025-10-05T01:14:08.591Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759626849422}","module":"BybitClient","timestamp":"2025-10-05T01:14:08.989Z"}
{"level":"info","message":"Leverage establecido a 20x para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:09.100Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.41200000000000003 BTCUSDT | SL: 121506.46059999999 | TP: 123633.43486","module":"BybitClient","timestamp":"2025-10-05T01:14:09.100Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626849100","module":"BybitClient","timestamp":"2025-10-05T01:14:09.100Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.41200000000000003\",\"timeInForce\":\"IOC\",\"stopLoss\":\"121506.46059999999\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"123633.43486\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T01:14:09.101Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":10001,\"retMsg\":\"Qty invalid\",\"result\":{},\"retExtInfo\":{},\"time\":1759626849934}","module":"BybitClient","timestamp":"2025-10-05T01:14:09.512Z"}
{"error":"Error: Error ejecutando trade: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:203:13)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:271:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando acción de trading:","module":"TradingStrategy","timestamp":"2025-10-05T01:14:09.530Z"}
{"error":{"endpoint":"/v5/order/create","error":"Error API Bybit: Qty invalid (Code: 10001)","method":"POST","params":{"category":"linear","orderType":"Market","qty":"0.41200000000000003","side":"Buy","slTriggerBy":"LastPrice","stopLoss":"121506.46059999999","symbol":"BTCUSDT","takeProfit":"123633.43486","timeInForce":"IOC","tpTriggerBy":"LastPrice"}},"level":"error","message":"Error en petición autenticada:","module":"BybitClient","timestamp":"2025-10-05T01:14:09.513Z"}
{"error":"Error: Error API Bybit: Qty invalid (Code: 10001)\n    at BybitClient.makeAuthenticatedRequest (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:464:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async BybitClient.executeTrade (/Users/x3at/Documents/ai-trading-system/src/exchange/bybit-client.ts:187:24)\n    at async TradingStrategy.executeTradingAction (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:271:24)\n    at async TradingStrategy.tradingLoop (/Users/x3at/Documents/ai-trading-system/src/strategy/trading-strategy.ts:98:11)","level":"error","message":"Error ejecutando trade:","module":"BybitClient","timestamp":"2025-10-05T01:14:09.529Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:14:39.580Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:14:40.449Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:14:40.450Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:14:40.450Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:15:09.534Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-05T01:15:09.535Z"}
{"level":"debug","message":"Predicción Kalman: 122258.4842963399 (Confianza: 0.851)","module":"KalmanFilter","timestamp":"2025-10-05T01:15:09.535Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:15:10.416Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:15:39.593Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:15:41.614Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:15:41.615Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:15:41.615Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:16:16.092Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122175.3132415125,"middle":122236.10499999998,"upper":122296.89675848746},"ema":{"ema21":122235.245593206,"ema50":122231.77715229467,"ema9":122254.14853214394},"macd":{"histogram":1.741853802572587,"macd":17.418538025725866,"signal":15.676684223153279},"rsi":61.88655194391006,"volume":{"avg":12.423459999999999,"current":0.894,"ratio":0.07196062932548583}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n\"decision\": \"BUY\",\n\"confidence\": 0.8,\n\"reasoning\": \"RSI is at 61.89, which is considered high and may indicate a potential short opportunity. However, MACD histogram is bullish and EMAs are crossed ","symbol":"BTCUSDT","timestamp":1759626976288}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626976290","module":"BybitClient","timestamp":"2025-10-05T01:16:16.300Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:16:16.286Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:16:16.287Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:16.808Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626849421%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122282.1\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759626849421\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626978484}","module":"BybitClient","timestamp":"2025-10-05T01:16:18.059Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:16:18.059Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626978059","module":"BybitClient","timestamp":"2025-10-05T01:16:18.059Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:18.060Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626849421%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122273.16\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759626849421\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626979227}","module":"BybitClient","timestamp":"2025-10-05T01:16:18.805Z"}
{"level":"info","message":"AI sugiere BUY con confianza 0.3","module":"TradingStrategy","timestamp":"2025-10-05T01:16:18.807Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:16:18.806Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626978807","module":"BybitClient","timestamp":"2025-10-05T01:16:18.807Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:16:18.807Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213335.59666694\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213335.59666694\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49997.32375509\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121041.62297264\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4484.700389\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37787.91643535\",\"totalPositionMM\":\"0\",\"usdValue\":\"37811.9495502\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37787.91643535\",\"cumRealisedPnl\":\"-13119.68645465\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626979650}","module":"BybitClient","timestamp":"2025-10-05T01:16:19.225Z"}
{"level":"info","message":"Balance disponible: $37787.92, Precio: $122268.9","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.326Z"}
{"level":"info","message":"Balance obtenido - Total: $213335.60, Disponible: $37787.92","module":"BybitClient","timestamp":"2025-10-05T01:16:19.225Z"}
{"level":"debug","message":"Símbolo info - Min: 0.001, Step: 0.001","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.744Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626979745","module":"BybitClient","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"Riesgo: 4%, Capital a arriesgar: $1511.52","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.744Z"}
{"level":"info","message":"Position value: $18138.20, Quantity raw: 0.148347","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.744Z"}
{"level":"info","message":"Cantidad final calculada: 0.148 BTC (valor: $18095.80)","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.744Z"}
{"level":"info","message":"Parámetros calculados - Leverage: 12x, Quantity: 0.148","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"Generando señal de trading: BUY 0.148 BTCUSDT @ 122268.9 (SL: 121535.28659999999, TP: 123479.36211)","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"EJECUTANDO TRADE: BUY 0.148 BTCUSDT","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"=== INICIO EJECUCIÓN DE TRADE ===","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"Señal: {\"symbol\":\"BTCUSDT\",\"action\":\"BUY\",\"leverage\":12,\"quantity\":0.148,\"stopLoss\":121535.28659999999,\"takeProfit\":123479.36211,\"timestamp\":1759626979745,\"aiAnalysis\":{\"decision\":\"BUY\",\"confidence\":0.3,\"reasoning\":\"{\\n\\\"decision\\\": \\\"BUY\\\",\\n\\\"confidence\\\": 0.8,\\n\\\"reasoning\\\": \\\"RSI is at 61.89, which is considered high and may indicate a potential short opportunity. However, MACD histogram is bullish and EMAs are crossed \",\"indicators\":{},\"kalman\":{},\"marketSentiment\":\"neutral\",\"riskLevel\":\"medium\",\"suggestedLeverage\":2}}","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"info","message":"Validando con Risk Manager...","module":"TradingStrategy","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"debug","message":"Signature payload: accountType=UNIFIED","module":"BybitClient","timestamp":"2025-10-05T01:16:19.745Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"list\":[{\"accountIMRate\":\"\",\"totalMaintenanceMarginByMp\":\"\",\"totalInitialMargin\":\"\",\"accountType\":\"UNIFIED\",\"accountMMRate\":\"\",\"accountMMRateByMp\":\"\",\"accountIMRateByMp\":\"\",\"totalInitialMarginByMp\":\"\",\"totalMaintenanceMargin\":\"\",\"totalEquity\":\"213335.59666694\",\"totalMarginBalance\":\"\",\"totalAvailableBalance\":\"\",\"totalPerpUPL\":\"0\",\"totalWalletBalance\":\"213335.59666694\",\"accountLTV\":\"\",\"coin\":[{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"50000.02375638\",\"totalPositionMM\":\"0\",\"usdValue\":\"49997.32375509\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"50000.02375638\",\"cumRealisedPnl\":\"0.02375638\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"0.989\",\"totalPositionMM\":\"0\",\"usdValue\":\"121041.62297264\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"0.989\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"BTC\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"1\",\"totalPositionMM\":\"0\",\"usdValue\":\"4484.700389\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":false,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"1\",\"cumRealisedPnl\":\"0\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"ETH\"},{\"availableToBorrow\":\"\",\"bonus\":\"0\",\"accruedInterest\":\"0\",\"availableToWithdraw\":\"\",\"totalOrderIM\":\"0\",\"equity\":\"37787.91643535\",\"totalPositionMM\":\"0\",\"usdValue\":\"37811.9495502\",\"unrealisedPnl\":\"0\",\"collateralSwitch\":true,\"spotHedgingQty\":\"0\",\"borrowAmount\":\"0\",\"totalPositionIM\":\"0\",\"walletBalance\":\"37787.91643535\",\"cumRealisedPnl\":\"-13119.68645465\",\"locked\":\"0\",\"marginCollateral\":true,\"coin\":\"USDT\"}]}]},\"retExtInfo\":{},\"time\":1759626980586}","module":"BybitClient","timestamp":"2025-10-05T01:16:20.160Z"}
{"level":"info","message":"Balance obtenido - Total: $213335.60, Disponible: $37787.92","module":"BybitClient","timestamp":"2025-10-05T01:16:20.162Z"}
{"level":"info","message":"Validando posición: Cantidad=0.148, Precio=122265.70, Valor=$18095.32","module":"RiskManager","timestamp":"2025-10-05T01:16:20.904Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759626980904","module":"BybitClient","timestamp":"2025-10-05T01:16:20.904Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:20.904Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626849421%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"20\",\"autoAddMargin\":0,\"avgPrice\":\"0\",\"liqPrice\":\"\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"\",\"positionValue\":\"\",\"isReduceOnly\":false,\"positionIMByMp\":\"\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"unrealisedPnl\":\"\",\"markPrice\":\"122272.43\",\"adlRankIndicator\":0,\"cumRealisedPnl\":\"-12069.1745359\",\"positionMM\":\"0\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"0\",\"positionMMByMp\":\"\",\"seq\":140697266483832,\"updatedTime\":\"1759626849421\",\"side\":\"\",\"bustPrice\":\"\",\"positionBalance\":\"0\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"0\",\"size\":\"0\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759626982074}","module":"BybitClient","timestamp":"2025-10-05T01:16:21.647Z"}
{"level":"info","message":"Posiciones activas encontradas: 0","module":"BybitClient","timestamp":"2025-10-05T01:16:21.649Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 5m, límite: 20","module":"BybitClient","timestamp":"2025-10-05T01:16:22.061Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:16:22.482Z"}
{"level":"info","message":"Velas obtenidas: 20 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:22.484Z"}
{"level":"info","message":"Trade aprobado - Risk Score: 0.24","module":"RiskManager","timestamp":"2025-10-05T01:16:22.900Z"}
{"level":"info","message":"Resultado validación: {\"approved\":true,\"reason\":\"Trade aprobado por gestión de riesgo\",\"riskScore\":0.2428319764395072}","module":"TradingStrategy","timestamp":"2025-10-05T01:16:22.906Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626982907","module":"BybitClient","timestamp":"2025-10-05T01:16:22.907Z"}
{"level":"info","message":"Trade aprobado por Risk Manager, ejecutando...","module":"TradingStrategy","timestamp":"2025-10-05T01:16:22.907Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"buyLeverage\":\"12\",\"sellLeverage\":\"12\"}","module":"BybitClient","timestamp":"2025-10-05T01:16:22.907Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{},\"retExtInfo\":{},\"time\":1759626984077}","module":"BybitClient","timestamp":"2025-10-05T01:16:23.651Z"}
{"level":"info","message":"Leverage establecido a 12x para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:23.652Z"}
{"level":"info","message":"Ejecutando orden: Buy 0.148 BTCUSDT | SL: 121535.28659999999 | TP: 123479.36211","module":"BybitClient","timestamp":"2025-10-05T01:16:23.652Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759626983652","module":"BybitClient","timestamp":"2025-10-05T01:16:23.652Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Buy\",\"orderType\":\"Market\",\"qty\":\"0.148\",\"timeInForce\":\"IOC\",\"stopLoss\":\"121535.28659999999\",\"slTriggerBy\":\"LastPrice\",\"takeProfit\":\"123479.36211\",\"tpTriggerBy\":\"LastPrice\"}","module":"BybitClient","timestamp":"2025-10-05T01:16:23.652Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"f220410a-cf85-4183-ae3b-65de31cb4e4f\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759626984495}","module":"BybitClient","timestamp":"2025-10-05T01:16:24.069Z"}
{"level":"info","message":"TRADE_OPEN","module":"TradingStrategy","pnl":0,"price":0,"quantity":0.148,"side":"BUY","symbol":"BTCUSDT","timestamp":1759626984072}
{"level":"debug","message":"Trades ejecutados hoy: 1/20","module":"RiskManager","timestamp":"2025-10-05T01:16:24.072Z"}
{"level":"info","message":"Orden ejecutada exitosamente: f220410a-cf85-4183-ae3b-65de31cb4e4f","module":"BybitClient","timestamp":"2025-10-05T01:16:24.070Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:16:39.582Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:16:40.707Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:16:40.707Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:16:40.707Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:17:24.084Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0500","module":"KalmanFilter","timestamp":"2025-10-05T01:17:24.092Z"}
{"level":"debug","message":"Predicción Kalman: 122271.51945777122 (Confianza: 0.854)","module":"KalmanFilter","timestamp":"2025-10-05T01:17:24.097Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:17:25.535Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:17:39.587Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:17:40.739Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:17:40.740Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:17:40.740Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:18:13.960Z"}
{"confidence":0.75,"decision":"BUY","indicators":{"bollinger":{"lower":122232.24502414562,"middle":122259.165,"upper":122286.08497585436},"ema":{"ema21":122254.24250462405,"ema50":122242.85579038592,"ema9":122266.4688691025},"macd":{"histogram":1.3913733764915381,"macd":13.913733764915378,"signal":12.52236038842384},"rsi":52.26404800872962,"volume":{"avg":11.167329999999994,"current":5.763,"ratio":0.5160588967998619}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI < 30, MACD bearish, Bollinger inferior, EMA9 cruza por debajo de EMA21, Kalman predice subida con confianza > 75%","symbol":"BTCUSDT","timestamp":1759627093963}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627093963","module":"BybitClient","timestamp":"2025-10-05T01:18:13.966Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:18:13.966Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-7.18096\",\"markPrice\":\"122217.18\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.56383249\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627095294}","module":"BybitClient","timestamp":"2025-10-05T01:18:14.872Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.148 BTCUSDT | PnL: -0.04%","module":"TradingStrategy","timestamp":"2025-10-05T01:18:14.880Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:18:14.880Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:18:15.293Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:18:15.306Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:18:39.591Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:18:40.792Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:18:40.793Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:18:40.792Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual es LONG con pérdida pequeña (0.04%). Sin señales de reversión detectadas...","module":"OllamaClient","timestamp":"2025-10-05T01:19:03.027Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual es LONG con pérdida pequeña (0.04%). Sin señales de reversión detectadas y indica...","module":"TradingStrategy","timestamp":"2025-10-05T01:19:03.029Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627143030","module":"BybitClient","timestamp":"2025-10-05T01:19:03.031Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:19:03.029Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:19:03.029Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:19:03.031Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-8.7616\",\"markPrice\":\"122206.5\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.55592929\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627144583}","module":"BybitClient","timestamp":"2025-10-05T01:19:04.149Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:19:04.150Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:19:04.150Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:19:04.150Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:19:39.592Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:19:40.727Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:19:40.728Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:19:40.727Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:20:04.152Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0783","module":"KalmanFilter","timestamp":"2025-10-05T01:20:04.154Z"}
{"level":"debug","message":"Predicción Kalman: 122219.53798185386 (Confianza: 0.838)","module":"KalmanFilter","timestamp":"2025-10-05T01:20:04.154Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:20:05.030Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:20:39.615Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:20:40.503Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:20:40.504Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:20:40.503Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:20:58.051Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122184.24570141234,"middle":122249.56000000001,"upper":122314.87429858769},"ema":{"ema21":122240.1632500138,"ema50":122240.7109180245,"ema9":122227.48098230269},"macd":{"histogram":-0.8461442113315565,"macd":-8.46144211331557,"signal":-7.615297901984014},"rsi":43.1007751937979,"volume":{"avg":11.04016,"current":1.947,"ratio":0.17635613976609035}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is at 43, which is a neutral level. MACD histogram is bullish and the recent price movement is upward. Bollinger bands are expanding, indicating high volatility. Kalman prediction is for a slight increase in price with 75% confidence. Signals for a long position are more clear-cut than for a short position.","symbol":"BTCUSDT","timestamp":1759627258659}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627258659","module":"BybitClient","timestamp":"2025-10-05T01:20:58.660Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:20:58.660Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-16.2356\",\"markPrice\":\"122156\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.51855929\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627260217}","module":"BybitClient","timestamp":"2025-10-05T01:20:59.791Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.148 BTCUSDT | PnL: -0.09%","module":"TradingStrategy","timestamp":"2025-10-05T01:20:59.795Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:20:59.792Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:21:00.191Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:21:00.200Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:21:39.621Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una pérdida del 0.09%, pero hay señales de reversión débiles (MACD...","module":"OllamaClient","timestamp":"2025-10-05T01:21:40.490Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una pérdida del 0.09%, pero hay señales de reversión débiles (MACD bajista,...","module":"TradingStrategy","timestamp":"2025-10-05T01:21:40.619Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627300619","module":"BybitClient","timestamp":"2025-10-05T01:21:40.620Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:21:40.623Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:21:40.623Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:21:40.619Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:21:40.619Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:21:40.620Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:21:40.623Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-22.32432\",\"markPrice\":\"122114.86\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.48811569\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627301910}","module":"BybitClient","timestamp":"2025-10-05T01:21:41.493Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:21:41.498Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:21:41.498Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:21:41.498Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:22:39.634Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:22:41.315Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:22:41.316Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:22:41.316Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:22:41.501Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0970","module":"KalmanFilter","timestamp":"2025-10-05T01:22:41.513Z"}
{"level":"debug","message":"Predicción Kalman: 122146.1967988306 (Confianza: 0.839)","module":"KalmanFilter","timestamp":"2025-10-05T01:22:41.514Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:22:42.243Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:23:39.632Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:23:40.595Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:23:40.629Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:23:40.628Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:23:43.413Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122087.7806877932,"middle":122185.575,"upper":122283.36931220679},"ema":{"ema21":122177.36934556623,"ema50":122208.22560900329,"ema9":122145.71785248755},"macd":{"histogram":-3.0012629963821382,"macd":-30.012629963821382,"signal":-27.011366967439244},"rsi":30.434782608695656,"volume":{"avg":11.21513000000001,"current":12.941,"ratio":1.1538876499871147}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n\"decision\": \"BUY\",\n\"confidence\": 0.7,\n\"reasoning\": \"RSI is below 30 and MACD is bearish, indicating a potential sell signal. However, the Bollinger bands are expanding and the EMA9 is crossing above","symbol":"BTCUSDT","timestamp":1759627423417}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627423417","module":"BybitClient","timestamp":"2025-10-05T01:23:43.425Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:23:43.416Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:23:43.416Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:23:43.425Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-20.646\",\"markPrice\":\"122126.2\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.49650729\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627424275}","module":"BybitClient","timestamp":"2025-10-05T01:23:43.841Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.148 BTCUSDT | PnL: -0.11%","module":"TradingStrategy","timestamp":"2025-10-05T01:23:43.842Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:23:43.842Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:23:44.260Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:23:44.260Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"CLOSE_25\",\n  \"confidence\": 0.6,\n  \"reasoning\": \"Pérdida del 0.11% es pequeña pero hay 3 señales de reversión débiles (RSI < 60, MACD < ...","module":"OllamaClient","timestamp":"2025-10-05T01:24:30.151Z"}
{"level":"info","message":"📊 IA: CLOSE_25 | Razón: Pérdida del 0.11% es pequeña pero hay 3 señales de reversión débiles (RSI < 60, MACD < 0, EMA9 < EMA...","module":"TradingStrategy","timestamp":"2025-10-05T01:24:30.170Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627470182","module":"BybitClient","timestamp":"2025-10-05T01:24:30.183Z"}
{"level":"info","message":"🤖 IA decide: CLOSE_25 (Confianza: 60%)","module":"OllamaClient","timestamp":"2025-10-05T01:24:30.169Z"}
{"level":"info","message":"🟢 CERRANDO 25% DE POSICIÓN: Pérdida del 0.11% es pequeña pero hay 3 señales de reversión débiles (RSI < 60, MACD < 0, EMA9 < EMA21). Cerrar 25% de la posición para asegurar parte de los beneficios y evitar mayores pérdidas.","module":"TradingStrategy","timestamp":"2025-10-05T01:24:30.181Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:24:30.184Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759626984495%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"18095.3236\",\"isReduceOnly\":false,\"positionIMByMp\":\"1517.06687327\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-9.43796\",\"markPrice\":\"122201.93\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12079.12696388\",\"positionMM\":\"99.5997373\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1517.06687327\",\"positionMMByMp\":\"99.55254749\",\"seq\":140697266657242,\"updatedTime\":\"1759626984495\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1517.06687327\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-9.95242798\",\"size\":\"0.148\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627472100}","module":"BybitClient","timestamp":"2025-10-05T01:24:31.667Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:24:31.667Z"}
{"level":"info","message":"Cerrando 25% de posición Buy BTCUSDT: 0.037 unidades (raw: 0.0370, stepSize: 0.001)","module":"BybitClient","timestamp":"2025-10-05T01:24:32.406Z"}
{"level":"info","message":"Ejecutando orden: Sell 0.037 BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:24:32.450Z"}
{"level":"debug","message":"Autenticación [POST]: timestamp=1759627472450","module":"BybitClient","timestamp":"2025-10-05T01:24:32.451Z"}
{"level":"debug","message":"Signature payload: {\"category\":\"linear\",\"symbol\":\"BTCUSDT\",\"side\":\"Sell\",\"orderType\":\"Market\",\"qty\":\"0.037\",\"timeInForce\":\"IOC\"}","module":"BybitClient","timestamp":"2025-10-05T01:24:32.451Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"orderId\":\"a1f8524c-ec36-471d-8ad5-cc2512544abe\",\"orderLinkId\":\"\"},\"retExtInfo\":{},\"time\":1759627473300}","module":"BybitClient","timestamp":"2025-10-05T01:24:32.867Z"}
{"level":"info","message":"💰 25% cerrado. PnL parcial: -5.16 USDT","module":"TradingStrategy","timestamp":"2025-10-05T01:24:32.896Z"}
{"level":"info","message":"Orden ejecutada exitosamente: a1f8524c-ec36-471d-8ad5-cc2512544abe","module":"BybitClient","timestamp":"2025-10-05T01:24:32.896Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627472896","module":"BybitClient","timestamp":"2025-10-05T01:24:32.896Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:24:32.896Z"}
{"level":"info","message":"✅ Acción ejecutada exitosamente","module":"TradingStrategy","timestamp":"2025-10-05T01:24:32.896Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-7.06959\",\"markPrice\":\"122202.01\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.66445502\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627474072}","module":"BybitClient","timestamp":"2025-10-05T01:24:33.639Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:24:33.640Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:24:33.640Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:24:33.640Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:24:39.634Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:24:40.531Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:24:40.532Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:24:40.531Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:25:33.644Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0775","module":"KalmanFilter","timestamp":"2025-10-05T01:25:33.645Z"}
{"level":"debug","message":"Predicción Kalman: 122143.91734377133 (Confianza: 0.827)","module":"KalmanFilter","timestamp":"2025-10-05T01:25:33.645Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:25:34.814Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:25:39.637Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:25:40.056Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:25:40.057Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:25:40.057Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:26:22.678Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122073.01819958394,"middle":122147.24499999997,"upper":122221.471800416},"ema":{"ema21":122154.08538507069,"ema50":122184.3384160508,"ema9":122143.95992132765},"macd":{"histogram":-1.635690788965439,"macd":-16.356907889654394,"signal":-14.721217100688955},"rsi":50.80147965474753,"volume":{"avg":11.202820000000006,"current":4.219,"ratio":0.37660160566714435}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está por encima del 50%, MACD histogram es positivo y creciente, Bollinger bands están en el lado superior, EMA9 cruza por encima de EMA21, Kalman predice una subida con confianza del 82.7%. Se sugiera apostar a la subida.","symbol":"BTCUSDT","timestamp":1759627582703}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627582704","module":"BybitClient","timestamp":"2025-10-05T01:26:22.704Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:26:22.705Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-12.6318\",\"markPrice\":\"122151.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.63664397\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627584526}","module":"BybitClient","timestamp":"2025-10-05T01:26:24.101Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: -0.09%","module":"TradingStrategy","timestamp":"2025-10-05T01:26:24.104Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:26:24.104Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:26:24.502Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:26:24.502Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:26:39.644Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:26:40.640Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:26:40.740Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:26:40.654Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una tendencia alcista (RSI<50, MACD>0, EMA9>EMA21) y no hay señale...","module":"OllamaClient","timestamp":"2025-10-05T01:26:58.384Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una tendencia alcista (RSI<50, MACD>0, EMA9>EMA21) y no hay señales claras ...","module":"TradingStrategy","timestamp":"2025-10-05T01:26:58.386Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627618387","module":"BybitClient","timestamp":"2025-10-05T01:26:58.387Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:26:58.386Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:26:58.387Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:26:58.387Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-12.6429\",\"markPrice\":\"122151.8\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.63658847\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627619696}","module":"BybitClient","timestamp":"2025-10-05T01:26:59.252Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:26:59.275Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:26:59.275Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:26:59.275Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:27:39.643Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:27:40.536Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:27:40.705Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:27:40.705Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:27:59.280Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1096","module":"KalmanFilter","timestamp":"2025-10-05T01:27:59.283Z"}
{"level":"debug","message":"Predicción Kalman: 122172.22149704685 (Confianza: 0.795)","module":"KalmanFilter","timestamp":"2025-10-05T01:27:59.284Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:28:00.410Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:28:39.647Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:28:40.536Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:28:40.538Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:28:40.537Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:28:53.144Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122079.0396034916,"middle":122152.52500000002,"upper":122226.01039650844},"ema":{"ema21":122161.60225505546,"ema50":122171.99308193164,"ema9":122172.88081017401},"macd":{"histogram":0.5820119951604283,"macd":5.820119951604283,"signal":5.238107956443855},"rsi":64.5217391304354,"volume":{"avg":12.068130000000004,"current":29.528,"ratio":2.446775101030565}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is above 64, MACD histogram is bullish, Bollinger bands are above the price, EMA9 is above EMA21 and EMA50, Kalman prediction is bullish with high confidence (79.5%). Signals are aligned for a potential buying opportunity.","symbol":"BTCUSDT","timestamp":1759627733146}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627733146","module":"BybitClient","timestamp":"2025-10-05T01:28:53.147Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:28:53.147Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-4.22355\",\"markPrice\":\"122227.65\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.67868522\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627734444}","module":"BybitClient","timestamp":"2025-10-05T01:28:53.994Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: -0.03%","module":"TradingStrategy","timestamp":"2025-10-05T01:28:54.014Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:28:53.995Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:28:54.412Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:28:54.412Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.7,\n  \"reasoning\": \"Tienes una posición LONG sólida con pérdida de 0.03%. Sin señales de reversión detectadas y...","module":"OllamaClient","timestamp":"2025-10-05T01:29:33.878Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: Tienes una posición LONG sólida con pérdida de 0.03%. Sin señales de reversión detectadas y indicado...","module":"TradingStrategy","timestamp":"2025-10-05T01:29:33.886Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627773887","module":"BybitClient","timestamp":"2025-10-05T01:29:33.888Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 70%)","module":"OllamaClient","timestamp":"2025-10-05T01:29:33.885Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:29:33.886Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:29:33.888Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-6.81207\",\"markPrice\":\"122204.33\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.66574262\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627775440}","module":"BybitClient","timestamp":"2025-10-05T01:29:34.993Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:29:34.996Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:29:34.996Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:29:34.996Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:29:39.648Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:29:40.057Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:29:40.057Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:29:40.057Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:30:34.999Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.2000","module":"KalmanFilter","timestamp":"2025-10-05T01:30:35.002Z"}
{"level":"debug","message":"Predicción Kalman: 122191.07746362404 (Confianza: 0.774)","module":"KalmanFilter","timestamp":"2025-10-05T01:30:35.002Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:30:35.854Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:30:39.650Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:30:40.064Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:30:40.081Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:30:40.081Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:31:19.786Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122097.27354539967,"middle":122177.36500000002,"upper":122257.45645460037},"ema":{"ema21":122183.00625888607,"ema50":122177.86050604253,"ema9":122197.09066990006},"macd":{"histogram":1.2668335255701084,"macd":12.668335255701095,"signal":11.401501730130986},"rsi":54.57765185053987,"volume":{"avg":11.48506,"current":12.097,"ratio":1.0532813933928076}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n\"decision\": \"BUY\",\n\"confidence\": 0.7,\n\"reasoning\": \"RSI está por encima del 50%, MACD histogram es positivo y creciente, Bollinger superiors y medio, EMAs cruzan por encima, Kalman predice subida co","symbol":"BTCUSDT","timestamp":1759627879799}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627879800","module":"BybitClient","timestamp":"2025-10-05T01:31:19.800Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:31:19.789Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:31:19.799Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:31:19.800Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-5.24808\",\"markPrice\":\"122218.42\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.67356257\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627881668}","module":"BybitClient","timestamp":"2025-10-05T01:31:21.229Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: -0.04%","module":"TradingStrategy","timestamp":"2025-10-05T01:31:21.232Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:31:21.231Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:31:21.642Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:31:21.643Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:31:39.657Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:31:40.583Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:31:40.584Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:31:40.584Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.7,\n  \"reasoning\": \"La posición actual tiene una tendencia alcista (RSI<60, MACD>0, EMA9>EMA21), y no hay señal...","module":"OllamaClient","timestamp":"2025-10-05T01:32:02.335Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una tendencia alcista (RSI<60, MACD>0, EMA9>EMA21), y no hay señales de rev...","module":"TradingStrategy","timestamp":"2025-10-05T01:32:02.401Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759627922402","module":"BybitClient","timestamp":"2025-10-05T01:32:02.402Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 70%)","module":"OllamaClient","timestamp":"2025-10-05T01:32:02.401Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:32:02.401Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:32:02.402Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-6.18936\",\"markPrice\":\"122209.94\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.66885617\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759627923988}","module":"BybitClient","timestamp":"2025-10-05T01:32:03.540Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:32:03.540Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:32:03.540Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:32:03.540Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:32:39.655Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:32:40.759Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:32:40.759Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:32:40.759Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:33:03.543Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1741","module":"KalmanFilter","timestamp":"2025-10-05T01:33:03.547Z"}
{"level":"debug","message":"Predicción Kalman: 122207.69504949464 (Confianza: 0.804)","module":"KalmanFilter","timestamp":"2025-10-05T01:33:03.549Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:33:04.414Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:33:39.663Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:33:40.821Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:33:40.822Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:33:40.822Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:33:59.750Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122152.5105392883,"middle":122208.50999999998,"upper":122264.50946071166},"ema":{"ema21":122206.89100677666,"ema50":122195.76124957266,"ema9":122214.24304306885},"macd":{"histogram":0.9290811236380243,"macd":9.29081123638025,"signal":8.361730112742226},"rsi":62.92682926829146,"volume":{"avg":12.448780000000001,"current":3.646,"ratio":0.2928801055203803}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está dentro de su rango alto (62.93), MACD histogram es bullish y el precio actual está a 122231.2. Además, los indicadores técnicos sugieren una posible subida. La posición actual es neutral, pero la tendencia es alcista. Se sugiere apostar a la subida.","symbol":"BTCUSDT","timestamp":1759628039752}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628039753","module":"BybitClient","timestamp":"2025-10-05T01:33:59.755Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:33:59.755Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-2.3199\",\"markPrice\":\"122244.8\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.68820347\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628041336}","module":"BybitClient","timestamp":"2025-10-05T01:34:00.886Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: -0.02%","module":"TradingStrategy","timestamp":"2025-10-05T01:34:00.944Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:34:00.944Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:34:01.346Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:34:01.347Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"No hay señales de reversión detectadas, y la tendencia es alçista según RSI, MACD y EMA. Ma...","module":"OllamaClient","timestamp":"2025-10-05T01:34:38.525Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: No hay señales de reversión detectadas, y la tendencia es alçista según RSI, MACD y EMA. Mantener po...","module":"TradingStrategy","timestamp":"2025-10-05T01:34:38.530Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628078530","module":"BybitClient","timestamp":"2025-10-05T01:34:38.535Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:34:38.530Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:34:38.530Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:34:38.536Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"-1.59174\",\"markPrice\":\"122251.36\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.69184427\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628080092}","module":"BybitClient","timestamp":"2025-10-05T01:34:39.644Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:34:39.646Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:34:39.644Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:34:39.646Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:34:39.661Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:34:40.051Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:34:40.145Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:34:40.144Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:35:39.649Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0955","module":"KalmanFilter","timestamp":"2025-10-05T01:35:39.651Z"}
{"level":"debug","message":"Predicción Kalman: 122227.4732300847 (Confianza: 0.821)","module":"KalmanFilter","timestamp":"2025-10-05T01:35:39.651Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:35:39.666Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:35:41.005Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:35:41.005Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:35:41.005Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:35:41.005Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:36:26.136Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122188.8407365305,"middle":122218.795,"upper":122248.7492634695},"ema":{"ema21":122218.31046495937,"ema50":122205.16544974592,"ema9":122227.08341902432},"macd":{"histogram":0.9516043473049649,"macd":9.516043473049649,"signal":8.564439125744684},"rsi":55.01686340640815,"volume":{"avg":12.52969,"current":6.985,"ratio":0.5574758832820286}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está por encima del 50, MACD histogram es positivo y creciente, Bollinger bander superior, EMA9 cruza por encima de EMA21, Kalman predice subida con confianza del 75%","symbol":"BTCUSDT","timestamp":1759628186138}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628186138","module":"BybitClient","timestamp":"2025-10-05T01:36:26.142Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:36:26.144Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"2.37207\",\"markPrice\":\"122287.07\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.71166332\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628187530}","module":"BybitClient","timestamp":"2025-10-05T01:36:27.079Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.02%","module":"TradingStrategy","timestamp":"2025-10-05T01:36:27.080Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:36:27.080Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:36:27.480Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:36:27.481Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:36:39.669Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:36:41.482Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:36:41.501Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:36:41.500Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una tendencia alcista (RSI<55, MACD histogramo bullish), un aument...","module":"OllamaClient","timestamp":"2025-10-05T01:37:04.098Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una tendencia alcista (RSI<55, MACD histogramo bullish), un aumento en el v...","module":"TradingStrategy","timestamp":"2025-10-05T01:37:04.120Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628224148","module":"BybitClient","timestamp":"2025-10-05T01:37:04.149Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:37:04.105Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:37:04.148Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:37:04.150Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"3.2301\",\"markPrice\":\"122294.8\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.71595347\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628226395}","module":"BybitClient","timestamp":"2025-10-05T01:37:05.951Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:37:05.952Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:37:05.952Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:37:05.953Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:37:39.672Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:37:41.158Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:37:41.159Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:37:41.159Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:38:05.955Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0722","module":"KalmanFilter","timestamp":"2025-10-05T01:38:05.957Z"}
{"level":"debug","message":"Predicción Kalman: 122276.91710305907 (Confianza: 0.838)","module":"KalmanFilter","timestamp":"2025-10-05T01:38:05.958Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:38:07.189Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:38:39.675Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:38:41.029Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:38:41.030Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:38:41.030Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:39:02.312Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122190.60307963671,"middle":122249.39499999997,"upper":122308.18692036324},"ema":{"ema21":122253.73143468598,"ema50":122230.40398435925,"ema9":122271.78398886415},"macd":{"histogram":1.8088686105737004,"macd":18.088686105736997,"signal":16.279817495163297},"rsi":63.37822014051571,"volume":{"avg":13.294520000000002,"current":2.888,"ratio":0.21723236340988614}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n  \"decision\": \"BUY\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"RSI está por encima del 60%, MACD está cruzando a positivo y el precio está superando su rango de Bollinger superior. Además, la predicción ","symbol":"BTCUSDT","timestamp":1759628342317}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628342322","module":"BybitClient","timestamp":"2025-10-05T01:39:02.328Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:39:02.317Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:39:02.317Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:39:02.329Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"5.6943\",\"markPrice\":\"122317\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.72827447\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628343636}","module":"BybitClient","timestamp":"2025-10-05T01:39:03.186Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.04%","module":"TradingStrategy","timestamp":"2025-10-05T01:39:03.187Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:39:03.187Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:39:03.586Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:39:03.587Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:39:39.686Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:39:40.587Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:39:40.588Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:39:40.588Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual es saludable con un pequeño ganancia de 0.04%. No hay señales de reversi...","module":"OllamaClient","timestamp":"2025-10-05T01:39:42.474Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual es saludable con un pequeño ganancia de 0.04%. No hay señales de reversión detect...","module":"TradingStrategy","timestamp":"2025-10-05T01:39:42.483Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628382484","module":"BybitClient","timestamp":"2025-10-05T01:39:42.488Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:39:42.478Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:39:42.483Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:39:42.488Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"5.8608\",\"markPrice\":\"122318.5\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.72910697\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628383348}","module":"BybitClient","timestamp":"2025-10-05T01:39:42.904Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:39:42.957Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:39:42.957Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:39:42.957Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:40:39.688Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:40:41.116Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:40:41.259Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:40:41.258Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:40:42.959Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0744","module":"KalmanFilter","timestamp":"2025-10-05T01:40:42.960Z"}
{"level":"debug","message":"Predicción Kalman: 122310.1582452466 (Confianza: 0.871)","module":"KalmanFilter","timestamp":"2025-10-05T01:40:42.960Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:40:43.373Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:41:34.763Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122242.83569319706,"middle":122292.19000000002,"upper":122341.54430680297},"ema":{"ema21":122292.23229168287,"ema50":122261.70620023392,"ema9":122308.19011900254},"macd":{"histogram":1.8165149125692537,"macd":18.16514912569255,"signal":16.348634213123297},"rsi":72.44565217391462,"volume":{"avg":13.717120000000001,"current":7.217,"ratio":0.5261308496244109}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está sobrecompra (72.45) y MACD es bullish (1.816515). Además, el precio actual es superior a los 30 días de Bollinger (122341.54), lo que sugiere una posible subida. Kalman predice una tendencia alcista con confianza del 76.8%.","symbol":"BTCUSDT","timestamp":1759628494766}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628494767","module":"BybitClient","timestamp":"2025-10-05T01:41:34.770Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:41:34.771Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.78343\",\"markPrice\":\"122344.83\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74372012\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628496739}","module":"BybitClient","timestamp":"2025-10-05T01:41:36.290Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.06%","module":"TradingStrategy","timestamp":"2025-10-05T01:41:36.290Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:41:36.290Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:41:37.026Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:41:37.027Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:41:39.689Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:41:40.426Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:41:40.447Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:41:40.443Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.065% y los indicadores técnicos sugieren una te...","module":"OllamaClient","timestamp":"2025-10-05T01:42:32.471Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una ganancia del 0.065% y los indicadores técnicos sugieren una tendencia a...","module":"TradingStrategy","timestamp":"2025-10-05T01:42:32.485Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628552489","module":"BybitClient","timestamp":"2025-10-05T01:42:32.494Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:42:32.485Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:42:32.485Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:42:32.494Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.30169\",\"markPrice\":\"122340.49\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74131142\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628554369}","module":"BybitClient","timestamp":"2025-10-05T01:42:33.918Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:42:33.918Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:42:33.918Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:42:33.918Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:42:39.690Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:42:40.940Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:42:40.946Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:42:40.945Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:43:33.922Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0824","module":"KalmanFilter","timestamp":"2025-10-05T01:43:33.924Z"}
{"level":"debug","message":"Predicción Kalman: 122329.65253768422 (Confianza: 0.883)","module":"KalmanFilter","timestamp":"2025-10-05T01:43:33.925Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:43:35.052Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:43:39.691Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:43:40.094Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:43:40.095Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:43:40.094Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:44:37.690Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122281.85630187155,"middle":122315.97000000002,"upper":122350.08369812848},"ema":{"ema21":122314.4715933961,"ema50":122283.07018497966,"ema9":122328.4511833995},"macd":{"histogram":1.6508750519555182,"macd":16.50875051955518,"signal":14.85787546759966},"rsi":62.655086848634085,"volume":{"avg":13.869110000000001,"current":4.477,"ratio":0.32280369829066174}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está en un nivel alto (62.66) indicando una posible sobrecompra. Además, el MACD histogram es bullish y el precio actual está dentro del rango de Bollinger superior. La Kalman predice una subida con confianza del 75%","symbol":"BTCUSDT","timestamp":1759628677861}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628677873","module":"BybitClient","timestamp":"2025-10-05T01:44:37.899Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:44:37.901Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"11.68386\",\"markPrice\":\"122370.96\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.75822227\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628679909}","module":"BybitClient","timestamp":"2025-10-05T01:44:39.461Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.09%","module":"TradingStrategy","timestamp":"2025-10-05T01:44:39.462Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:44:39.462Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:44:39.690Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:44:39.860Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:44:39.860Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:44:40.533Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:44:40.534Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:44:40.533Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una tendencia alcista (RSI>60, MACD>0, EMA9>EMA21), y no hay señal...","module":"OllamaClient","timestamp":"2025-10-05T01:45:24.888Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una tendencia alcista (RSI>60, MACD>0, EMA9>EMA21), y no hay señales de rev...","module":"TradingStrategy","timestamp":"2025-10-05T01:45:24.889Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628724890","module":"BybitClient","timestamp":"2025-10-05T01:45:24.891Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:45:24.889Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:45:24.890Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:45:24.894Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"6.17382\",\"markPrice\":\"122321.32\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.73067207\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628726231}","module":"BybitClient","timestamp":"2025-10-05T01:45:25.773Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:45:25.773Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:45:25.773Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:45:25.774Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:45:39.695Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:45:40.553Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:45:40.554Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:45:40.553Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:46:25.781Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0823","module":"KalmanFilter","timestamp":"2025-10-05T01:46:25.783Z"}
{"level":"debug","message":"Predicción Kalman: 122338.47538422006 (Confianza: 0.898)","module":"KalmanFilter","timestamp":"2025-10-05T01:46:25.784Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:46:27.557Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:46:39.697Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:46:40.589Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:46:40.639Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:46:40.638Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:47:16.053Z"}
{"confidence":0.7,"decision":"BUY","indicators":{"bollinger":{"lower":122314.8016934685,"middle":122337.23999999996,"upper":122359.67830653142},"ema":{"ema21":122333.79247934339,"ema50":122307.51762446531,"ema9":122338.67037392582},"macd":{"histogram":0.8375800228968728,"macd":8.375800228968728,"signal":7.5382202060718555},"rsi":49.754385964908145,"volume":{"avg":13.908569999999997,"current":9.549,"ratio":0.6865551239271903}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is below 40, MACD histogram is bullish and the stock is trading above its Bollinger bands. These indicators suggest that the stock has potential to move higher. Additionally, Kalman predicts a positive price movement with high confidence. Therefore, I suggest buying the stock.","symbol":"BTCUSDT","timestamp":1759628836103}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628836103","module":"BybitClient","timestamp":"2025-10-05T01:47:16.104Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:47:16.104Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"4.52991\",\"markPrice\":\"122306.51\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.72245252\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628837708}","module":"BybitClient","timestamp":"2025-10-05T01:47:17.261Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.03%","module":"TradingStrategy","timestamp":"2025-10-05T01:47:17.312Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:47:17.312Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:47:17.708Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:47:17.708Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:47:39.702Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:47:40.573Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:47:40.577Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:47:40.576Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.03%, y los indicadores técnicos sugieren que la...","module":"OllamaClient","timestamp":"2025-10-05T01:48:04.286Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una ganancia del 0.03%, y los indicadores técnicos sugieren que la tendenci...","module":"TradingStrategy","timestamp":"2025-10-05T01:48:04.291Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628884291","module":"BybitClient","timestamp":"2025-10-05T01:48:04.292Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:48:04.291Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:48:04.291Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:48:04.292Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"2.34654\",\"markPrice\":\"122286.84\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.71153567\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628886156}","module":"BybitClient","timestamp":"2025-10-05T01:48:05.700Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:48:05.700Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:48:05.700Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:48:05.700Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:48:39.700Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:48:40.595Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:48:40.595Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:48:40.595Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:49:05.704Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1081","module":"KalmanFilter","timestamp":"2025-10-05T01:49:05.707Z"}
{"level":"debug","message":"Predicción Kalman: 122314.01737157792 (Confianza: 0.880)","module":"KalmanFilter","timestamp":"2025-10-05T01:49:05.708Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:49:06.935Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:49:39.741Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:49:42.160Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:49:42.161Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:49:42.160Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:49:55.221Z"}
{"confidence":0.75,"decision":"BUY","indicators":{"bollinger":{"lower":122287.59981634562,"middle":122331.15999999996,"upper":122374.7201836543},"ema":{"ema21":122325.44042995301,"ema50":122316.36724790126,"ema9":122315.46752457615},"macd":{"histogram":-0.6120004087351845,"macd":-6.120004087351845,"signal":-5.50800367861666},"rsi":41.75595238095182,"volume":{"avg":13.770490000000004,"current":3.932,"ratio":0.28553813262999345}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI is above 41, MACD histogram is bullish and crossed above zero, Bollinger bands are expanding and the price is above the upper band, EMA9 crossed above EMA21 and EMA50, Kalman prediction is bullish with high confidence (88%)","symbol":"BTCUSDT","timestamp":1759628995919}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759628995920","module":"BybitClient","timestamp":"2025-10-05T01:49:55.928Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:49:55.928Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"6.6267\",\"markPrice\":\"122325.4\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.73293647\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759628997530}","module":"BybitClient","timestamp":"2025-10-05T01:49:57.069Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.05%","module":"TradingStrategy","timestamp":"2025-10-05T01:49:57.070Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:49:57.070Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:49:57.464Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:49:57.464Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:50:39.728Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:50:40.891Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:50:40.891Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:50:40.891Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.05%, y aunque hay señales de reversión (MACD ba...","module":"OllamaClient","timestamp":"2025-10-05T01:50:49.778Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual tiene una ganancia del 0.05%, y aunque hay señales de reversión (MACD bajista, EM...","module":"TradingStrategy","timestamp":"2025-10-05T01:50:49.780Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629049781","module":"BybitClient","timestamp":"2025-10-05T01:50:49.781Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:50:49.780Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:50:49.780Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:50:49.781Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.3028\",\"markPrice\":\"122340.5\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74131697\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629051090}","module":"BybitClient","timestamp":"2025-10-05T01:50:50.622Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:50:50.623Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:50:50.622Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:50:50.623Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:51:39.729Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:51:40.862Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:51:40.863Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:51:40.862Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:51:50.635Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0794","module":"KalmanFilter","timestamp":"2025-10-05T01:51:50.640Z"}
{"level":"debug","message":"Predicción Kalman: 122329.12224686256 (Confianza: 0.855)","module":"KalmanFilter","timestamp":"2025-10-05T01:51:50.642Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:51:52.519Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:52:39.738Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:52:41.041Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:52:41.042Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:52:41.041Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:53:03.346Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122263.59411693217,"middle":122316.53499999999,"upper":122369.4758830678},"ema":{"ema21":122320.97162667694,"ema50":122317.65384258646,"ema9":122324.51631235595},"macd":{"histogram":0.1085295011638664,"macd":1.0852950116386637,"signal":0.9767655104747973},"rsi":54.245754245754,"volume":{"avg":11.757739999999998,"current":1.831,"ratio":0.15572720607871923}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está por encima de 50, MACD histogram es positivo y creciente, Bollinger bands están en el interior, EMA9 cruza por encima de EMA21, Kalman predice una subida con confianza del 85.5%, volumen alto y cambio reciente del 0.02% en las últimas 10 velas. Se detectan señales bajistas claras, pero no tan claras como para sugerir un SELL/SHORT sin miedo. Sugiero una posición LONG con un leverage alto (10-50x) y un riesgo bajo (low).","symbol":"BTCUSDT","timestamp":1759629183350}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629183365","module":"BybitClient","timestamp":"2025-10-05T01:53:03.368Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:53:03.368Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"11.4663\",\"markPrice\":\"122369\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.75713447\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629185449}","module":"BybitClient","timestamp":"2025-10-05T01:53:04.985Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.08%","module":"TradingStrategy","timestamp":"2025-10-05T01:53:04.986Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:53:04.986Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:53:05.380Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:53:05.381Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:53:39.742Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:53:40.613Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:53:40.618Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:53:40.613Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual es saludable con una ganancia del 0.08% y sin señales de reversión. Mant...","module":"OllamaClient","timestamp":"2025-10-05T01:53:41.013Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual es saludable con una ganancia del 0.08% y sin señales de reversión. Mantener la p...","module":"TradingStrategy","timestamp":"2025-10-05T01:53:41.013Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629221014","module":"BybitClient","timestamp":"2025-10-05T01:53:41.014Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:53:41.013Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:53:41.013Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:53:41.014Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.67243\",\"markPrice\":\"122343.83\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74316512\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629221877}","module":"BybitClient","timestamp":"2025-10-05T01:53:41.410Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:53:41.410Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:53:41.410Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:53:41.411Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:54:39.741Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:54:41.412Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0781","module":"KalmanFilter","timestamp":"2025-10-05T01:54:41.413Z"}
{"level":"debug","message":"Predicción Kalman: 122345.89704227711 (Confianza: 0.865)","module":"KalmanFilter","timestamp":"2025-10-05T01:54:41.414Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:54:41.461Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:54:41.461Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:54:41.461Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:54:42.674Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:55:39.749Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:55:40.892Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:55:40.893Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:55:40.893Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:55:43.129Z"}
{"confidence":0.3,"decision":"BUY","indicators":{"bollinger":{"lower":122275.67326161757,"middle":122329.27999999998,"upper":122382.8867383824},"ema":{"ema21":122334.27958540487,"ema50":122325.44800457213,"ema9":122342.30169154884},"macd":{"histogram":0.7309723582278815,"macd":7.309723582278821,"signal":6.578751224050939},"rsi":56.618726152040544,"volume":{"avg":10.892199999999997,"current":21.56,"ratio":1.9793981013936581}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"{\n\"decision\": \"BUY\",\n\"confidence\": 0.7,\n\"reasoning\": \"RSI está por encima de 56, MACD histogram es positivo y creciente, Bollinger bands están en el área superior, EMA9 cruza por encima de EMA21, Kalm","symbol":"BTCUSDT","timestamp":1759629343139}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629343140","module":"BybitClient","timestamp":"2025-10-05T01:55:43.140Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:55:43.137Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:55:43.139Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:55:43.141Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.436\",\"markPrice\":\"122341.7\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74198297\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629344004}","module":"BybitClient","timestamp":"2025-10-05T01:55:43.538Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.06%","module":"TradingStrategy","timestamp":"2025-10-05T01:55:43.540Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:55:43.540Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:55:43.928Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:55:43.928Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual es saludable con una ganancia del 0.06% y sin señales de reversión. Mant...","module":"OllamaClient","timestamp":"2025-10-05T01:56:26.774Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual es saludable con una ganancia del 0.06% y sin señales de reversión. Mantener la p...","module":"TradingStrategy","timestamp":"2025-10-05T01:56:26.840Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629386845","module":"BybitClient","timestamp":"2025-10-05T01:56:26.861Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 80%)","module":"OllamaClient","timestamp":"2025-10-05T01:56:26.839Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:56:26.840Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:56:26.861Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"8.4471\",\"markPrice\":\"122341.8\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74203847\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629388457}","module":"BybitClient","timestamp":"2025-10-05T01:56:27.988Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:56:27.988Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:56:27.988Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:56:27.989Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:56:39.751Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:56:40.617Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:56:41.580Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:56:41.579Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T01:57:28.003Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1026","module":"KalmanFilter","timestamp":"2025-10-05T01:57:28.020Z"}
{"level":"debug","message":"Predicción Kalman: 122334.86575493963 (Confianza: 0.842)","module":"KalmanFilter","timestamp":"2025-10-05T01:57:28.049Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T01:57:29.443Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:57:39.754Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:57:40.684Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:57:40.999Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:57:40.998Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:58:39.756Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:58:43.161Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:58:43.164Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:58:43.162Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T01:58:52.953Z"}
{"confidence":0.8,"decision":"BUY","indicators":{"bollinger":{"lower":122307.45604290547,"middle":122342.37000000002,"upper":122377.28395709458},"ema":{"ema21":122338.74128841206,"ema50":122332.84003019996,"ema9":122338.62538425664},"macd":{"histogram":0.11956438124907431,"macd":1.1956438124907436,"signal":1.0760794312416693},"rsi":50.20380434782559,"volume":{"avg":11.00621,"current":0.207,"ratio":0.018807564093361838}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"RSI está por encima del 50%, MACD histogram es positivo y creciente, Bollinger Bandas están en el inferior, EMA9 cruza por encima de EMA21 y Kalman predice una subida con confianza del 84.2%. Además, el cambio reciente ha sido positivo pero no muy alto (0.54% en 24 horas), lo que indica una tendencia alcista pero no excesivamente alta. Sugiero comprar con un leverage de 10-20 y un riesgo bajo.","symbol":"BTCUSDT","timestamp":1759629532954}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629532954","module":"BybitClient","timestamp":"2025-10-05T01:58:52.957Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:58:52.957Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"7.46475\",\"markPrice\":\"122332.95\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.73712672\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629534330}","module":"BybitClient","timestamp":"2025-10-05T01:58:53.864Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.06%","module":"TradingStrategy","timestamp":"2025-10-05T01:58:53.906Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:58:53.906Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T01:58:54.319Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T01:58:54.319Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T01:59:39.761Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T01:59:41.057Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T01:59:41.059Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:59:41.058Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del 0.06%, con un RSI en el rango alto (50), MACD en ...","module":"OllamaClient","timestamp":"2025-10-05T01:59:57.354Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.8,\n  \"reasoning\": \"La posición actual tiene una ganancia del...","module":"TradingStrategy","timestamp":"2025-10-05T01:59:57.359Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629597359","module":"BybitClient","timestamp":"2025-10-05T01:59:57.362Z"}
{"level":"warn","message":"No se pudo parsear JSON de la respuesta, usando parser de fallback","module":"OllamaClient","timestamp":"2025-10-05T01:59:57.357Z"}
{"level":"debug","message":"Usando parser de fallback para respuesta de IA","module":"OllamaClient","timestamp":"2025-10-05T01:59:57.357Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 30%)","module":"OllamaClient","timestamp":"2025-10-05T01:59:57.359Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T01:59:57.359Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T01:59:57.362Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"9.0909\",\"markPrice\":\"122347.6\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.74525747\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629599533}","module":"BybitClient","timestamp":"2025-10-05T01:59:59.068Z"}
{"level":"info","message":"⚠️  Ya tenemos posición LONG abierta, IA sugiere BUY pero no abriremos otra. Esperando gestión de posición existente.","module":"TradingStrategy","timestamp":"2025-10-05T01:59:59.068Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T01:59:59.068Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T01:59:59.069Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T02:00:39.757Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T02:00:40.874Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T02:00:40.875Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:00:40.875Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T02:00:59.072Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.0985","module":"KalmanFilter","timestamp":"2025-10-05T02:00:59.073Z"}
{"level":"debug","message":"Predicción Kalman: 122335.17986854735 (Confianza: 0.797)","module":"KalmanFilter","timestamp":"2025-10-05T02:00:59.073Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T02:01:01.055Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T02:01:39.758Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T02:01:41.255Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T02:01:41.257Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:01:41.256Z"}
{"level":"debug","message":"Respuesta recibida de Ollama","module":"OllamaClient","timestamp":"2025-10-05T02:01:57.166Z"}
{"confidence":0.6,"decision":"HOLD","indicators":{"bollinger":{"lower":122315.75108945067,"middle":122333.42,"upper":122351.08891054933},"ema":{"ema21":122335.30158488345,"ema50":122333.8735833471,"ema9":122336.21957442157},"macd":{"histogram":0.047461109521100275,"macd":0.474611095211003,"signal":0.4271499856899027},"rsi":63.855421686746084,"volume":{"avg":11.03446000000001,"current":8.707,"ratio":0.7890735024640982}},"level":"info","message":"AI_ANALYSIS","module":"TradingStrategy","reasoning":"No enough clear selling signals detected to justify a sell position. The RSI is high but not overbought, MACD histogram is bullish but not conclusive, and the Bollinger bands are contracting but not significantly so. The Kalman forecast also indicates a neutral market sentiment. Given the current price action and indicators, it's better to hold rather than take a position against the market.","symbol":"BTCUSDT","timestamp":1759629717168}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629717179","module":"BybitClient","timestamp":"2025-10-05T02:01:57.187Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:01:57.188Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"4.5732\",\"markPrice\":\"122306.9\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.72266897\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629718525}","module":"BybitClient","timestamp":"2025-10-05T02:01:58.054Z"}
{"level":"info","message":"📊 Gestionando posición: Buy 0.111 BTCUSDT | PnL: 0.03%","module":"TradingStrategy","timestamp":"2025-10-05T02:01:58.058Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T02:01:58.058Z"}
{"level":"info","message":"🤖 Consultando IA sobre posición BTCUSDT...","module":"TradingStrategy","timestamp":"2025-10-05T02:01:58.456Z"}
{"level":"info","message":"Consultando a Ollama sobre posición activa...","module":"OllamaClient","timestamp":"2025-10-05T02:01:58.456Z"}
{"level":"debug","message":"Respuesta de Ollama sobre posición: {\n  \"action\": \"HOLD\",\n  \"confidence\": 0.79,\n  \"reasoning\": \"La posición actual es alicista, con un pequeño gananche de 0.03%. No hay señales de revers...","module":"OllamaClient","timestamp":"2025-10-05T02:02:34.970Z"}
{"level":"info","message":"📊 IA: HOLD | Razón: La posición actual es alicista, con un pequeño gananche de 0.03%. No hay señales de reversión detect...","module":"TradingStrategy","timestamp":"2025-10-05T02:02:34.972Z"}
{"level":"debug","message":"Autenticación [GET]: timestamp=1759629754972","module":"BybitClient","timestamp":"2025-10-05T02:02:34.972Z"}
{"level":"info","message":"🤖 IA decide: HOLD (Confianza: 79%)","module":"OllamaClient","timestamp":"2025-10-05T02:02:34.972Z"}
{"level":"info","message":"IA sugiere HOLD, evaluando estrategias de respaldo...","module":"TradingStrategy","timestamp":"2025-10-05T02:02:34.972Z"}
{"level":"debug","message":"Signature payload: category=linear&symbol=BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:02:34.973Z"}
{"level":"debug","message":"Respuesta Bybit: {\"retCode\":0,\"retMsg\":\"OK\",\"result\":{\"nextPageCursor\":\"BTCUSDT%2C1759627473299%2C0\",\"category\":\"linear\",\"list\":[{\"symbol\":\"BTCUSDT\",\"leverage\":\"12\",\"autoAddMargin\":0,\"avgPrice\":\"122265.7\",\"liqPrice\":\"112688.3\",\"riskLimitValue\":\"2000000\",\"takeProfit\":\"123479.3\",\"positionValue\":\"13571.4927\",\"isReduceOnly\":false,\"positionIMByMp\":\"1137.80015496\",\"tpslMode\":\"Full\",\"riskId\":1,\"trailingStop\":\"0\",\"liqPriceByMp\":\"112640.1\",\"unrealisedPnl\":\"5.34798\",\"markPrice\":\"122313.88\",\"adlRankIndicator\":2,\"cumRealisedPnl\":\"-12084.05942574\",\"positionMM\":\"74.69980298\",\"createdTime\":\"1741116559931\",\"positionIdx\":0,\"positionIM\":\"1137.80015496\",\"positionMMByMp\":\"74.72654287\",\"seq\":140697266670739,\"updatedTime\":\"1759627473299\",\"side\":\"Buy\",\"bustPrice\":\"\",\"positionBalance\":\"1137.80015496\",\"leverageSysUpdatedTime\":\"\",\"curRealisedPnl\":\"-14.88488984\",\"size\":\"0.111\",\"positionStatus\":\"Normal\",\"mmrSysUpdatedTime\":\"\",\"stopLoss\":\"121535.2\",\"tradeMode\":0,\"sessionAvgPrice\":\"\"}]},\"retExtInfo\":{},\"time\":1759629756943}","module":"BybitClient","timestamp":"2025-10-05T02:02:36.478Z"}
{"level":"info","message":"Ya existe una posición abierta, no se abrirá nueva posición","module":"TradingStrategy","timestamp":"2025-10-05T02:02:36.479Z"}
{"level":"info","message":"Posiciones activas encontradas: 1","module":"BybitClient","timestamp":"2025-10-05T02:02:36.478Z"}
{"level":"info","message":"No se generó señal de trading, esperando siguiente ciclo","module":"TradingStrategy","timestamp":"2025-10-05T02:02:36.479Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T02:02:39.760Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T02:02:40.498Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T02:02:40.548Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:02:40.542Z"}
{"level":"debug","message":"Análisis técnico completado para 100 velas","module":"TechnicalAnalysis","timestamp":"2025-10-05T02:03:36.481Z"}
{"level":"debug","message":"Parámetros adaptados - Q: 0.0010, R: 0.1060","module":"KalmanFilter","timestamp":"2025-10-05T02:03:36.482Z"}
{"level":"debug","message":"Predicción Kalman: 122323.552266195 (Confianza: 0.797)","module":"KalmanFilter","timestamp":"2025-10-05T02:03:36.483Z"}
{"level":"debug","message":"Enviando prompt a Ollama para análisis","module":"OllamaClient","timestamp":"2025-10-05T02:03:38.160Z"}
{"level":"debug","message":"Obteniendo velas para BTCUSDT, intervalo: 1m, límite: 5","module":"BybitClient","timestamp":"2025-10-05T02:03:39.761Z"}
{"level":"debug","message":"Respuesta de Bybit:","module":"BybitClient","timestamp":"2025-10-05T02:03:40.499Z"}
{"level":"debug","message":"Buffer actualizado para BTCUSDT: 200 velas","module":"DataManager","timestamp":"2025-10-05T02:03:40.507Z"}
{"level":"info","message":"Velas obtenidas: 5 para BTCUSDT","module":"BybitClient","timestamp":"2025-10-05T02:03:40.507Z"}
{"level":"info","message":"Recibida señal SIGINT, iniciando cierre graceful...","module":"TradingSystem","timestamp":"2025-10-05T02:04:15.763Z"}
{"component":"TradingStrategy","level":"info","message":"SYSTEM_TRADINGSTRATEGY_STOP","module":"TradingStrategy","status":"stop","timestamp":1759629855768}
{"level":"info","message":"Recopilación de datos detenida","module":"DataManager","timestamp":"2025-10-05T02:04:15.769Z"}
{"level":"info","message":"Servidor MCP cerrado","module":"MCPServer","timestamp":"2025-10-05T02:04:15.793Z"}
